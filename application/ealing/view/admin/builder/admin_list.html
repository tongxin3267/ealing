{extend name="admin/public/base"/}

{block name="style"}
<style>
	.list-header{
		background-color: #ffffff;
		padding-bottom: 24px;
	}
	.list-content{
		padding: 24px 24px 14px 24px;
	}
</style>
{/block}

{block name="content"}
<Layout>
	<Header class="list-header">
		{volist name="buttonList" id="button"}
			<{$button.tag} {$button.attr}>{$button.title|htmlspecialchars}</{$button.tag}>
		{/volist}
		<Modal v-model="modalEnable" class-name="vertical-center-modal" title="确认提示" :loading="setStatusloading" @on-ok="setEnableAsyncOK"><p>确认启用选中单位吗？</p></Modal>
		<Modal v-model="modalDisable" class-name="vertical-center-modal" title="确认提示" :loading="setStatusloading" @on-ok="setDisableAsyncOK"><p>确认禁用选中单位吗？</p></Modal>
	</Header>
	<Content class="list-content">
		<i-table :stripe="true" :columns="columns" :data="data"></i-table>
	    <div style="margin: 10px;overflow: hidden">
	        <div style="float: right;">
	            <Page :total="100" :current="1" :show-elevator="true" :show-sizer="true" @on-change="pageChange"></Page>
	        </div>
	    </div>		
	</Content>
</Layout>
{/block}

{block name="script"}
<script>
var columns = {$columns};

/* 这里加入对操作render的解析
 * 解析按钮、解析方式（跳转、ajax）、解析文字 
 */
columns.push({
    title: '操作',
    key: 'action',
    width: 150,
    align: 'center',
    render: (h, params) => {
        return h('div', [
            h('Button', {
                props: {
                    type: 'primary',
                    size: 'small'
                },
                style: {
                    marginRight: '5px'
                },
                on: {
                    click: () => {
                        console.log(params)
                    }
                }
            }, 'View'),
            h('Button', {
                props: {
                    type: 'error',
                    size: 'small'
                },
                on: {
                    click: () => {
                        console.log(params)
                    }
                }
            }, 'Delete')
        ]);
    }
});

ealingBuilder = {
	data: {
		setStatusloading: true,
		modalEnable: false,
		modalDisable: false,
		columns: columns,
		data: {$list}
	},
	methods: {
		setEnableAsyncOK () {
            setTimeout(() => {
                this.modalEnable = false;
            }, 2000);
		},
		setDisableAsyncOK () {
            setTimeout(() => {
                this.modalDisable = false;
            }, 2000);
		},
		pageChange () {
			this.data = [
				{id:3,status:'禁用',title:'onep2p'}
			];
		}
	}
};
</script>
{/block}