{extend name="admin/public/base"/}

{block name="style"}
<style>
	/* 列表按钮间隙 */
	.ivu-btn{
		margin: 0px 2px;
	}

	.list-header{
		background-color: #ffffff;
		padding-bottom: 10px;
	}
	.list-content{
		padding: 15px 15px 0px 15px;
	}
</style>
{/block}

{block name="content"}
<Layout>
	<Header class="list-header">
		<i-button v-for="button in buttonList" :class="button.attr.class" :icon="button.attr.icon" @click="{{ eval(button.attr.click) }}">{{ button.title }}</i-button>
		<Modal v-model="modalEnable" class-name="vertical-center-modal" title="确认提示" :loading="setStatusloading" @on-ok="setEnableAsyncOK"><p>确认启用选中单位吗？</p></Modal>
		<Modal v-model="modalDisable" class-name="vertical-center-modal" title="确认提示" :loading="setStatusloading" @on-ok="setDisableAsyncOK"><p>确认禁用选中单位吗？</p></Modal>
	</Header>
	<Content class="list-content">
	    <i-form style="padding-bottom:10px;">	    	
		    <i-select style="width:200px">
		        <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
		    </i-select>
	    	<date-picker type="daterange" :confirm="true" placeholder="Select date" style="width: 200px"></date-picker>
	    	<i-input placeholder="search" :style="{width: '240px'}" icon="ios-search"></i-input>
		    
		    <i-button type="primary">确定</i-button>
	    </i-form>
		<i-table :stripe="true" :columns="columns" :data="data"></i-table>
	    <div style="margin: 10px;overflow: hidden">
	        <div style="float: right;">
	            <Page :total="100" :current="1" :show-elevator="true" :show-sizer="true" @on-page-size-change="pageSize" @on-change="pageChange"></Page>
	        </div>
	    </div>		
	</Content>
</Layout>
{/block}

{block name="script"}
<script>
var columns = {$columns};
var actionList = {$actionList};

/* 这里加入对操作render的解析
 * 解析按钮、解析方式（跳转、ajax）、解析文字 
 */
columns.push({
    title: actionList.head,
    key: 'action',
    width: actionList.width,
    align: actionList.align,
    render: (h, params) => {
    	var renders = [];
    	for (var i = 0; i < actionList.actions.length; i++) {
    		renders.push(
                h('Button', {
                	props: eval('(' + actionList.actions[i].props + ')'),
                	style: eval('(' + actionList.actions[i].style + ')'),
                    on: {
                        click: () => {
                            console.log(params)
                        }
                    }
                }, actionList.actions[i].text)
    		);
    	}
    	
        return h('div', renders);
    }
});


ealingBuilder.data.setStatusloading = true;
ealingBuilder.data.modalEnable = false;
ealingBuilder.data.modalDisable = false;
ealingBuilder.data.buttonList = {$buttonList};
ealingBuilder.data.columns = columns;
ealingBuilder.data.data = {$list};
ealingBuilder.data.cityList = [
    {
        value: 'New York',
        label: 'New York'
    },
    {
        value: 'London',
        label: 'London'
    },
    {
        value: 'Sydney',
        label: 'Sydney'
    },
    {
        value: 'Ottawa',
        label: 'Ottawa'
    },
    {
        value: 'Paris',
        label: 'Paris'
    },
    {
        value: 'Canberra',
        label: 'Canberra'
    }
];

ealingBuilder.methods.setEnableAsyncOK = function () {
    setTimeout(() => {
        this.modalEnable = false;
    }, 2000);
}

ealingBuilder.methods.setDisableAsyncOK = function () {
    setTimeout(() => {
        this.modalDisable = false;
    }, 2000);
}

ealingBuilder.methods.pageSize = function () {
	console.log('调整每页显示行数');
}

ealingBuilder.methods.pageChange = function () {
	this.data = [
		{id:3,status:'禁用',title:'onep2p'}
	];
}
</script>
{/block}