webpackJsonp([2],{"0iBo":function(t,e){t.exports={notice:"o3hpWF-lum41lWw-1IEju_0",nothingDefault:"_2rGOSwcbTg6adpl0wdnOEm_0",newsLists:"_23gPYjhoi-0pjrYuccV2Yf_0",new:"_1VZwEFr3fMNNtw88oNYK_g_0",sourceTitle:"_1g9v-RB0zE8kca8_IVVRFN_0",sourceFrom:"_3PlNIgRCFa9hjog6wOGJUd_0",sourceImg:"_28LXMn9Fk98Vvj0GnLqEfa_0"}},"1G3Y":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),a=i.n(o),n=i("Dd8w"),s=i.n(n),r=i("vLgD"),c=(i("JYNW"),i("7iEP"),i("LOoJ")),l=i("PM1u"),d=(i("Sc1G"),i("pWbq")),u=(i("3TlD"),i("NYxO")),h=i("w1/K"),m=i("M+kU"),p=i("xgYI"),f=i("YaEn"),g=i("M4fF"),v=i.n(g),w={props:["feed"],data:function(){return{user:{}}},methods:{timers:d.a,router:function(t){f.a.push(t)}},components:{FeedImages:h.a,FeedTool:m.a,CommentsTool:p.a},computed:s()({avatar:function(){var t=this.user.avatar,e=void 0===t?"":t;return e}},Object(u.c)({commentFeed:function(t){return t.commentInput.commentFeed}})),created:function(){var t=this,e=this.$storeLocal.get("user_"+this.feed.user_id);e?this.user=s()({},this.user,e):Object(c.d)(this.feed.user_id).then(function(i){e=i,t.user=s()({},t.user,e)})}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{class:t.$style.detail,attrs:{id:"feed-"+t.feed.id}},[i("Row",{class:t.$style.userFeed,attrs:{gutter:16}},[i("Col",{attrs:{span:"4"}},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"150%"}},[t.feed.date?i("span",{staticStyle:{"text-align":"center","font-weight":"400","font-size":"18px",display:"flex","justify-content":"center","padding-bottom":"8px"}},[t._v(t._s(t.feed.date))]):t._e(),t._v(" "),t.feed.month?i("span",{staticStyle:{"text-align":"center","font-size":"12px",display:"flex","justify-content":"center"}},[t._v(t._s(t.feed.month)+"月")]):t._e()])]),t._v(" "),i("Col",{attrs:{span:"20"}},[i("div",{class:t.$style.content,on:{click:function(e){t.router("/feed/"+t.feed.id)}}},[t._v("\n        "+t._s(t.feed.feed_content)+"\n      ")]),t._v(" "),t.feed.images.length?i("div",[i("FeedImages",{attrs:{storages:t.feed.images}})],1):t._e()])],1),t._v(" "),i("Row",{class:t.$style.toolTop,attrs:{gutter:16}},[i("Col",{staticStyle:{"padding-top":"3vw","padding-bottom":"3vw"},attrs:{span:"21",offset:"3"}},[i("FeedTool",{attrs:{feed:t.feed,user:t.user,openInput:t.feed.id==t.commentFeed}})],1)],1)],1)},staticRenderFns:[]};var y=i("VU/8")(w,_,!1,function(t){this.$style=i("rxk0")},null,null).exports,b=i("ja0y"),C=i("UeNn"),x=i("gvlw"),S=i("J7Ch"),O=i("aTD6"),I=i("Rgjh"),$=i("O3Q9"),k=i("TEao"),B=(i("DQCr"),i("iTqn")),j=i("ESSu"),L=Object(k.a)(i("zpr1")),A=Object(k.a)(i("CJa5")),D=(Object(k.a)(i("LZDu")),{components:{UserFeed:y,FollowingIcon:b.a,UnFollowingIcon:C.a,EachFollowingIcon:x.a,BackIcon:S.a,ShareIcon:O.a,CommentIcon:I.a,LoadingWhiteIcon:j.a},data:function(){return{userInfo:{},user_id:0,bottomAllLoaded:!0,bottomStatus:"",max_id:0,hasNoMore:!1,im_token:window.TS_WEB.im_token,loading:!1,isShowCropper:!1,imgSrc:"",minContainerWidth:window.innerWidth,minContainerHeight:window.innerHeight-46,limit:20,scroll:0}},methods:{changeUrl:$.a,goBack:function(){Object($.b)(-1)},imMessage:function(){var t=this;Object(r.a)().post(Object(r.c)("im/conversations"),{type:0,uids:[this.user_id,this.currentUser]},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data.data,o=i.uids.split(","),a=0;a=o[0]==t.currentUser?o[1]:o[0],window.TS_WEB.dataBase.transaction("rw?",window.TS_WEB.dataBase.chatroom,function(){window.TS_WEB.dataBase.chatroom.where("cid").equals(i.cid).count(function(t){t||window.TS_WEB.dataBase.chatroom.put({cid:i.cid,user_id:i.user_id,name:i.name,pwd:i.pwd,uids:i.uids,type:i.type,last_message_time:0})})}),t.$store.dispatch(l.H,function(e){e({name:t.userInfo.name,avatar:t.userInfo.avatar,lists:[],cid:i.cid,user_id:t.currentUser})}),t.$router.push("/users/message/"+a+"/"+i.cid)}).catch(function(t){console.log(t)})},handleFollowingStatus:function(t){t?this.handleUnfollowing():this.handleFollowing()},handleFollowing:function(){var t=this;Object(c.a)(this.user_id).then(function(e){e?(t.userInfo.follower=!0,t.userInfo.extra.followers_count+=1):t.$store.dispatch(l.N,function(t){t({text:"关注失败,可能是已经关注了",time:1500,status:!0})})})},handleUnfollowing:function(){var t=this;Object(c.f)(this.user_id).then(function(e){e?(t.userInfo.follower=!1,t.userInfo.extra.followers_count-=1):t.$store.dispatch(l.N,function(t){t({text:"取关失败,可能是还没关注",time:1500,status:!0})})})},bottomStatusChange:function(t){this.bottomStatus=t},timers:d.a,loadBottom:function(){var t=this,e=this.limit,i=this.max_id,o=this.bottomAllLoaded;0==this.max_id||o?this.$refs.loadmore.onBottomLoaded():Object(r.a)().get(Object(r.b)("feeds"),{params:{user:this.user_id,after:i,limit:e}},{validateStatus:function(t){return 200===t}}).then(function(i){var o=i.data,a=(o=void 0===o?{}:o).feeds,n=a.length,s=void 0===n?0:n,r=[],c={};t.bottomAllLoaded=s!==e,s&&(a.forEach(function(e){r.push(e.id),c[e.id]=e,t.max_id=e.id}),t.$store.dispatch(l._7,function(t){t(r)}),t.$store.dispatch(l.y,function(t){t(c)})),t.$refs.loadmore.onBottomLoaded()})},fomateFeeds:function(t){var e=this,i=[],o=(new window.Date).toLocaleDateString(),a=new window.Date(new Date-864e5).toLocaleDateString();return t.forEach(function(t){var n=new window.Date(e.timers(t.created_at,8,!1)),s=n.toLocaleDateString();t.month="",t.date="",s!=a&&s!=o&&(t.month=n.getMonth()+1,t.date=n.getDate()),s==a&&(t.date="昨天"),s==o&&(t.date="今天"),i.push(t),t.id}),i},chooseImg:function(){this.$refs.bgInput.click()},changeBG:function(t){var e=this,i=t.target.files[0];if(i.type.includes("image/"))if("function"==typeof FileReader){var o=new window.FileReader;o.onload=function(t){e.imgSrc=t.target.result,e.$refs.cropper.replace(t.target.result),e.showCropper()},o.readAsDataURL(i)}else this.$store.dispatch(l.N,function(t){t({show:!0,status:!1,text:"系统太老了...",time:1500})});else this.$store.dispatch(l.N,function(t){t({show:!0,status:!1,text:"请选择图片",time:1500})})},handleHideAvatarSelect:function(){this.isShowCropper=!1,this.imgSrc="",this.$refs.bgInput.value="",this.loading=!1},showCropper:function(){this.isShowCropper=!0},getCropData:function(){var t=this,e=this.$refs.bgInput.value,i=this.$refs.cropper.$refs.img.currentSrc.match(/data:(.*?);/)[1];e.replace("C:\\fakepath\\","");var o=this.$refs.cropper.getCroppedCanvas({width:500,height:500}).toDataURL(i);this.loading=!0;var a=new FormData;a.append("image",Object(B.a)(o)),Object(r.a)().post(Object(r.b)("user/bg"),a,{validateStatus:function(t){return 204===t}}).then(function(e){e.data;Object(c.d)(t.user_id).then(function(e){t.userInfo=s()({},e)}),t.handleHideAvatarSelect(),t.$store.dispatch(l.N,function(t){t({text:"背景修改成功",time:2500,status:!0})})})}},computed:s()({loadMoreBottomStyle:function(){var t=0;return this.currentUser!=this.user_id?t=1:this.hasNoMore||(t=2),t},mintPaddingBottomStyle:function(){var t=0;return this.currentUser!=this.user_id?t=1==this.bottomAllLoaded?1:3:1==this.bottomAllLoaded&&(t=this.hasNoMore?2:0),t}},Object(u.c)({feeds:function(t){return t.userFeeds.userFeeds},currentUser:function(t){return t.users.mine.id}}),{canSetBg:function(){return this.currentUser===this.user_id},followAction:function(){var t=this.userInfo,e=t.following,i=t.follower;return e&&i?{status:!0,text:"相互关注"}:i?!e&&i?{status:!0,text:"已关注"}:void 0:{status:!1,text:"关注"}},nothing:function(){return this.$store.getters[l._7].length?0:L},avatar:function(){var t=this.userInfo.avatar;return t},sex:function(){var t=this.userInfo.sex;return t},feedCounts:function(){var t=this.userInfo.extra,e=(t=void 0===t?{}:t).feeds_count;return void 0===e?0:e},following:function(){var t=this.userInfo.extra,e=(t=void 0===t?{}:t).followings_count;return void 0===e?0:e},followed:function(){var t=this.userInfo.extra,e=(t=void 0===t?{}:t).followers_count;return void 0===e?0:e},introText:function(){var t=this.userInfo.bio;return void 0===t?"还没有简介呢":t},coverImg:function(){var t=this.userInfo.bg,e=void 0===t?"":t;return e?e+"?"+(new Date).getTime():A},feedList:function(){var t=[].concat(a()(this.$store.getters[l.B]));return this.fomateFeeds(t)}}),beforeCreate:function(){this.$store.dispatch(l.l)},created:function(){var t=this,e=parseInt(this.$route.params.user_id);if(!e&&!this.currentUser)return this.$Message.error("发生了一些错误"),void this.goBack();var i=this.limit;this.user_id=e,this.$store.dispatch("GET_USER_BY_ID",this.user_id).then(function(e){t.userInfo=s()({},e[0])}).catch(function(e){var i=e.response,o=(i=void 0===i?{}:i).data,a=void 0===o?{message:"获取用户失败"}:o;t.$Message.error(t.$MessageBundle(a))}),Object(r.a)().get(Object(r.b)("feeds"),{params:{limit:i,user:this.user_id}},{validateStatus:function(t){return 200===t}}).then(function(e){var o=e.data,a=(o=void 0===o?{}:o).feeds;if(a.length<i)return t.hasNoMore=!1,void(t.bottomAllLoaded=!0);t.hasNoMore=!0,t.bottomAllLoaded=!1;var n=[],s={};t.max_id=a[a.length-1].id,a.forEach(function(t){n.push(t.id),s[t.id]=t}),t.$store.dispatch(l.y,function(t){t(s)}),t.$store.dispatch(l._7,function(t){t(n)}),t.$refs.loadmore.onTopLoaded()})},mounted:function(){var t=this;this.$el.addEventListener("scroll",v.a.throttle(function(){t.$el.scrollTop>150?t.$refs.navBar.style.background="rgba(0,0,0,.2)":t.$refs.navBar.style.background="rgba(0,0,0,0)"},200))}}),N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["userFeeds","loadMoreContainer",{nobottom:t.currentUser===t.user_id}]},[i("div",[i("div",{ref:"navBar",class:t.$style.navBar},[i("div",{class:t.$style.back,on:{click:t.goBack}},[i("BackIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1),t._v(" "),i("div",{staticStyle:{display:"none"}},[i("ShareIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1)]),t._v(" "),i("div",{class:t.$style.userCover},[i("img",{class:t.$style.coverImg,attrs:{src:t.coverImg,alt:t.userInfo.name},on:{click:t.chooseImg}}),t._v(" "),t.canSetBg?i("input",{ref:"bgInput",staticStyle:{width:"0",height:"0",opacity:"0"},attrs:{type:"file",name:"image",accept:"image/*"},on:{change:t.changeBG}}):t._e()]),t._v(" "),i("div",{class:t.$style.userProfile},[i("div",{class:t.$style.avatar},[i("user-avatar",{attrs:{src:t.avatar,sex:t.sex}})],1),t._v(" "),i("h4",{class:t.$style.name},[t._v(t._s(t.userInfo.name))]),t._v(" "),i("div",{class:t.$style.intro},[i("p",[t._v("\n          "+t._s(t.introText)+"\n        ")])]),t._v(" "),i("div",{class:t.$style.follows},[i("Row",{attrs:{gutter:24}},[i("Col",{class:t.$style.followed,attrs:{span:"12"},nativeOn:{click:function(e){t.changeUrl("/users/relationship/"+t.user_id+"/followers")}}},[t._v("\n            粉丝 "),i("span",{class:t.$style.counts},[t._v(t._s(t.followed))])]),t._v(" "),i("Col",{class:t.$style.following,attrs:{span:"12"},nativeOn:{click:function(e){t.changeUrl("/users/relationship/"+t.user_id+"/followings")}}},[t._v("\n            关注 "),i("span",{class:t.$style.counts},[t._v(t._s(t.following))])])],1)],1)]),t._v(" "),t.nothing?t._e():i("div",{class:t.$style.feeds},[i("div",{staticStyle:{padding:"8px",background:"#f4f5f5",color:"#999"}},[t._v(t._s(t.feedCounts)+"条动态")]),t._v(" "),i("div",{class:t.$style.feedContainer},t._l(t.feedList,function(t){return i("UserFeed",{key:t.id,attrs:{feed:t}})}))]),t._v(" "),t.nothing?i("div",{class:t.$style.nothingDefault},[i("img",{staticStyle:{"padding-top":"6vh"},attrs:{src:t.nothing}})]):t._e()]),t._v(" "),i("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.bottomAllLoaded,bottomDistance:50},on:{"bottom-status-change":t.bottomStatusChange}},[t.nothing?t._e():i("div",{staticClass:"mint-loadmore-bottom",class:{hasNoMore:0==t.loadMoreBottomStyle,noMore:1==t.loadMoreBottomStyle,hasHalfMore:2==t.loadMoreBottomStyle},attrs:{slot:"bottom"},slot:"bottom"},[t.bottomAllLoaded&&"loading"!==t.bottomStatus&&!t.nothing&&t.hasNoMore?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'loading' && !bottomAllLoaded"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}]},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus,expression:"bottomStatus === 'drop'"}]},[t._v("释放加载更多")])])])]),t._v(" "),t.currentUser!=t.user_id?i("div",{class:t.$style.followStatus},[i("div",{staticClass:"actionButton",on:{click:function(e){t.handleFollowingStatus(!!t.followAction.status)}}},["关注"==t.followAction.text?i("UnFollowingIcon",{attrs:{height:"21",width:"21",color:"#333"}}):t._e(),t._v(" "),"已关注"==t.followAction.text?i("FollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"}}):t._e(),t._v(" "),"相互关注"==t.followAction.text?i("EachFollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"}}):t._e(),t._v(" "),i("span",{class:{following:t.followAction.status,noFollowing:!t.followAction.status}},[t._v(" "+t._s(t.followAction.text)+" ")])],1),t._v(" "),t.im_token?i("div",{staticClass:"actionButton",on:{click:t.imMessage}},[i("CommentIcon",{attrs:{width:"21",height:"21",color:"#333"}}),t._v(" "),i("span",{staticClass:"noFollowing"},[t._v(" 聊天 ")])],1):t._e()]):t._e(),t._v(" "),i("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowCropper,expression:"isShowCropper"}],class:t.$style.avatarSelect},[i("div",{staticClass:"avatarOp commonHeader"},[i("Row",{staticStyle:{display:"flex","align-items":"center"},attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.handleHideAvatarSelect(e)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v(" 更换背景\n                ")]),t._v(" "),i("Col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:"5"}},[t.loading?i("LoadingWhiteIcon",{attrs:{height:"21",width:"21"}}):i("span",{staticClass:"operate avatarDone",on:{click:t.getCropData}},[t._v("完成")])],1)],1)],1),t._v(" "),i("div",{class:t.$style.cropper},[i("vue-cropper",{ref:"cropper",staticClass:"canvasAvatar",attrs:{aspectRatio:2,"aspect-ratio":1,"view-mode":1,"auto-crop":!0,"auto-crop-area":.5,minContainerWidth:t.minContainerWidth,minContainerHeight:t.minContainerHeight,minCanvasWidth:t.minContainerWidth,minCanvasHeight:t.minContainerHeight,minCropBoxWidth:200,minCropBoxHeigh:200,"drag-mode":"move",background:!0,src:t.imgSrc,guides:!1}})],1)])])],1)},staticRenderFns:[]};var T=i("VU/8")(D,N,!1,function(t){this.$style=i("dJyA"),i("DIiK")},"data-v-0a309841",null);e.default=T.exports},"1Hz6":function(t,e){},"3TlD":function(t,e,i){"use strict";e.a=function(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1}},"4RJ8":function(t,e,i){var o;o=function(){"use strict";var t="undefined"!=typeof window?window:{},e="cropper",i=e+"-crop",o=e+"-disabled",a=e+"-hidden",n=e+"-modal",s=e+"-move",r="action",c="preview",l="cropmove",d="cropstart",u=t.PointerEvent?"pointerdown":"touchstart mousedown",h=t.PointerEvent?"pointermove":"touchmove mousemove",m=t.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",p="wheel mousewheel DOMMouseScroll",f=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,g=/^data:/,v=/^data:image\/jpeg;base64,/,w=/^(img|canvas)$/i,_={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},C=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),x=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},S=Number.isNaN||t.isNaN;function O(t){return"number"==typeof t&&!S(t)}function I(t){return void 0===t}function $(t){return"object"===(void 0===t?"undefined":y(t))&&null!==t}var k=Object.prototype.hasOwnProperty;function B(t){if(!$(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&k.call(i,"isPrototypeOf")}catch(t){return!1}}function j(t){return"function"==typeof t}function L(t,e){if(t&&j(e))if(Array.isArray(t)||O(t.length)){var i=t.length,o=void 0;for(o=0;o<i&&!1!==e.call(t,t[o],o,t);o+=1);}else $(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)});return t}function A(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];if($(t)&&i.length>0){if(Object.assign)return Object.assign.apply(Object,[t].concat(i));i.forEach(function(e){$(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})})}return t}function D(t,e){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return function(){for(var i=arguments.length,a=Array(i),n=0;n<i;n++)a[n]=arguments[n];return t.apply(e,o.concat(a))}}var N=/\.\d*(?:0|9){12}\d*$/i;function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return N.test(t)?Math.round(t*e)/e:t}var E=/^(width|height|left|top|marginLeft|marginTop)$/;function M(t,e){var i=t.style;L(e,function(t,e){E.test(e)&&O(t)&&(t+="px"),i[e]=t})}function P(t,e){if(e)if(O(t.length))L(t,function(t){P(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className=i+" "+e):t.className=e}}function F(t,e){e&&(O(t.length)?L(t,function(t){F(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function R(t,e,i){e&&(O(t.length)?L(t,function(t){R(t,e,i)}):i?P(t,e):F(t,e))}var U=/([a-z\d])([A-Z])/g;function z(t){return t.replace(U,"$1-$2").toLowerCase()}function Y(t,e){return $(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-"+z(e))}function W(t,e,i){$(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-"+z(e),i)}function H(t,e){if($(t[e]))try{delete t[e]}catch(i){t[e]=null}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=null}else t.removeAttribute("data-"+z(e))}var X=/\s+/;function V(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(j(i)){var a=e.trim().split(X);a.length>1?L(a,function(e){V(t,e,i,o)}):t.removeEventListener?t.removeEventListener(e,i,o):t.detachEvent&&t.detachEvent("on"+e,i)}}function q(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(j(i)){var a=e.trim().split(X);if(a.length>1)L(a,function(e){q(t,e,i,o)});else{if(o.once){var n=i;i=function(){for(var a=arguments.length,s=Array(a),r=0;r<a;r++)s[r]=arguments[r];return V(t,e,i,o),n.apply(t,s)}}t.addEventListener?t.addEventListener(e,i,o):t.attachEvent&&t.attachEvent("on"+e,i)}}}function Q(t,e,i){if(t.dispatchEvent){var o=void 0;return j(Event)&&j(CustomEvent)?o=I(i)?new Event(e,{bubbles:!0,cancelable:!0}):new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):I(i)?(o=document.createEvent("Event")).initEvent(e,!0,!0):(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(o)}return!t.fireEvent||t.fireEvent("on"+e)}function J(t){var e=document.documentElement,i=t.getBoundingClientRect();return{left:i.left+((window.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0)),top:i.top+((window.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0))}}var K=t.location,Z=/^(https?:)\/\/([^:/?#]+):?(\d*)/i;function G(t){var e=t.match(Z);return e&&(e[1]!==K.protocol||e[2]!==K.hostname||e[3]!==K.port)}function tt(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function et(t){var e=t.rotate,i=t.scaleX,o=t.scaleY,a=t.translateX,n=t.translateY,s=[];O(a)&&0!==a&&s.push("translateX("+a+"px)"),O(n)&&0!==n&&s.push("translateY("+n+"px)"),O(e)&&0!==e&&s.push("rotate("+e+"deg)"),O(i)&&1!==i&&s.push("scaleX("+i+")"),O(o)&&1!==o&&s.push("scaleY("+o+")");var r=s.length?s.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}var it=t.navigator,ot=it&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(it.userAgent);function at(t,e){var i=t.pageX,o=t.pageY,a={endX:i,endY:o};return e?a:A({startX:i,startY:o},a)}var nt=Number.isFinite||t.isFinite;function st(t){var e=t.aspectRatio,i=t.height,o=t.width,a=function(t){return nt(t)&&t>0};return a(o)&&a(i)?i*e>o?i=o/e:o=i*e:a(o)?i=o/e:a(i)&&(o=i*e),{width:o,height:i}}var rt=String.fromCharCode;var ct=/^data:.*,/;function lt(t){var e=new DataView(t),i=void 0,o=void 0,a=void 0,n=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var s=e.byteLength,r=2;r<s;){if(255===e.getUint8(r)&&225===e.getUint8(r+1)){a=r;break}r+=1}if(a){var c=a+10;if("Exif"===function(t,e,i){var o="",a=void 0;for(i+=e,a=e;a<i;a+=1)o+=rt(t.getUint8(a));return o}(e,a+4,4)){var l=e.getUint16(c);if(((o=18761===l)||19789===l)&&42===e.getUint16(c+2,o)){var d=e.getUint32(c+4,o);d>=8&&(n=c+d)}}}if(n){var u=e.getUint16(n,o),h=void 0,m=void 0;for(m=0;m<u;m+=1)if(h=n+12*m+2,274===e.getUint16(h,o)){h+=8,i=e.getUint16(h,o),e.setUint16(h,1,o);break}}return i}var dt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,o=this.cropper;P(o,a),F(t,a);var n={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=n,M(o,{width:n.width,height:n.height}),P(t,a),F(o,a)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,o=Math.abs(e.rotate)%180==90,a=o?e.naturalHeight:e.naturalWidth,n=o?e.naturalWidth:e.naturalHeight,s=a/n,r=t.width,c=t.height;t.height*s>t.width?3===i?r=t.height*s:c=t.width/s:3===i?c=t.width/s:r=t.height*s;var l={aspectRatio:s,naturalWidth:a,naturalHeight:n,width:r,height:c};l.left=(t.width-r)/2,l.top=(t.height-c)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=A({},e),this.initialCanvasData=A({},l)},limitCanvas:function(t,e){var i=this.options,o=this.containerData,a=this.canvasData,n=this.cropBoxData,s=i.viewMode,r=a.aspectRatio,c=this.cropped&&n;if(t){var l=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;s>1?(l=Math.max(l,o.width),d=Math.max(d,o.height),3===s&&(d*r>l?l=d*r:d=l/r)):s>0&&(l?l=Math.max(l,c?n.width:0):d?d=Math.max(d,c?n.height:0):c&&(l=n.width,(d=n.height)*r>l?l=d*r:d=l/r));var u=st({aspectRatio:r,width:l,height:d});l=u.width,d=u.height,a.minWidth=l,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(s){var h=o.width-a.width,m=o.height-a.height;a.minLeft=Math.min(0,h),a.minTop=Math.min(0,m),a.maxLeft=Math.max(0,h),a.maxTop=Math.max(0,m),c&&this.limited&&(a.minLeft=Math.min(n.left,n.left+(n.width-a.width)),a.minTop=Math.min(n.top,n.top+(n.height-a.height)),a.maxLeft=n.left,a.maxTop=n.top,2===s&&(a.width>=o.width&&(a.minLeft=Math.min(0,h),a.maxLeft=Math.max(0,h)),a.height>=o.height&&(a.minTop=Math.min(0,m),a.maxTop=Math.max(0,m))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=o.width,a.maxTop=o.height},renderCanvas:function(t,e){var i=this.canvasData,o=this.imageData;if(e){var a=function(t){var e=t.width,i=t.height,o=t.degree;if(90==(o=Math.abs(o)%180))return{width:i,height:e};var a=o%90*Math.PI/180,n=Math.sin(a),s=Math.cos(a),r=e*s+i*n,c=e*n+i*s;return o>90?{width:c,height:r}:{width:r,height:c}}({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),n=a.width,s=a.height,r=i.width*(n/i.naturalWidth),c=i.height*(s/i.naturalHeight);i.left-=(r-i.width)/2,i.top-=(c-i.height)/2,i.width=r,i.height=c,i.aspectRatio=n/s,i.naturalWidth=n,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,M(this.canvas,A({width:i.width,height:i.height},et({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,o=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);A(i,{width:o,height:a,left:(e.width-o)/2,top:(e.height-a)/2}),M(this.image,A({width:i.width,height:i.height},et(A({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio,o=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*o),a.height=Math.max(a.minHeight,a.height*o),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=A({},a)},limitCropBox:function(t,e){var i=this.options,o=this.containerData,a=this.canvasData,n=this.cropBoxData,s=this.limited,r=i.aspectRatio;if(t){var c=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,d=Math.min(o.width,s?a.width:o.width),u=Math.min(o.height,s?a.height:o.height);c=Math.min(c,o.width),l=Math.min(l,o.height),r&&(c&&l?l*r>c?l=c/r:c=l*r:c?l=c/r:l&&(c=l*r),u*r>d?u=d/r:d=u*r),n.minWidth=Math.min(c,d),n.minHeight=Math.min(l,u),n.maxWidth=d,n.maxHeight=u}e&&(s?(n.minLeft=Math.max(0,a.left),n.minTop=Math.max(0,a.top),n.maxLeft=Math.min(o.width,a.left+a.width)-n.width,n.maxTop=Math.min(o.height,a.top+a.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=o.width-n.width,n.maxTop=o.height-n.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&W(this.face,r,i.width>=e.width&&i.height>=e.height?"move":"all"),M(this.cropBox,A({width:i.width,height:i.height},et({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.complete&&Q(this.element,"crop",this.getData())}},ut={initPreview:function(){var t=this.crossOrigin,e=this.options.preview,i=t?this.crossOriginUrl:this.url,o=document.createElement("img");if(t&&(o.crossOrigin=t),o.src=i,this.viewBox.appendChild(o),this.image2=o,e){var a=e.querySelector?[e]:document.querySelectorAll(e);this.previews=a,L(a,function(e){var o=document.createElement("img");W(e,c,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(o.crossOrigin=t),o.src=i,o.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(e),e.appendChild(o)})}},resetPreview:function(){L(this.previews,function(t){var e=Y(t,c);M(t,{width:e.width,height:e.height}),t.innerHTML=e.html,H(t,c)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,o=i.width,a=i.height,n=t.width,s=t.height,r=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(M(this.image2,A({width:n,height:s},et(A({translateX:-r,translateY:-l},t)))),L(this.previews,function(e){var i=Y(e,c),d=i.width,u=i.height,h=d,m=u,p=1;o&&(m=a*(p=d/o)),a&&m>u&&(h=o*(p=u/a),m=u),M(e,{width:h,height:m}),M(e.getElementsByTagName("img")[0],A({width:n*p,height:s*p},et(A({translateX:-r*p,translateY:-l*p},t))))}))}},ht={bind:function(){var t=this.element,e=this.options,i=this.cropper;j(e.cropstart)&&q(t,d,e.cropstart),j(e.cropmove)&&q(t,l,e.cropmove),j(e.cropend)&&q(t,"cropend",e.cropend),j(e.crop)&&q(t,"crop",e.crop),j(e.zoom)&&q(t,"zoom",e.zoom),q(i,u,this.onCropStart=D(this.cropStart,this)),e.zoomable&&e.zoomOnWheel&&q(i,p,this.onWheel=D(this.wheel,this)),e.toggleDragModeOnDblclick&&q(i,"dblclick",this.onDblclick=D(this.dblclick,this)),q(t.ownerDocument,h,this.onCropMove=D(this.cropMove,this)),q(t.ownerDocument,m,this.onCropEnd=D(this.cropEnd,this)),e.responsive&&q(window,"resize",this.onResize=D(this.resize,this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;j(e.cropstart)&&V(t,d,e.cropstart),j(e.cropmove)&&V(t,l,e.cropmove),j(e.cropend)&&V(t,"cropend",e.cropend),j(e.crop)&&V(t,"crop",e.crop),j(e.zoom)&&V(t,"zoom",e.zoom),V(i,u,this.onCropStart),e.zoomable&&e.zoomOnWheel&&V(i,p,this.onWheel),e.toggleDragModeOnDblclick&&V(i,"dblclick",this.onDblclick),V(t.ownerDocument,h,this.onCropMove),V(t.ownerDocument,m,this.onCropEnd),e.responsive&&V(window,"resize",this.onResize)}},mt={resize:function(){var t=this.options,e=this.container,i=this.containerData,o=Number(t.minContainerWidth)||200,a=Number(t.minContainerHeight)||100;if(!(this.disabled||i.width<=o||i.height<=a)){var n=e.offsetWidth/i.width;if(1!==n||e.offsetHeight!==i.height){var s=void 0,r=void 0;t.restore&&(s=this.getCanvasData(),r=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(L(s,function(t,e){s[e]=t*n})),this.setCropBoxData(L(r,function(t,e){r[e]=t*n})))}}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=i,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*i,t)))},cropStart:function(t){if(!this.disabled){var e=this.options,i=this.pointers,o=void 0;t.changedTouches?L(t.changedTouches,function(t){i[t.identifier]=at(t)}):i[t.pointerId||0]=at(t),o=Object.keys(i).length>1&&e.zoomable&&e.zoomOnTouch?"zoom":Y(t.target,r),f.test(o)&&!1!==Q(this.element,d,{originalEvent:t,action:o})&&(t.preventDefault(),this.action=o,this.cropping=!1,"crop"===o&&(this.cropping=!0,P(this.dragBox,n)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Q(this.element,l,{originalEvent:t,action:e})&&(t.changedTouches?L(t.changedTouches,function(t){A(i[t.identifier],at(t,!0))}):A(i[t.pointerId||0],at(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?L(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,R(this.dragBox,n,this.cropped&&this.options.modal)),Q(this.element,"cropend",{originalEvent:t,action:e}))}}},pt={change:function(t){var e=this.options,i=this.canvasData,o=this.containerData,n=this.cropBoxData,s=this.pointers,r=this.action,c=e.aspectRatio,l=n.left,d=n.top,u=n.width,h=n.height,m=l+u,p=d+h,f=0,g=0,v=o.width,w=o.height,_=!0,y=void 0;!c&&t.shiftKey&&(c=u&&h?u/h:1),this.limited&&(f=n.minLeft,g=n.minTop,v=f+Math.min(o.width,i.width,i.left+i.width),w=g+Math.min(o.height,i.height,i.top+i.height));var b,C,x,S=s[Object.keys(s)[0]],O={x:S.endX-S.startX,y:S.endY-S.startY},I=function(t){switch(t){case"e":m+O.x>v&&(O.x=v-m);break;case"w":l+O.x<f&&(O.x=f-l);break;case"n":d+O.y<g&&(O.y=g-d);break;case"s":p+O.y>w&&(O.y=w-p)}};switch(r){case"all":l+=O.x,d+=O.y;break;case"e":if(O.x>=0&&(m>=v||c&&(d<=g||p>=w))){_=!1;break}I("e"),u+=O.x,c&&(h=u/c,d-=O.x/c/2),u<0&&(r="w",u=0);break;case"n":if(O.y<=0&&(d<=g||c&&(l<=f||m>=v))){_=!1;break}I("n"),h-=O.y,d+=O.y,c&&(u=h*c,l+=O.y*c/2),h<0&&(r="s",h=0);break;case"w":if(O.x<=0&&(l<=f||c&&(d<=g||p>=w))){_=!1;break}I("w"),u-=O.x,l+=O.x,c&&(h=u/c,d+=O.x/c/2),u<0&&(r="e",u=0);break;case"s":if(O.y>=0&&(p>=w||c&&(l<=f||m>=v))){_=!1;break}I("s"),h+=O.y,c&&(u=h*c,l-=O.y*c/2),h<0&&(r="n",h=0);break;case"ne":if(c){if(O.y<=0&&(d<=g||m>=v)){_=!1;break}I("n"),h-=O.y,d+=O.y,u=h*c}else I("n"),I("e"),O.x>=0?m<v?u+=O.x:O.y<=0&&d<=g&&(_=!1):u+=O.x,O.y<=0?d>g&&(h-=O.y,d+=O.y):(h-=O.y,d+=O.y);u<0&&h<0?(r="sw",h=0,u=0):u<0?(r="nw",u=0):h<0&&(r="se",h=0);break;case"nw":if(c){if(O.y<=0&&(d<=g||l<=f)){_=!1;break}I("n"),h-=O.y,d+=O.y,u=h*c,l+=O.y*c}else I("n"),I("w"),O.x<=0?l>f?(u-=O.x,l+=O.x):O.y<=0&&d<=g&&(_=!1):(u-=O.x,l+=O.x),O.y<=0?d>g&&(h-=O.y,d+=O.y):(h-=O.y,d+=O.y);u<0&&h<0?(r="se",h=0,u=0):u<0?(r="ne",u=0):h<0&&(r="sw",h=0);break;case"sw":if(c){if(O.x<=0&&(l<=f||p>=w)){_=!1;break}I("w"),u-=O.x,l+=O.x,h=u/c}else I("s"),I("w"),O.x<=0?l>f?(u-=O.x,l+=O.x):O.y>=0&&p>=w&&(_=!1):(u-=O.x,l+=O.x),O.y>=0?p<w&&(h+=O.y):h+=O.y;u<0&&h<0?(r="ne",h=0,u=0):u<0?(r="se",u=0):h<0&&(r="nw",h=0);break;case"se":if(c){if(O.x>=0&&(m>=v||p>=w)){_=!1;break}I("e"),h=(u+=O.x)/c}else I("s"),I("e"),O.x>=0?m<v?u+=O.x:O.y>=0&&p>=w&&(_=!1):u+=O.x,O.y>=0?p<w&&(h+=O.y):h+=O.y;u<0&&h<0?(r="nw",h=0,u=0):u<0?(r="sw",u=0):h<0&&(r="ne",h=0);break;case"move":this.move(O.x,O.y),_=!1;break;case"zoom":this.zoom((C=A({},b=s),x=[],L(b,function(t,e){delete C[e],L(C,function(e){var i=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),n=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+o*o),r=(Math.sqrt(a*a+n*n)-s)/s;x.push(r)})}),x.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),x[0]),t),_=!1;break;case"crop":if(!O.x||!O.y){_=!1;break}y=J(this.cropper),l=S.startX-y.left,d=S.startY-y.top,u=n.minWidth,h=n.minHeight,O.x>0?r=O.y>0?"se":"ne":O.x<0&&(l-=u,r=O.y>0?"sw":"nw"),O.y<0&&(d-=h),this.cropped||(F(this.cropBox,a),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}_&&(n.width=u,n.height=h,n.left=l,n.top=d,this.action=r,this.renderCropBox()),L(s,function(t){t.startX=t.endX,t.startY=t.endY})}},ft={crop:function(){return this.ready&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&P(this.dragBox,n),F(this.cropBox,a)),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),F(this.dragBox,n),P(this.cropBox,a)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.image2.src=t,L(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.load(t))),this},enable:function(){return this.ready&&(this.disabled=!1,F(this.cropper,o)),this},disable:function(){return this.ready&&(this.disabled=!0,P(this.cropper,o)),this},destroy:function(){var t=this.element,i=this.image;return this.loaded?(this.isImg&&this.replaced&&(t.src=this.originalUrl),this.unbuild(),F(t,a)):this.isImg?V(t,"load",this.onStart):i&&i.parentNode.removeChild(i),H(t,e),this},move:function(t,e){var i=this.canvasData,o=i.left,a=i.top;return this.moveTo(I(t)?t:o+Number(t),I(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(O(t)&&(i.left=t,o=!0),O(e)&&(i.top=e,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var o,a,n,s=this.options,r=this.canvasData,c=r.width,l=r.height,d=r.naturalWidth,u=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&s.zoomable){var h=d*t,m=u*t;if(!1===Q(this.element,"zoom",{originalEvent:i,oldRatio:c/d,ratio:h/d}))return this;if(i){var p=this.pointers,f=J(this.cropper),g=p&&Object.keys(p).length?(o=0,a=0,n=0,L(p,function(t){var e=t.startX,i=t.startY;o+=e,a+=i,n+=1}),{pageX:o/=n,pageY:a/=n}):{pageX:i.pageX,pageY:i.pageY};r.left-=(h-c)*((g.pageX-f.left-r.left)/c),r.top-=(m-l)*((g.pageY-f.top-r.top)/l)}else B(e)&&O(e.x)&&O(e.y)?(r.left-=(h-c)*((e.x-r.left)/c),r.top-=(m-l)*((e.y-r.top)/l)):(r.left-=(h-c)/2,r.top-=(m-l)/2);r.width=h,r.height=m,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return O(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,O(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(O(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(O(t)&&(i.scaleX=t,o=!0),O(e)&&(i.scaleY=e,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.options,i=this.imageData,o=this.canvasData,a=this.cropBoxData,n=void 0;if(this.ready&&this.cropped){n={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height};var s=i.width/i.naturalWidth;L(n,function(e,i){e/=s,n[i]=t?Math.round(e):e})}else n={x:0,y:0,width:0,height:0};return e.rotatable&&(n.rotate=i.rotate||0),e.scalable&&(n.scaleX=i.scaleX||1,n.scaleY=i.scaleY||1),n},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,a={};if(j(t)&&(t=t.call(this.element)),this.ready&&!this.disabled&&B(t)){var n=!1;e.rotatable&&O(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,n=!0),e.scalable&&(O(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,n=!0),O(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;O(t.x)&&(a.left=t.x*s+o.left),O(t.y)&&(a.top=t.y*s+o.top),O(t.width)&&(a.width=t.width*s),O(t.height)&&(a.height=t.height*s),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.loaded?A({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&L(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return j(t)&&(t=t.call(this.element)),this.ready&&!this.disabled&&B(t)&&(O(t.left)&&(e.left=t.left),O(t.top)&&(e.top=t.top),O(t.width)?(e.width=t.width,e.height=t.width/i):O(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e=void 0;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,i=this.options.aspectRatio,o=void 0,a=void 0;return j(t)&&(t=t.call(this.element)),this.ready&&this.cropped&&!this.disabled&&B(t)&&(O(t.left)&&(e.left=t.left),O(t.top)&&(e.top=t.top),O(t.width)&&t.width!==e.width&&(o=!0,e.width=t.width),O(t.height)&&t.height!==e.height&&(a=!0,e.height=t.height),i&&(o?e.height=e.width/i:a&&(e.width=e.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e,i,o,a,n,s,r,c,l,d,u,h,m,p,f,g,v,w,_,y,b,C,S,O,I,$,k,B,j,L,A,D,N,E,M,P,F=this.canvasData,R=(e=this.image,i=this.imageData,o=F,a=t,n=i.naturalWidth,s=i.naturalHeight,r=i.rotate,c=void 0===r?0:r,l=i.scaleX,d=void 0===l?1:l,u=i.scaleY,h=void 0===u?1:u,m=o.aspectRatio,p=o.naturalWidth,f=o.naturalHeight,g=a.fillColor,v=void 0===g?"transparent":g,w=a.imageSmoothingEnabled,_=void 0===w||w,y=a.imageSmoothingQuality,b=void 0===y?"low":y,C=a.maxWidth,S=void 0===C?1/0:C,O=a.maxHeight,I=void 0===O?1/0:O,$=a.minWidth,k=void 0===$?0:$,B=a.minHeight,j=void 0===B?0:B,L=document.createElement("canvas"),A=L.getContext("2d"),D=st({aspectRatio:m,width:S,height:I}),N=st({aspectRatio:m,width:k,height:j}),E=Math.min(D.width,Math.max(N.width,p)),M=Math.min(D.height,Math.max(N.height,f)),P=[-n/2,-s/2,n,s],L.width=T(E),L.height=T(M),A.fillStyle=v,A.fillRect(0,0,E,M),A.save(),A.translate(E/2,M/2),A.rotate(c*Math.PI/180),A.scale(d,h),A.imageSmoothingEnabled=_,A.imageSmoothingQuality=b,A.drawImage.apply(A,[e].concat(x(P.map(function(t){return Math.floor(T(t))})))),A.restore(),L);if(!this.cropped)return R;var U=this.getData(),z=U.x,Y=U.y,W=U.width,H=U.height,X=W/H,V=st({aspectRatio:X,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),q=st({aspectRatio:X,width:t.minWidth||0,height:t.minHeight||0}),Q=st({aspectRatio:X,width:t.width||W,height:t.height||H}),J=Q.width,K=Q.height;J=Math.min(V.width,Math.max(q.width,J)),K=Math.min(V.height,Math.max(q.height,K));var Z=document.createElement("canvas"),G=Z.getContext("2d");Z.width=T(J),Z.height=T(K),G.fillStyle=t.fillColor||"transparent",G.fillRect(0,0,J,K);var tt=t.imageSmoothingEnabled,et=void 0===tt||tt,it=t.imageSmoothingQuality;G.imageSmoothingEnabled=et,it&&(G.imageSmoothingQuality=it);var ot=R.width,at=R.height,nt=z,rt=Y,ct=void 0,lt=void 0,dt=void 0,ut=void 0,ht=void 0,mt=void 0;nt<=-W||nt>ot?(nt=0,ct=0,dt=0,ht=0):nt<=0?(dt=-nt,nt=0,ht=ct=Math.min(ot,W+nt)):nt<=ot&&(dt=0,ht=ct=Math.min(W,ot-nt)),ct<=0||rt<=-H||rt>at?(rt=0,lt=0,ut=0,mt=0):rt<=0?(ut=-rt,rt=0,mt=lt=Math.min(at,H+rt)):rt<=at&&(ut=0,mt=lt=Math.min(H,at-rt));var pt=[nt,rt,ct,lt];if(ht>0&&mt>0){var ft=J/W;pt.push(dt*ft,ut*ft,ht*ft,mt*ft)}return G.drawImage.apply(G,[R].concat(x(pt.map(function(t){return Math.floor(T(t))})))),Z},setAspectRatio:function(t){var e=this.options;return this.disabled||I(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,o=this.dragBox,a=this.face;if(this.loaded&&!this.disabled){var n="crop"===t,c=e.movable&&"move"===t;W(o,r,t=n||c?t:"none"),R(o,i,n),R(o,s,c),e.cropBoxMovable||(W(a,r,t),R(a,i,n),R(a,s,c))}return this}},gt=t.Cropper,vt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(this,t),!e||!w.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=A({},_,B(i)&&i),this.complete=!1,this.cropped=!1,this.disabled=!1,this.isImg=!1,this.limited=!1,this.loaded=!1,this.ready=!1,this.replaced=!1,this.wheeling=!1,this.originalUrl="",this.canvasData=null,this.cropBoxData=null,this.previews=null,this.pointers={},this.init()}return C(t,[{key:"init",value:function(){var t=this.element,i=t.tagName.toLowerCase(),o=void 0;if(!Y(t,e)){if(W(t,e,this),"img"===i){if(this.isImg=!0,o=t.getAttribute("src")||"",this.originalUrl=o,!o)return;o=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(o=t.toDataURL());this.load(o)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,o=this.options;if(o.checkOrientation&&window.ArrayBuffer)if(g.test(t))v.test(t)?this.read((a=t.replace(ct,""),n=atob(a),s=new ArrayBuffer(n.length),L(r=new Uint8Array(s),function(t,e){r[e]=n.charCodeAt(e)}),s)):this.clone();else{var a,n,s,r,c=new XMLHttpRequest;c.onerror=function(){e.clone()},c.onload=function(){e.read(c.response)},o.checkCrossOrigin&&G(t)&&i.crossOrigin&&(t=tt(t)),c.open("get",t),c.responseType="arraybuffer",c.withCredentials="use-credentials"===i.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(t){var e,i,o=this.options,a=this.imageData,n=lt(t),s=0,r=1,c=1;if(n>1){this.url=(e="image/jpeg",i="",L(new Uint8Array(t),function(t){i+=rt(t)}),"data:"+e+";base64,"+btoa(i));var l=function(t){var e=0,i=1,o=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:o=-1;break;case 5:e=90,o=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:o}}(n);s=l.rotate,r=l.scaleX,c=l.scaleY}o.rotatable&&(a.rotate=s),o.scalable&&(a.scaleX=r,a.scaleY=c),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=void 0,o=void 0;this.options.checkCrossOrigin&&G(e)&&((i=t.crossOrigin)?o=e:(i="anonymous",o=tt(e))),this.crossOrigin=i,this.crossOriginUrl=o;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=o||e;var n=D(this.start,this),s=D(this.stop,this);this.image=a,this.onStart=n,this.onStop=s,this.isImg?t.complete?this.start():q(t,"load",n):(q(a,"load",n),q(a,"error",s),P(a,"cropper-hide"),t.parentNode.insertBefore(a,t.nextSibling))}},{key:"start",value:function(t){var e=this,i=this.isImg?this.element:this.image;t&&(V(i,"load",this.onStart),V(i,"error",this.onStop)),function(t,e){if(!t.naturalWidth||ot){var i=document.createElement("img"),o=document.body||document.documentElement;i.onload=function(){e(i.width,i.height),ot||o.removeChild(i)},i.src=t.src,ot||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(i))}else e(t.naturalWidth,t.naturalHeight)}(i,function(t,i){A(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.loaded=!0,e.build()})}},{key:"stop",value:function(){var t=this.image;V(t,"load",this.onStart),V(t,"error",this.onStop),t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){var t=this;if(this.loaded){this.ready&&this.unbuild();var i=this.element,o=this.options,c=this.image,l=i.parentNode,d=document.createElement("div");d.innerHTML='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>';var u=d.querySelector(".cropper-container"),h=u.querySelector(".cropper-canvas"),m=u.querySelector(".cropper-drag-box"),p=u.querySelector(".cropper-crop-box"),f=p.querySelector(".cropper-face");this.container=l,this.cropper=u,this.canvas=h,this.dragBox=m,this.cropBox=p,this.viewBox=u.querySelector(".cropper-view-box"),this.face=f,h.appendChild(c),P(i,a),l.insertBefore(u,i.nextSibling),this.isImg||F(c,"cropper-hide"),this.initPreview(),this.bind(),o.aspectRatio=Math.max(0,o.aspectRatio)||NaN,o.viewMode=Math.max(0,Math.min(3,Math.round(o.viewMode)))||0,this.cropped=o.autoCrop,o.autoCrop?o.modal&&P(m,n):P(p,a),o.guides||P(p.getElementsByClassName(e+"-dashed"),a),o.center||P(p.getElementsByClassName(e+"-center"),a),o.background&&P(u,e+"-bg"),o.highlight||P(f,"cropper-invisible"),o.cropBoxMovable&&(P(f,s),W(f,r,"all")),o.cropBoxResizable||(P(p.getElementsByClassName(e+"-line"),a),P(p.getElementsByClassName(e+"-point"),a)),this.setDragMode(o.dragMode),this.render(),this.ready=!0,this.setData(o.data),this.completing=setTimeout(function(){j(o.ready)&&q(i,"ready",o.ready,{once:!0}),Q(i,"ready"),Q(i,"crop",t.getData()),t.complete=!0},0)}}},{key:"unbuild",value:function(){this.ready&&(this.complete||clearTimeout(this.completing),this.ready=!1,this.complete=!1,this.initialImageData=null,this.initialCanvasData=null,this.initialCropBoxData=null,this.containerData=null,this.canvasData=null,this.cropBoxData=null,this.unbind(),this.resetPreview(),this.previews=null,this.viewBox=null,this.cropBox=null,this.dragBox=null,this.canvas=null,this.container=null,this.cropper.parentNode.removeChild(this.cropper),this.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=gt,t}},{key:"setDefaults",value:function(t){A(_,B(t)&&t)}}]),t}();return A(vt.prototype,dt,ut,ht,mt,pt,ft),vt},t.exports=o()},"5Qkr":function(t,e){},"6paY":function(t,e){},"7Skp":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Dd8w"),a=i.n(o),n=i("DQCr"),s=i.n(n),r=i("O3Q9"),c=i("vLgD"),l=(i("7iEP"),i("LOoJ"),i("sRoY")),d=i.n(l),u=i("PM1u"),h=(i("NC6I"),i("iTqn")),m=(i("xrTZ"),i("Q53R"),i("3TlD"),i("J7Ch")),p=i("Yga2"),f=i("Fh+e"),g=(i("M4fF"),i("ESSu")),v=i("TEao"),w=i("b75W"),_=i("uWHh"),y=i("NYxO"),b=Object(v.a)(i("LZDu")),C=/^[a-zA-Z_\u4E00-\u9FA5\uF900-\uFA2D][a-zA-Z0-9_\u4E00-\u9FA5\uF900-\uFA2D]*$/,x={components:{VueCropper:d.a,BackIcon:m.a,SearchPop:w.a,CloseIcon:p.a,RightArrowIcon:f.a,LoadingWhiteIcon:g.a,SearchCity:_.a},data:function(){return{name:"",sex:0,location:"",isShowSexPopup:!1,bio:"",isShowCropper:!1,imgSrc:"",loading:!1,areaAbout:{showAreaSelect:!1,location:""},minContainerWidth:window.innerWidth,minContainerHeight:window.innerHeight-46}},methods:{changeUrl:r.a,goTo:r.b,handleAreaSelect:function(t){this.areaAbout.showAreaSelect=!!t},done:function(t){t&&this.save()},cleanSetting:function(){this.imgSrc=""},save:function(){var t=this,e=this.name,i=this.sex,o=this.bio,n=this.areaAbout.province,s=this.areaAbout.city,r=this.areaAbout.location,l=this.userInfo.name,d=this.province,u=this.city,h=this.location,m=this.userInfo.datas,p=(m=void 0===m?{}:m).sex,f=void 0===p?0:p,g=this.userInfo.datas,v=(g=void 0===g?{}:g).bio,w=void 0===v?"":v,_={};e!=l&&(_.name=e),n!=d&&0!=n&&(_.province=n),r!=h&&""!=r&&(_.location=r),s!=u&&0!=s&&(_.city=s),o!=w&&(_.bio=o),f!=i&&(_.sex=i),Object(c.a)().patch(Object(c.b)("user"),a()({},_),{validateStatus:function(t){return 204===t}}).then(function(e){t.$store.dispatch("UPDATE_INFO_OF_MINE",a()({},t.userInfo,_)),t.$Message.success("修改成功"),t.cleanSetting()})},clean:function(t){this[t]=""},showSexPopup:function(){this.isShowSexPopup=!0},hideSexPopup:function(){this.isShowSexPopup=!1},setSex:function(t){this.sex=t,this.hideSexPopup()},setImage:function(t){var e=this,i=t.target.files[0];if(-1!==i.type.indexOf("image/")){if("undefined"==typeof FileReader)return this.$store.dispatch(u.N,function(t){t({show:!0,status:!1,text:"系统太老了...",time:1500})}),!1;var o=new window.FileReader;o.onload=function(t){e.imgSrc=t.target.result,e.$refs.cropper.replace(t.target.result),e.showCropper()},o.readAsDataURL(i)}else this.$store.dispatch(u.N,function(t){t({show:!0,status:!1,text:"请选择图片",time:1500})})},getCropData:function(){var t=this,e=this.$refs.avatarInput.value,i=this.$refs.cropper.$refs.img.currentSrc.match(/data:(.*?);/)[1];e.replace("C:\\fakepath\\","");var o=this.$refs.cropper.getCroppedCanvas({width:500,height:500}).toDataURL(i);this.loading=!0;var a=new FormData;a.append("avatar",Object(h.a)(o)),Object(c.a)().post(Object(c.b)("user/avatar"),a,{validateStatus:function(t){return 204===t}}).then(function(e){e.data;t.handleHideAvatarSelect(),t.userInfo.avatar=s()(Object(c.b)("users/"+TS_WEB.currentUserId+"/avatar?s=200")),t.$store.dispatch(u.N,function(t){t({text:"头像上传成功",time:2500,status:!0})})})},handleHideAvatarSelect:function(){this.isShowCropper=!1,this.imgSrc="",this.$refs.avatarInput.value="",this.loading=!1},showCropper:function(){this.isShowCropper=!0}},computed:a()({},Object(y.c)({userInfo:function(t){return t.users.mine}}),{currentUser:function(){return this.userInfo.id},avatar:function(){var t=this.userInfo.avatar,e=void 0===t?b:t;return e},canClean:function(){return this.name.length>0},sexText:function(){return this.sex?{1:"男",2:"女",0:"保密"}[this.sex]:"选择性别"},areaText:function(){var t=this.location?this.location:"选择居住地";if(this.areaAbout.location)t=this.areaAbout.location;else{var e=this.userInfo.datas,i=(e=void 0===e?{}:e).location,o=(i=void 0===i?{}:i).value,a=void 0===o?"":o;a&&(t=a)}return this.handleAreaSelect(!1),t},soltAreas:function(){var t=this.areaAbout.formateAreas,e=this.areaAbout.formateProvince;0==e.length&&(e=[{name:"",id:0}]);return[{flex:1,values:e,className:"slot1",textAlign:"center"},{flex:1,values:""==this.areaAbout.provinceText?["北京"]:t[this.areaAbout.provinceText],className:"slot3",textAlign:"center"}]},canSave:function(){var t=this.userInfo.sex,e=void 0===t?0:t,i=this.userInfo.bio,o=void 0===i?"":i,a=this.name!=this.userInfo.name&&C.test(this.name)&&this.name.length>2&&this.name.length<13,n=this.sex!=e&&0!=this.sex,s=this.bio!=o&&""!=this.bio,r=this.areaAbout.province!=this.province&&0!=this.areaAbout.province,c=this.areaAbout.city!=this.city&&0!=this.areaAbout.city,l=this.areaAbout.location!=this.location&&""!=this.areaAbout.location;return a||n||s||r||c||l}}),mounted:function(){this.name=this.userInfo.name;var t=this.userInfo,e=t.sex,i=void 0===e?0:e,o=t.bio,a=void 0===o?"":o,n=t.location,s=void 0===n?"":n;this.sex=i,this.bio=a,this.location=s}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"userProfile",class:t.$style.userProfile},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.goTo(-1)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n          个人资料\n        ")]),t._v(" "),i("Col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:"5"}},[i("span",{staticClass:"operate",class:{active:t.canSave,disabled:!t.canSave},on:{click:function(e){t.done(t.canSave)}}},[t._v("完成")])])],1)],1),t._v(" "),i("div",{staticClass:"userProfile-background-color",class:t.$style.userProfileAvatar},[i("Row",{class:t.$style.rowCenter,staticStyle:{position:"relative"},attrs:{gutter:24}},[i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center"}},[i("Col",{class:t.$style.colCenter,attrs:{span:"5"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"avatar"}],class:t.$style.avatar,attrs:{alt:"name"}})]),t._v(" "),i("Col",{attrs:{span:"14"}},[t._v("\n            更换头像\n          ")]),t._v(" "),i("Col",{class:t.$style.rightIcon,attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("input",{ref:"avatarInput",staticStyle:{position:"absolute",width:"100%",left:"0",right:"0",height:"100%",opacity:"0"},attrs:{type:"file",value:"",name:"image",accept:"image/*"},on:{change:t.setImage}})])],1),t._v(" "),i("div",{staticClass:"userProfile-background-color",class:t.$style.userProfileSetting},[i("Row",{class:t.$style.rowCenter,attrs:{gutter:24}},[i("Col",{attrs:{span:"5"}},[t._v("\n          用户名\n        ")]),t._v(" "),i("Col",{attrs:{span:"14"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticStyle:{padding:"0"},attrs:{type:"text",placeholder:"输入新用户名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{class:t.$style.rightIcon,attrs:{span:"5"},nativeOn:{click:function(e){t.clean("name")}}},[i("CloseIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{class:t.$style.rowCenter,attrs:{gutter:24},nativeOn:{click:function(e){t.showSexPopup(e)}}},[i("Col",{attrs:{span:"5"}},[t._v("\n          性别\n        ")]),t._v(" "),i("Col",{attrs:{span:"14"}},[i("span",{class:{sexDefaultText:!t.sex}},[t._v(t._s(t.sexText))])]),t._v(" "),i("Col",{class:t.$style.rightIcon,attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{class:t.$style.rowCenter,attrs:{gutter:24},nativeOn:{click:function(e){t.handleAreaSelect(!0)}}},[i("Col",{attrs:{span:"5"}},[t._v("\n          城市\n        ")]),t._v(" "),i("Col",{attrs:{span:"14"}},[i("span",{class:{sexDefaultText:!t.location}},[t._v(t._s(t.areaText))])]),t._v(" "),i("Col",{class:t.$style.rightIcon,attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{class:t.$style.rowCenter,attrs:{gutter:24}},[i("Col",{attrs:{span:"5"}},[t._v("\n          简介\n        ")]),t._v(" "),i("Col",{class:t.$style.colBottom,attrs:{span:"19"}},[i("Input",{class:t.$style.intro,attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"编辑简介",maxlength:50},model:{value:t.bio,callback:function(e){t.bio=e},expression:"bio"}})],1)],1)],1),t._v(" "),i("mt-popup",{class:t.$style.SexPopup,staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.isShowSexPopup,callback:function(e){t.isShowSexPopup=e},expression:"isShowSexPopup"}},[i("div",[i("Button",{class:t.$style.sexOptions,attrs:{size:"large",type:"text",long:!0},on:{click:function(e){t.setSex(1)}}},[t._v("\n          男\n        ")]),t._v(" "),i("Button",{class:t.$style.sexOptions,attrs:{size:"large",type:"text",long:!0},on:{click:function(e){t.setSex(2)}}},[t._v("\n          女\n        ")]),t._v(" "),i("Button",{class:t.$style.sexOptions,attrs:{size:"large",type:"text",long:!0},on:{click:function(e){t.setSex(0)}}},[t._v("\n          保密\n        ")]),t._v(" "),i("Button",{class:t.$style.sexOptions,attrs:{size:"large",type:"text",long:!0},on:{click:t.hideSexPopup}},[t._v("\n          取消\n        ")])],1)]),t._v(" "),i("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowCropper,expression:"isShowCropper"}],class:t.$style.avatarSelect},[i("div",{staticClass:"avatarOp commonHeader"},[i("Row",{staticStyle:{display:"flex","align-items":"center"},attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.handleHideAvatarSelect(e)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n              更换头像\n            ")]),t._v(" "),i("Col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:"5"}},[t.loading?i("LoadingWhiteIcon",{attrs:{height:"21",width:"21"}}):i("span",{staticClass:"operate avatarDone",on:{click:t.getCropData}},[t._v("完成")])],1)],1)],1),t._v(" "),i("div",{class:t.$style.cropper},[i("vue-cropper",{ref:"cropper",staticClass:"canvasAvatar",attrs:{"aspect-ratio":1,"view-mode":1,"auto-crop":!0,"auto-crop-area":.5,minContainerWidth:t.minContainerWidth,minContainerHeight:t.minContainerHeight,minCanvasWidth:t.minContainerWidth,minCanvasHeight:t.minContainerHeight,minCropBoxWidth:200,minCropBoxHeigh:200,"drag-mode":"move",background:!0,src:t.imgSrc,guides:!1}})],1)])]),t._v(" "),i("search-pop",{attrs:{position:"right",searchfor:"USER_CITY"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("SearchCity",{attrs:{keyword:e.keyword,datas:e.datas},on:{closeSearch:function(e){t.areaAbout.showAreaSelect=!1}},model:{value:t.areaAbout.location,callback:function(e){t.$set(t.areaAbout,"location",e)},expression:"areaAbout.location"}})]}}]),model:{value:t.areaAbout.showAreaSelect,callback:function(e){t.$set(t.areaAbout,"showAreaSelect",e)},expression:"areaAbout.showAreaSelect"}})],1)},staticRenderFns:[]};var O=i("VU/8")(x,S,!1,function(t){this.$style=i("SaLK"),i("TPFY")},"data-v-776712f8",null);e.default=O.exports},"8j6Z":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("M4fF");var o=i("J7Ch"),a=(i("PM1u"),i("DQCr")),n=i.n(a),s=i("O3Q9"),r=i("LOoJ"),c=i("vLgD"),l={components:{BackIcon:o.a},data:function(){return{certification:{status:null,certification_name:null,data:{name:null,number:null,phone:null,desc:null,org_name:null,org_address:null,files:[]}}}},computed:{name:function(){var t=this.certification.certification_name;return"user"==t?"个人":"企业"},files:function(){return this.certification.data.files}},methods:{goTo:s.b,getImage:function(t){return n()(Object(c.b)("files/"+t),{w:100,h:60})}},created:function(){var t=this;Object(r.c)().then(function(e){t.certification=e})}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"changePassword"},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.goTo(-1)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n          "+t._s(t.name)+"认证\n        ")])],1)],1),t._v(" "),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:0===parseInt(t.certification.status),expression:"parseInt(certification.status) === 0"}],staticClass:"certificationState"},[t._v("\n      \t认证信息审核中，我们会在7个工作日内给你答复\n      ")]),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:"org"==t.certification.certification_name,expression:"certification.certification_name == 'org'"}],staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t机构名称\n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.org_name)+"\n      \t")])],1),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:"org"==t.certification.certification_name,expression:"certification.certification_name == 'org'"}],staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t机构地址\n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.org_address)+"\n      \t")])],1),t._v(" "),i("Row",{staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t"+t._s("user"==t.certification.certification_name?"真实姓名":"负责人")+" \n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.name)+"\n      \t")])],1),t._v(" "),i("Row",{staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t身份证号码\n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.number)+"\n      \t")])],1),t._v(" "),i("Row",{staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t\n      \t"+t._s("user"==t.certification.certification_name?"手机号":"负责人电话")+" \n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.phone)+"\n      \t")])],1),t._v(" "),i("Row",{staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t认证描述\n      \t")]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("\n      \t\t"+t._s(t.certification.data.desc)+"\n      \t")])],1),t._v(" "),i("Row",{staticClass:"row",attrs:{gutter:24}},[i("Col",{staticClass:"rowTitle",attrs:{span:"8"}},[t._v("\n      \t\t认证资料\n      \t")]),t._v(" "),t._l(t.files,function(e){return[i("Col",{attrs:{span:"8"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImage(e),expression:"getImage(file)"}],staticClass:"rowImage"})])]})],2)],1)])},staticRenderFns:[]};var u=i("VU/8")(l,d,!1,function(t){i("1Hz6")},"data-v-de366158",null);e.default=u.exports},CJa5:function(t,e,i){t.exports=i.p+"static/img/default_cover.a9c07f4.png"},DIiK:function(t,e){},Do9Y:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("vLgD"),a=(i("JYNW"),i("7iEP"),i("Dd8w")),n=i.n(a),s=i("LOoJ"),r=i("w1/K"),c=i("M+kU"),l=i("xgYI"),d=i("pWbq"),u=i("YaEn"),h=(i("LZDu"),i("M4fF")),m=i.n(h),p={props:["feed"],data:function(){return{user:{}}},methods:{timers:d.a,router:function(t){u.a.push(t)}},components:{FeedImages:r.a,FeedTool:c.a,CommentsTool:l.a},computed:{avatar:function(){var t=this.user.avatar,e=void 0===t?"":t;return e},timer:function(){return this.timers(this.feed.created_at,8,!1)}},created:function(){var t=this,e=this.$storeLocal.get("user_"+this.feed.user_id);!m.a.keys(e).length>0?Object(s.d)(this.feed.user_id).then(function(e){t.user=n()({},t.user,e)}):this.user=n()({},this.user,e)}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.detail,attrs:{id:"feed-"+t.feed.id}},[i("Row",{staticStyle:{"-webkit-align-items":"flex-start","align-items":"flex-start"},attrs:{gutter:16}},[i("Col",{attrs:{span:"4"}},[i("img",{staticStyle:{width:"100%","border-radius":"50%"},attrs:{src:t.avatar,alt:""}})]),t._v(" "),i("Col",{attrs:{span:"20"}},[i("Row",{class:t.$style.usernameLine},[i("Col",{attrs:{span:"17"}},[i("router-link",{class:t.$style.username,attrs:{to:"/users/feeds/"+t.user.user_id}},[t._v(t._s(t.user.name))])],1),t._v(" "),i("Col",{class:t.$style.timer,attrs:{span:"7"}},[i("timeago",{attrs:{since:t.timer,locale:"zh-CN","auto-update":60}})],1)],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"23"}},[i("div",{class:t.$style.content,on:{click:function(e){t.router("/feed/"+t.feed.id)}}},[t._v("\n            "+t._s(t.feed.feed_content)+"\n          ")]),t._v(" "),i("FeedImages",{directives:[{name:"show",rawName:"v-show",value:t.feed.images.length,expression:"feed.images.length"}],attrs:{storages:t.feed.images}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=i("VU/8")(p,f,!1,function(t){this.$style=i("Hx70")},null,null).exports,v=i("PM1u"),w=i("J7Ch"),_=i("O3Q9"),y=i("TEao"),b=i("DQCr"),C=i.n(b),x=Object(y.a)(i("zpr1")),S={components:{CollectionFeed:g,BackIcon:w.a},data:function(){return{feedsMaxId:0,limit:15,errors:{},bottomFeedsAllLoaded:!1,bottomFeedsStatus:"",feedType:{ids:v.r,feeds:v.q,add:v.a},currentTab:"feeds",isWeiXin:window.TS_WEB.isWeiXin,bottomNewsAllLoaded:!1,bottomNewsStatus:"",newsMaxId:0}},methods:{timers:d.a,getImg:function(t){return C()(Object(o.b)("files/"+t))},changeUrl:_.a,goBack:function(t){this.$store.dispatch(v.t,function(t){t("feeds")}),Object(_.b)(t)},changeTab:function(t){this.$store.dispatch(v.t,function(e){e(t)}),"news"===t&&(this.newsLists.length||this.getNewsData())},bottomNewsStatusChange:function(t){this.bottomNewsStatus=t},bottomFeedsStatusChange:function(t){this.bottomFeedsStatus=t},loadFeedsBottom:function(){var t=this;this.feedsMaxId>1?Object(o.a)().get(Object(o.b)("feeds/collections?limit=15&after="+this.feedsMaxId),{},{validate:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?{}:i,a=o.length;if(!a>0)return t.bottomFeedsAllLoaded=!0,void setTimeout(function(){t.$refs.loadmoreFeedsCollections&&t.$refs.loadmoreFeedsCollections.onBottomLoaded()},800);var n=[],s={};o.forEach(function(t){n.push(t.id),s[t.id]=t}),t.$store.dispatch(v.y,function(t){t(s)}),t.$store.dispatch(t.feedType.ids,function(t){t(n)}),a<15&&(t.bottomFeedsAllLoaded=!0),setTimeout(function(){t.$refs.loadmoreFeedsCollections&&t.$refs.loadmoreFeedsCollections.onBottomLoaded()},800)}):this.$refs.loadmoreFeedsCollections&&setTimeout(function(){t.$refs.loadmoreFeedsCollections.onBottomLoaded()},400)},loadFeedsTop:function(){var t=this,e=(this.uri,this.$store.getters[this.feedType.ids]);Object(o.a)().get(Object(o.b)("feeds/collections?limit=15"),{},{validate:function(t){return 200===t}}).then(function(i){var o=i.data,a=void 0===o?{}:o;if(!a.length>0)setTimeout(function(){t.$refs.loadmoreFeedsCollections&&t.$refs.loadmoreFeedsCollections.onTopLoaded()},800);else{var n=[],s={};a.forEach(function(t){-1==e.findIndex(function(e,i,o){return e==t.id})&&n.push(t.id),s[t.id]=t}),t.$store.dispatch(v.y,function(t){t(s)}),t.$store.dispatch(t.feedType.add,function(t){t(n)}),s={},n=[],a=[],setTimeout(function(){t.$refs.loadmoreFeedsCollections&&t.$refs.loadmoreFeedsCollections.onTopLoaded()},800)}})},loadNewsTop:function(){var t=this;Object(o.a)().get(Object(o.c)("news/collections"),{},{validate:function(t){return 200===t}}).then(function(e){var i=e.data.data;i.length&&(i.forEach(function(e){-1===t.newsLists.findIndex(function(t){return t.id===e.id})&&t.$store.dispatch(v.b,function(t){t(e)})}),t.$refs.loadmoreNewsCollections&&setTimeout(function(){t.$refs.loadmoreNewsCollections.onTopLoaded()},800))})},loadNewsBottom:function(){var t=this;this.newsMaxId>1?Object(o.a)().get(Object(o.c)("news/collections?max_id="+this.newsMaxId),{},{validate:function(t){return 200===t}}).then(function(e){var i=e.data.data,o=i.length;if(!o)return t.bottomNewsAllLoaded=!0,void(t.$refs.loadmoreNewsCollections&&setTimeout(function(){t.$refs.loadmoreNewsCollections.onBottomLoaded()},400));o<15&&(t.bottomNewsAllLoaded=!0),i.forEach(function(e){t.$store.dispatch(v.b,function(t){t(e)})}),t.$refs.loadmoreNewsCollections&&setTimeout(function(){t.$refs.loadmoreNewsCollections.onBottomLoaded()},800)}):this.$refs.loadmoreNewsCollections&&setTimeout(function(){t.$refs.loadmoreNewsCollections.onBottomLoaded()},400)},getNewsData:function(){var t=this;Object(o.a)().get(Object(o.c)("news/collections"),{},{validate:function(t){return 200===t}}).then(function(e){var i=e.data.data;if(!i.length)return t.bottomNewsAllLoaded=!0,void(t.$refs.loadmoreNewsCollections&&setTimeout(function(){t.$refs.loadmoreNewsCollections.onTopLoaded()},800));i.forEach(function(e){t.$store.dispatch(v.b,function(t){t(e)})}),i.length<15&&(t.bottomNewsAllLoaded=!0)})}},computed:{error:function(){return m.a.values(this.errors)[0]||""},nothingFeeds:function(){return this.$store.getters[this.feedType.ids].length?0:x},nothingNews:function(){return this.$store.getters[v.s].length?0:x},feedsList:function(){var t=this.$store.getters[this.feedType.feeds];return t.length&&(this.feedsMaxId=t[t.length-1].id),t},newsLists:function(){var t=this.$store.getters[v.s];return t.length&&(this.newsMaxId=t[t.length-1].id),t},active:function(){return this.$store.getters[v.t]}},created:function(){var t=this;this.$store.getters[v.t]||(this.$store.dispatch(v.t,function(t){t("feeds")}),Object(o.a)().get(Object(o.b)("feeds/collections"),{},{validate:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?{}:i;if(!(!o.length>0)){var a={},n=[];o.forEach(function(t){n.push(t.id),a[t.id]=t}),t.$store.dispatch(v.y,function(t){t(a)}),t.$store.dispatch(t.feedType.ids,function(t){t(n)}),o.length<15&&(t.bottomFeedsAllLoaded=!0),o=[],t.$refs.loadmoreFeedsCollections&&setTimeout(function(){t.$refs.loadmoreFeedsCollections.onTopLoaded()},800)}}))}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collections"},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{attrs:{span:"5"},nativeOn:{click:function(e){t.goBack(-1)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        收藏\n      ")]),t._v(" "),i("Col",{attrs:{span:"5"}})],1)],1),t._v(" "),i("section",{staticClass:"tabButton",class:{tabButtonInWeixin:t.isWeiXin}},[i("span",{class:{active:"feeds"===t.active},on:{click:function(e){t.changeTab("feeds")}}},[t._v("动态")]),t._v(" "),i("span",{class:{active:"news"===t.active},on:{click:function(e){t.changeTab("news")}}},[t._v("资讯")])]),t._v(" "),i("mt-tab-container",{staticClass:"tabContainer",class:{tabInWeixin:t.isWeiXin},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("mt-tab-container-item",{attrs:{id:"feeds"}},[t.nothingFeeds?i("div",{class:t.$style.nothingDefault},[i("img",{attrs:{src:t.nothingFeeds}})]):i("mt-loadmore",{ref:"loadmoreFeedsCollections",attrs:{"bottom-method":t.loadFeedsBottom,"top-method":t.loadFeedsTop,"bottom-all-loaded":t.bottomFeedsAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.bottomFeedsStatusChange}},[t.nothingFeeds?t._e():i("div",{staticClass:"feed-list"},t._l(t.feedsList,function(t,e){return i("CollectionFeed",{key:t.id,attrs:{feed:t}})})),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomFeedsAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomFeedsStatus&&!t.bottomFeedsAllLoaded,expression:"bottomFeedsStatus === 'pull' && !bottomFeedsAllLoaded"}]},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomFeedsStatus,expression:"bottomFeedsStatus === 'loading'"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomFeedsStatus&&!t.bottomFeedsAllLoaded,expression:"bottomFeedsStatus === 'drop' && !bottomFeedsAllLoaded"}]},[t._v("释放加载更多")])])])])],1),t._v(" "),i("mt-tab-container-item",{attrs:{id:"news"}},[t.nothingNews?i("div",{class:t.$style.nothingDefault},[i("img",{attrs:{src:t.nothingNews}})]):i("mt-loadmore",{ref:"loadmoreNewsCollections",attrs:{"bottom-method":t.loadNewsBottom,"top-method":t.loadNewsTop,"bottom-all-loaded":t.bottomNewsAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.bottomNewsStatusChange}},[t.nothingNews?t._e():i("div",{staticClass:"feed-list"},[i("ul",{class:t.$style.newsLists},t._l(t.newsLists,function(e,o){return i("li",{key:o,staticClass:"newsIndex-container-newslist",class:t.$style.new,on:{click:function(i){t.changeUrl("/news/"+e.id+"/detail")}}},[i("div",{class:t.$style.sourceTitle},[i("h4",[t._v(t._s(e.title))]),t._v(" "),i("section",{class:t.$style.sourceFrom},[i("i",[i("timeago",{class:t.$style.timer,attrs:{since:t.timers(e.created_at,8,!1),locale:"zh-CN","auto-update":60}})],1),t._v(" "),e.from?i("i",[t._v("来自 "+t._s(e.from))]):t._e()])]),t._v(" "),i("figure",{class:t.$style.sourceImg},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.storage.id),expression:"getImg(list.storage.id)"}],attrs:{alt:e.title}})])])}))]),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomNewsAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomNewsStatus&&!t.bottomNewsAllLoaded,expression:"bottomNewsStatus === 'pull' && !bottomNewsAllLoaded"}]},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomNewsStatus,expression:"bottomNewsStatus === 'loading'"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomNewsStatus&&!t.bottomNewsAllLoaded,expression:"bottomNewsStatus === 'drop' && !bottomNewsAllLoaded"}]},[t._v("释放加载更多")])])])])],1)],1)],1)},staticRenderFns:[]};var I=i("VU/8")(S,O,!1,function(t){this.$style=i("0iBo"),i("L0Yd")},null,null);e.default=I.exports},EKta:function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-l(t)},e.toByteArray=function(t){var e,i,o,s,r,c=t.length;s=l(t),r=new n(3*c/4-s),i=s>0?c-4:c;var d=0;for(e=0;e<i;e+=4)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],r[d++]=o>>16&255,r[d++]=o>>8&255,r[d++]=255&o;2===s?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,r[d++]=255&o):1===s&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,r[d++]=o>>8&255,r[d++]=255&o);return r},e.fromByteArray=function(t){for(var e,i=t.length,a=i%3,n="",s=[],r=0,c=i-a;r<c;r+=16383)s.push(d(t,r,r+16383>c?c:r+16383));1===a?(e=t[i-1],n+=o[e>>2],n+=o[e<<4&63],n+="=="):2===a&&(e=(t[i-2]<<8)+t[i-1],n+=o[e>>10],n+=o[e>>4&63],n+=o[e<<2&63],n+="=");return s.push(n),s.join("")};for(var o=[],a=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,c=s.length;r<c;++r)o[r]=s[r],a[s.charCodeAt(r)]=r;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function d(t,e,i){for(var a,n,s=[],r=e;r<i;r+=3)a=(t[r]<<16)+(t[r+1]<<8)+t[r+2],s.push(o[(n=a)>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},EuP9:function(t,e,i){"use strict";(function(t){var o=i("EKta"),a=i("ujcs"),n=i("sOR5");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,i){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,i)}function l(t,e,i,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,o){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(o||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,i):new Uint8Array(e,i,o);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,i,o):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!c.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var o=0|p(e,i),a=(t=r(t,o)).write(e,i);a!==o&&(t=t.slice(0,a));return t}(t,e,i):function(t,e){if(c.isBuffer(e)){var i=0|m(e.length);return 0===(t=r(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?r(t,0):h(t,e);if("Buffer"===e.type&&n(e.data))return h(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(d(e),t=r(t,e<0?0:0|m(e)),!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function h(t,e){var i=e.length<0?0:0|m(e.length);t=r(t,i);for(var o=0;o<i;o+=1)t[o]=255&e[o];return t}function m(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return E(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return M(t).length;default:if(o)return E(t).length;e=(""+e).toLowerCase(),o=!0}}function f(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function g(t,e,i,o,a){if(0===t.length)return-1;if("string"==typeof i?(o=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=a?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(a)return-1;i=t.length-1}else if(i<0){if(!a)return-1;i=0}if("string"==typeof e&&(e=c.from(e,o)),c.isBuffer(e))return 0===e.length?-1:v(t,e,i,o,a);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,o,a);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,o,a){var n,s=1,r=t.length,c=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;s=2,r/=2,c/=2,i/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(a){var d=-1;for(n=i;n<r;n++)if(l(t,n)===l(e,-1===d?0:n-d)){if(-1===d&&(d=n),n-d+1===c)return d*s}else-1!==d&&(n-=n-d),d=-1}else for(i+c>r&&(i=r-c),n=i;n>=0;n--){for(var u=!0,h=0;h<c;h++)if(l(t,n+h)!==l(e,h)){u=!1;break}if(u)return n}return-1}function w(t,e,i,o){i=Number(i)||0;var a=t.length-i;o?(o=Number(o))>a&&(o=a):o=a;var n=e.length;if(n%2!=0)throw new TypeError("Invalid hex string");o>n/2&&(o=n/2);for(var s=0;s<o;++s){var r=parseInt(e.substr(2*s,2),16);if(isNaN(r))return s;t[i+s]=r}return s}function _(t,e,i,o){return P(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,o)}function y(t,e,i){return 0===e&&i===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,i))}function b(t,e,i){i=Math.min(t.length,i);for(var o=[],a=e;a<i;){var n,s,r,c,l=t[a],d=null,u=l>239?4:l>223?3:l>191?2:1;if(a+u<=i)switch(u){case 1:l<128&&(d=l);break;case 2:128==(192&(n=t[a+1]))&&(c=(31&l)<<6|63&n)>127&&(d=c);break;case 3:n=t[a+1],s=t[a+2],128==(192&n)&&128==(192&s)&&(c=(15&l)<<12|(63&n)<<6|63&s)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:n=t[a+1],s=t[a+2],r=t[a+3],128==(192&n)&&128==(192&s)&&128==(192&r)&&(c=(15&l)<<18|(63&n)<<12|(63&s)<<6|63&r)>65535&&c<1114112&&(d=c)}null===d?(d=65533,u=1):d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),a+=u}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var i="",o=0;for(;o<e;)i+=String.fromCharCode.apply(String,t.slice(o,o+=C));return i}(o)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,i){return l(null,t,e,i)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,i){return o=null,n=e,s=i,d(a=t),a<=0?r(o,a):void 0!==n?"string"==typeof s?r(o,a).fill(n,s):r(o,a).fill(n):r(o,a);var o,a,n,s},c.allocUnsafe=function(t){return u(null,t)},c.allocUnsafeSlow=function(t){return u(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,o=e.length,a=0,n=Math.min(i,o);a<n;++a)if(t[a]!==e[a]){i=t[a],o=e[a];break}return i<o?-1:o<i?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var o=c.allocUnsafe(e),a=0;for(i=0;i<t.length;++i){var s=t[i];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,a),a+=s.length}return o},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,i){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,i);case"utf8":case"utf-8":return b(this,e,i);case"ascii":return x(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return y(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,i,o,a){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),e<0||i>t.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&e>=i)return 0;if(o>=a)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,o>>>=0,a>>>=0,this===t)return 0;for(var n=a-o,s=i-e,r=Math.min(n,s),l=this.slice(o,a),d=t.slice(e,i),u=0;u<r;++u)if(l[u]!==d[u]){n=l[u],s=d[u];break}return n<s?-1:s<n?1:0},c.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},c.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},c.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},c.prototype.write=function(t,e,i,o){if(void 0===e)o="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)o=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===o&&(o="utf8")):(o=i,i=void 0)}var a=this.length-e;if((void 0===i||i>a)&&(i=a),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var n,s,r,c,l,d,u,h,m,p=!1;;)switch(o){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return h=e,m=i,P(E(t,(u=this).length-h),u,h,m);case"ascii":return _(this,t,e,i);case"latin1":case"binary":return _(this,t,e,i);case"base64":return c=this,l=e,d=i,P(M(t),c,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,r=i,P(function(t,e){for(var i,o,a,n=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),o=i>>8,a=i%256,n.push(a),n.push(o);return n}(t,(n=this).length-s),n,s,r);default:if(p)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),p=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function x(t,e,i){var o="";i=Math.min(t.length,i);for(var a=e;a<i;++a)o+=String.fromCharCode(127&t[a]);return o}function S(t,e,i){var o="";i=Math.min(t.length,i);for(var a=e;a<i;++a)o+=String.fromCharCode(t[a]);return o}function O(t,e,i){var o=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>o)&&(i=o);for(var a="",n=e;n<i;++n)a+=T(t[n]);return a}function I(t,e,i){for(var o=t.slice(e,i),a="",n=0;n<o.length;n+=2)a+=String.fromCharCode(o[n]+256*o[n+1]);return a}function $(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,i,o,a,n){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<n)throw new RangeError('"value" argument is out of bounds');if(i+o>t.length)throw new RangeError("Index out of range")}function B(t,e,i,o){e<0&&(e=65535+e+1);for(var a=0,n=Math.min(t.length-i,2);a<n;++a)t[i+a]=(e&255<<8*(o?a:1-a))>>>8*(o?a:1-a)}function j(t,e,i,o){e<0&&(e=4294967295+e+1);for(var a=0,n=Math.min(t.length-i,4);a<n;++a)t[i+a]=e>>>8*(o?a:3-a)&255}function L(t,e,i,o,a,n){if(i+o>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function A(t,e,i,o,n){return n||L(t,0,i,4),a.write(t,e,i,o,23,4),i+4}function D(t,e,i,o,n){return n||L(t,0,i,8),a.write(t,e,i,o,52,8),i+8}c.prototype.slice=function(t,e){var i,o=this.length;if(t=~~t,e=void 0===e?o:~~e,t<0?(t+=o)<0&&(t=0):t>o&&(t=o),e<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=c.prototype;else{var a=e-t;i=new c(a,void 0);for(var n=0;n<a;++n)i[n]=this[n+t]}return i},c.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||$(t,e,this.length);for(var o=this[t],a=1,n=0;++n<e&&(a*=256);)o+=this[t+n]*a;return o},c.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||$(t,e,this.length);for(var o=this[t+--e],a=1;e>0&&(a*=256);)o+=this[t+--e]*a;return o},c.prototype.readUInt8=function(t,e){return e||$(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||$(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||$(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||$(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||$(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||$(t,e,this.length);for(var o=this[t],a=1,n=0;++n<e&&(a*=256);)o+=this[t+n]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||$(t,e,this.length);for(var o=e,a=1,n=this[t+--o];o>0&&(a*=256);)n+=this[t+--o]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readInt8=function(t,e){return e||$(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||$(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt16BE=function(t,e){e||$(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt32LE=function(t,e){return e||$(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||$(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||$(t,4,this.length),a.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||$(t,4,this.length),a.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||$(t,8,this.length),a.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||$(t,8,this.length),a.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,i,o){(t=+t,e|=0,i|=0,o)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var a=1,n=0;for(this[e]=255&t;++n<i&&(a*=256);)this[e+n]=t/a&255;return e+i},c.prototype.writeUIntBE=function(t,e,i,o){(t=+t,e|=0,i|=0,o)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var a=i-1,n=1;for(this[e+a]=255&t;--a>=0&&(n*=256);)this[e+a]=t/n&255;return e+i},c.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,i,o){if(t=+t,e|=0,!o){var a=Math.pow(2,8*i-1);k(this,t,e,i,a-1,-a)}var n=0,s=1,r=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===r&&0!==this[e+n-1]&&(r=1),this[e+n]=(t/s>>0)-r&255;return e+i},c.prototype.writeIntBE=function(t,e,i,o){if(t=+t,e|=0,!o){var a=Math.pow(2,8*i-1);k(this,t,e,i,a-1,-a)}var n=i-1,s=1,r=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===r&&0!==this[e+n+1]&&(r=1),this[e+n]=(t/s>>0)-r&255;return e+i},c.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,i){return A(this,t,e,!0,i)},c.prototype.writeFloatBE=function(t,e,i){return A(this,t,e,!1,i)},c.prototype.writeDoubleLE=function(t,e,i){return D(this,t,e,!0,i)},c.prototype.writeDoubleBE=function(t,e,i){return D(this,t,e,!1,i)},c.prototype.copy=function(t,e,i,o){if(i||(i=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<i&&(o=i),o===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-i&&(o=t.length-e+i);var a,n=o-i;if(this===t&&i<e&&e<o)for(a=n-1;a>=0;--a)t[a+e]=this[a+i];else if(n<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<n;++a)t[a+e]=this[a+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+n),e);return n},c.prototype.fill=function(t,e,i,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{var s=c.isBuffer(t)?t:E(new c(t,o).toString()),r=s.length;for(n=0;n<i-e;++n)this[n+e]=s[n%r]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function T(t){return t<16?"0"+t.toString(16):t.toString(16)}function E(t,e){var i;e=e||1/0;for(var o=t.length,a=null,n=[],s=0;s<o;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!a){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(s+1===o){(e-=3)>-1&&n.push(239,191,189);continue}a=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),a=i;continue}i=65536+(a-55296<<10|i-56320)}else a&&(e-=3)>-1&&n.push(239,191,189);if(a=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function M(t){return o.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,i,o){for(var a=0;a<o&&!(a+i>=e.length||a>=t.length);++a)e[a+i]=t[a];return a}}).call(e,i("DuR2"))},F8Tz:function(t,e){},FN6l:function(t,e){t.exports={comments:"s32CXqJxc4iejYpGVWo75_0",comment:"DTWw3LVp8DWycdmi9zAZM_0",commentContent:"hsHTFBhUOmjFP2OsqyyZ9_0",commentBox:"_3_pulw1IQmgeT-hCfE53R2_0",commentOperations:"rUvO8TL8ZmxfGjsNXD80f_0",commentOperation:"SxPiwf6zd6aawlPNFZffi_0",sourceContent:"_3Yp-xuZepnQFCtpAbv3q_t_0",source:"Enowor9vhrqkqySTvX7qE_0",content:"_11P6FaRXKi1DUM4tyHGZJg_0"}},HSuf:function(t,e){},Hx70:function(t,e){t.exports={detail:"_2lBduhNnHMYVGcavYcUfad_0",toolTop:"_1wyEHEJafVu1uK_ZISd35J_0",usernameLine:"Sp69Uv6-YaFhQuk59v5BF_0",username:"k6WJ_z5cyOFm3EB56g9tf_0",content:"_2ArG6fbHQKRhrk25WHyOI5_0",timer:"IQlfEBcBQ1CKJ-xlY-TVp_0",seat:"_2FLG2LCPXOIJ70n909Qz-Q_0"}},L0Yd:function(t,e){},LC0s:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),a=i.n(o),n=(i("PM1u"),i("vLgD")),s=i("J7Ch"),r=i("Sc1G"),c=(i("7iEP"),i("O3Q9")),l=i("LZDu"),d=i.n(l),u=i("M4fF"),h=i.n(u),m=i("TEao"),p=i("LOoJ"),f=Object(m.a)(i("K80U")),g={components:{BackIcon:s.a},data:function(){return{page:1,diggLists:[],bottomAllLoaded:!1,topAllLoaded:!1,bottomStatus:"",topStatus:"",isWeiXin:TS_WEB.isWeiXin}},methods:{changeUrl:c.a,goTo:c.b,loadTop:function(){var t=this;Object(n.a)().get(Object(n.c)("diggsrank?page=1"),{},{validateStatus:function(t){return 200===t}}).then(function(e){t.page=1;var i=e.data.data;t.diggLists=i,setTimeout(function(){t.$refs.loadMoreLists&&t.$refs.loadMoreLists.onTopLoaded()},800)})},bottomStatusChange:function(t){this.bottomStatus=t},loadBottom:function(){var t=this;Object(n.a)().get(Object(n.c)("diggsrank?page="+(this.page+1)+"&limit=15"),{},{validateStatus:function(t){return 200===t}}).then(function(e){t.page+=1;var i=e.data.data;t.diggLists=[].concat(a()(t.diggLists),a()(i)),i.length<15&&(t.bottomAllLoaded=!0),setTimeout(function(){t.$refs.loadMoreLists&&t.$refs.loadMoreLists.onBottomLoaded()})})}},computed:{formatedList:function(){var t=this,e=this.diggLists;if(!e.length)return[];var i=[];return e.reverse().forEach(function(e){var o={},a=t.$storeLocal.get("user_"+e.user_id);if(h.a.keys(a).length){var n=a.avatar,s=void 0===n?"":n,c=a.name,l=void 0===c?"":c,u=a.bio,m=void 0===u?"还没有简介呢":u;o.name=l,o.avatar=s||d.a,o.bio=m}else Object(p.d)(e.user_id).then(function(t){var e=t.avatar,i=void 0===e?"":e,a=t.name,n=void 0===a?"":a,s=t.bio,r=void 0===s?"还没有简介呢":s;o.bio=r,o.name=n,o.avatar=i||d.a});o.value=Object(r.a)(parseInt(e.value)),o.user_id=e.user_id,i.push(o)}),i},nothing:function(){return this.diggLists.length>0?0:f}},created:function(){var t=this;Object(n.a)().get(Object(n.c)("diggsrank?page="+this.page+"&limit=15"),{},{validateStatus:function(t){return 200===t}}).then(function(e){t.diggLists=e.data.data,t.diggLists.length<15&&(t.bottomAllLoaded=!0),setTimeout(function(){t.$refs.loadMoreLists&&t.$refs.loadMoreLists.onTopLoaded()})})}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Ranking"},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{attrs:{span:"5"}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.goTo(-1)}}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        点赞排行榜\n      ")]),t._v(" "),i("Col",{attrs:{span:"5"}})],1)],1),t._v(" "),i("div",{staticClass:"nothingDefault"},[t.nothing?i("img",{attrs:{src:t.nothing}}):t._e()]),t._v(" "),t.nothing?t._e():i("mt-loadmore",{ref:"loadMoreLists",attrs:{"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.bottomAllLoaded,"top-all-loaded":t.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.bottomStatusChange}},[i("div",{class:t.$style.rankingContent},t._l(t.formatedList,function(e,o){return i("div",{key:o,class:t.$style.ranking},[i("Row",{class:t.$style.rankRow,attrs:{gutter:16}},[i("Col",{class:t.$style.rankAvatar,attrs:{span:"4"}},[i("img",{attrs:{width:"100%;",src:e.avatar,alt:"digg.name"},on:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}}),t._v(" "),i("span",[t._v(t._s(o+1))])]),t._v(" "),i("Col",{attrs:{span:"20"}},[i("h4",{class:t.$style.name,on:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}},[t._v(t._s(e.name))]),t._v(" "),i("div",{class:t.$style.intro},[t._v(t._s(e.bio))]),t._v(" "),i("div",{class:t.$style.gray},[t._v("点赞"),i("span",{class:t.$style.diggCount},[t._v(t._s(e.value))])])])],1)],1)})),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.bottomAllLoaded,expression:"bottomAllLoaded"}]},[t._v("没有更多了")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===t.topStatus}},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[t._v("释放加载更多")])])])],1)},staticRenderFns:[]};var w=i("VU/8")(g,v,!1,function(t){this.$style=i("bAn9"),i("nQbl")},"data-v-b5262f6e",null);e.default=w.exports},LFX2:function(t,e){t.exports={nothing:"_89RxC_PHj-yutFdnWOI_d_0"}},LXLL:function(t,e){},"M+kU":function(t,e,i){"use strict";var o=i("bOdI"),a=i.n(o),n=i("Dd8w"),s=i.n(n),r=i("Sc1G"),c=i("vLgD"),l=i("PM1u"),d=i("O3Q9"),u=i("uq6Z"),h=i("Rgjh"),m=i("JKGc"),p=i("pZXj"),f=i("pr3M"),g=(i("/Vpg"),i("ESSu"),i("M4fF")),v=i.n(g),w=i("LOoJ"),_=(i("ckCO"),{components:{CommentIcon:h.a,ViewIcon:u.a,DiggIcon:m.a,UnDiggIcon:p.a,MoreIcon:f.a},props:["feed","user","openInput","showPopup"],data:function(){return{commentAbout:{body:"",show:!1,placeholder:"随便说说",reply_user:0,loading:!1}}},methods:{changeUrl:d.a,getUserName:function(t){var e=this.users["user_"+t],i=(e=void 0===e?{}:e).name;return void 0===i?"":i},handleCommentInput:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t?(this.$store.dispatch(l.u,function(t){t(e.feed.id)}),this.commentAbout.reply_user=i):(this.$store.dispatch(l.m),this.commentAbout.reply_user=0)},handleShowPopup:function(t){var e=this;t?this.$store.dispatch(l.W,function(t){t({show:!0,feed_id:e.feed.id,me:e.feed.user_id===window.TS_WEB.currentUserId,isCollection:e.feed.has_collect})}):this.$store.dispatch(l.p)},friendnum:function(t){return Object(r.a)(t)},sendDigg:function(){var t=this,e="feeds/"+this.feed.id+"/like",i=this.feed;Object(c.a)().post(Object(c.b)(e),{},{validateStatus:function(t){return 201===t}}).then(function(e){i.has_like=1,i.like_count+=1,t.$store.dispatch(l._6,function(t){t(i)})})},cannelDigg:function(){var t=this,e=this.feed,i="feeds/"+this.feed.id+"/unlike";Object(c.a)().delete(Object(c.b)(i),{validateStatus:function(t){return 204===t}}).then(function(i){e.has_like=0,e.like_count-=1,t.$store.dispatch(l._6,function(t){t(e)})})},sendComment:function(){var t=this;if(this.validComment&&!this.commentAbout.loading){this.commentAbout.loading=!0;var e={body:this.commentAbout.body};this.commentAbout.reply_user&&(e.reply_user=this.commentAbout.reply_user),Object(c.a)().post(Object(c.b)("feeds/"+this.feed.id+"/comments"),e,{validateStatus:function(t){return 201===t}}).then(function(e){var i=e.data,o=(void 0===i?{}:i).comment,a=(t.feed,t.$storeLocal.get("user_"+window.TS_WEB.currentUserId)),n=null;t.commentAbout.reply_user&&(n=t.$storeLocal.get("user_"+t.commentAbout.reply_user));var r={body:o.body,created_at:o.created_at,id:o.id,reply_user:o.reply_user,user_id:o.user_id,reply_to_user:n,user:a,updated_at:o.updated_at};t.body="",t.$store.getters[l.y][t.feed.id].comments=t.$store.getters[l.y][t.feed.id].comments?t.$store.getters[l.y][t.feed.id].comments:[],t.$store.getters[l.y][t.feed.id].comments.unshift(r),t.$store.getters[l.y][t.feed.id].feed_comment_count+=1,t.$store.dispatch(l.N,function(t){t({text:"已发送",time:1500,status:!0})}),t.$store.dispatch(l.m),t.commentAbout=s()({},t.commentAbout,{body:"",show:!1,placeholder:"随便说说",reply_user:0,loading:!1}),t.loading=!1})}},showComfirm:function(t,e,i){var o=this;this.$store.dispatch(l.v,function(a){a({show:!0,confirmContent:"删除评论",data:{comment_id:t,feed_id:e,index:i},confirm:o.deleteComment})})},deleteComment:function(t,e){var i=this;this.feed;Object(c.a)().delete(Object(c.b)("feeds/"+e.feed_id+"/comments/"+e.comment_id),{},{validateStatus:function(t){return 204===t}}).then(function(t){i.$store.getters[l.y][i.feed.id].comments.splice(e.index,1),i.$store.getters[l.y][i.feed.id].feed_comment_count-=1})}},computed:{isDigg:function(){return this.feed.has_like},currentUser:function(){return window.TS_WEB.currentUserId},validComment:function(){return this.commentAbout.body.length>0},commentCount:function(){return this.commentAbout.body.length},commentsData:function(){var t=this.feed.comments;return(void 0===t?[]:t).slice(0,5)},hasMore:function(){return this.feed.feed_comment_count>5},users:function(){return this.$store.getters[l._8]},openInputByVuex:function(){if(this.openInput&&this.commentAbout.reply_user){var t=this.$storeLocal.get("user_"+this.commentAbout.reply_user);this.commentAbout.placeholder="回复: "+t.name}else this.commentAbout.placeholder="随便说说";return this.openInput}},created:function(){var t=this,e={},i=this.feed.comments;(void 0===i?[]:i).forEach(function(i,o){if(i.reply_user){var n,r=t.$storeLocal.get("user_"+i.reply_user);if(r)t.$store.dispatch(l._9,function(t){return t(r)});else e=s()({},e,(n={},a()(n,i.user_id,i.user_id),a()(n,i.reply_user,i.reply_user),n))}var c=t.$storeLocal.get("user_"+i.user_id);c?t.$store.dispatch(l._9,function(t){return t(c)}):e=s()({},e,a()({},i.user_id,i.user_id))});var o=v.a.values(e);Object(w.e)(o)}}),y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.$style.tool},[i("div",{class:t.$style.toolItem},[t.isDigg?i("DiggIcon",{attrs:{width:"21",height:"21",color:"#f4504d"},nativeOn:{click:function(e){t.cannelDigg(e)}}}):i("UnDiggIcon",{attrs:{width:"21",height:"21",color:"#999"},nativeOn:{click:function(e){t.sendDigg(e)}}}),t._v(" "),i("span",{class:t.$style.count},[t._v(t._s(t.friendnum(t.feed.like_count)))])],1),t._v(" "),i("div",{class:t.$style.toolItem,on:{click:function(e){t.handleCommentInput(!0)}}},[i("CommentIcon",{attrs:{width:"21",height:"21",color:"#999"}}),t._v(" "),i("span",{class:t.$style.count},[t._v(t._s(t.friendnum(t.feed.feed_comment_count)))])],1),t._v(" "),i("div",{class:t.$style.toolItem,on:{click:function(e){t.changeUrl("/feed/"+t.feed.id)}}},[i("ViewIcon",{attrs:{width:"21",height:"21",color:"#999"}}),t._v(" "),i("span",{class:t.$style.count},[t._v(t._s(t.friendnum(t.feed.feed_view_count)))])],1),t._v(" "),i("div",{class:t.$style.toolItem,on:{click:function(e){t.handleShowPopup(!0)}}},[i("MoreIcon",{attrs:{width:"21",height:"21",color:"#999"}})],1)]),t._v(" "),t.openInputByVuex?i("ul",{ref:"commentInput",class:t.$style.comment},[i("li",[i("Input",{directives:[{name:"childfocus",rawName:"v-childfocus"}],ref:"commentInput",staticClass:"commentInput",attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},minlength:1,maxlength:255,autofocus:!0,placeholder:t.commentAbout.placeholder},model:{value:t.commentAbout.body,callback:function(e){t.$set(t.commentAbout,"body",e)},expression:"commentAbout.body"}})],1),t._v(" "),i("li",{class:t.$style.commentOperations},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.commentCount>100,expression:"commentCount > 100"}],class:t.$style.commentOperation},[i("span",{class:{inputFull:t.commentCount>100}},[t._v(t._s(t.commentCount))]),t._v("/255\n      ")]),t._v(" "),i("Button",{staticClass:"sendButton",class:t.$style.commentOperation,attrs:{type:"text",size:"small"},nativeOn:{click:function(e){t.handleCommentInput(!1)}}},[t._v("取消")]),t._v(" "),i("Button",{staticClass:"sendButton",class:t.$style.commentOperation,attrs:{type:"primary",disabled:!t.validComment,size:"small"},nativeOn:{click:function(e){t.sendComment()}}},[t._v("\n        发送\n      ")])],1)]):t._e(),t._v(" "),t.commentsData.length?i("div",{staticStyle:{"padding-top":"2wv"}},[i("ul",t._l(t.commentsData,function(e,o){return i("li",{key:e.id},[i("p",[e.user_id?i("router-link",{class:t.$style.userName,attrs:{to:{path:"/users/feeds/"+e.user_id}}},[t._v("\n            "+t._s(t.getUserName(e.user_id))+"\n          ")]):t._e(),t._v(" "),e.reply_user?i("span",{class:t.$style.commentContent},[t._v("\n            回复\n          ")]):t._e(),t._v(" "),e.reply_user?i("router-link",{class:t.$style.userName,attrs:{to:{path:"/users/feeds/"+e.reply_user}}},[t._v("\n            "+t._s(t.getUserName(e.reply_user))+"\n          ")]):t._e(),t._v(" "),e.user_id!=t.currentUser?i("span",{class:t.$style.commentContent,on:{click:function(i){i.stopPropagation(),t.handleCommentInput(!0,e.user_id)}}},[t._v(" \n           : "+t._s(e.body)+"\n          ")]):i("span",{class:t.$style.commentContent,on:{click:function(i){i.stopPropagation(),t.showComfirm(e.id,t.feed.id,o)}}},[t._v(" \n           : "+t._s(e.body)+"\n          ")])],1)])})),t._v(" "),t.hasMore?i("router-link",{class:t.$style.userName,attrs:{to:"/feed/"+t.feed.id+"#comments"}},[t._v("查看全部评论")]):t._e()],1):t._e()])},staticRenderFns:[]};var b=i("VU/8")(_,y,!1,function(t){this.$style=i("cKhj")},null,null);e.a=b.exports},NIE6:function(t,e){},PHmh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),a=i.n(o),n=i("PM1u"),s=i("vLgD"),r=i("O3Q9"),c=i("pWbq"),l=i("J7Ch"),d=i("JKGc"),u=i("TEao"),h=i("DQCr"),m=i.n(h),p=i("M4fF"),f=i.n(p),g=Object(u.a)(i("K80U")),v=(Object(u.a)(i("LZDu")),{components:{BackIcon:l.a,DiggIcon:d.a},data:function(){return{max_id:0,diggs:[],ids:[],bottomAllLoaded:!0,topAllLoaded:!1,bottomStatus:"",topStatus:"",isWeiXin:TS_WEB.isWeiXin,formated:[],limit:20}},methods:{changeUrl:r.a,goTo:r.b,goToSource:function(t,e){var i="";switch(e){case"news":i="/news/"+t+"/detail";break;case"groups":i="";break;case"question-answers":i="/questions/answers/"+t;break;case"feeds":i="/feed/"+t}this.$router.push(i)},loadTop:function(){var t=this,e=this.limit;Object(s.a)().get(Object(s.b)("user/likes"),{params:{limit:e}},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?[]:i,n=o;n.length&&(t.max_id=n[0].id);var s=[],r=o.map(function(t){return t.user_id});t.$store.dispatch("GET_USER_BY_ID",f.a.uniq(r)),n.forEach(function(e){-1==t.ids.findIndex(function(t,i,o){return t==e.id})&&s.push(e)}),t.diggs=[].concat(s,a()(t.diggs)),t._loadFormateDiggs(s),setTimeout(function(){t.$refs.loadmoreDiggs&&t.$refs.loadmoreDiggs.onTopLoaded()},500)})},bottomStatusChange:function(t){this.bottomStatus=t},loadBottom:function(){var t=this,e=this.max_id,i=this.bottomAllLoaded,o=this.limit;i?this.$refs.loadmoreDiggs.onBottomLoaded():Object(s.a)().get(Object(s.b)("user/likes"),{params:{limit:o,max_id:e}},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data,n=void 0===i?[]:i,s=n.length;if(n){var r=n.map(function(t){return t.user_id});t.$store.dispatch("GET_USER_BY_ID",f.a.uniq(r,!0)),t.diggs=[].concat(a()(t.diggs),a()(n)),t._loadFormateDiggs(n,!1),t.bottomAllLoaded=s!==o,t.$refs.loadmoreDiggs&&t.$refs.loadmoreDiggs.onBottomLoaded(),t.max_id=diggs[diggs.length-1].id}})},_loadFormateDiggs:function(t){var e=this;!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach(function(t){if(t.likeable&&-1===f.a.findIndex(e.ids,t.id)){var i=e.$store.getters.getUserById(t.user_id)[0],o={},n=t.likeable,r=(n=void 0===n?{}:n).images,l=void 0===r?[]:r,d=n.feed_content,u=void 0===d?"":d,h=n.body,p=void 0===h?"":h,g=(n.content,i.avatar),v=i.name,w=i.sex;if("question-answers"===t.likeable_type){var _=e.getFile(p);_?o.cover=_:o.source_content=p}else l.length>0?o.cover=m()(Object(s.b)("files/"+l[0].id),{w:100,h:100}):u&&(o.source_content=u);o.likeable_type=t.likeable_type,o.likeable_id=t.likeable_id,o.name=v,o.avatar=g,o.sex=w,o.time=Object(c.a)(t.created_at,8,!1),e.formated=[o].concat(a()(e.formated))}})},getFile:function(t){if(!t)return 0;var e=t.match(/@!\[.*?]\((\d+)\)/);return e?m()(Object(s.b)("files/"+e[1]),{w:100,h:100}):0},_initFormatedDiggs:function(){var t=this;this.diggs.forEach(function(e){var i=t.$store.getters.getUserById(e.user_id)[0],o={},n=e.likeable,r=(n=void 0===n?{}:n).images,l=void 0===r?[]:r,d=n.feed_content,u=void 0===d?"":d,h=n.body,p=void 0===h?"":h,f=(n.content,i.avatar),g=i.name,v=i.sex;if("question-answers"===e.likeable_type){var w=t.getFile(p);w?o.cover=w:o.source_content=p}else l.length>0?o.cover=m()(Object(s.b)("files/"+l[0].id),{w:100,h:100}):u&&(o.source_content=u);o.likeable_type=e.likeable_type,o.likeable_id=e.likeable_id,o.name=g,o.avatar=f,o.sex=v,o.time=Object(c.a)(e.created_at,8,!1),t.formated=[].concat(a()(t.formated),[o])})}},computed:{nothing:function(){return this.diggs.length>0?0:g}},created:function(){var t=this,e=this.limit;this.$store.dispatch(n.j,function(t){t("diggs")}),Object(s.a)().get(Object(s.b)("user/likes"),{params:{limit:e}},{validateStatus:function(t){return 200===t}}).then(function(i){var o=i.data,a=void 0===o?[]:o;t.diggs=a;var n=a.map(function(t){return t.user_id});t.$store.dispatch("GET_USER_BY_ID",f.a.uniq(n,!0));var s=a.length;t.bottomAllLoaded=s!==e,s&&(t.max_id=t.diggs[s-1].id),window.TS_WEB.dataBase.transaction("rw?",window.TS_WEB.dataBase.diggslist,function(){t.diggs.forEach(function(e){t.ids.push(e.id),window.TS_WEB.dataBase.diggslist.where("[user_id+uid]").equals([window.TS_WEB.currentUserId,e.user_id]).delete().then(function(){window.TS_WEB.dataBase.diggslist.put({user_id:window.TS_WEB.currentUserId,uid:e.user_id})}).catch(function(t){console.log(t)})})}),t._initFormatedDiggs()})}}),w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comments"},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{attrs:{span:"5"}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.goTo(-1)}}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        赞过的\n      ")])],1)],1),t._v(" "),t.nothing?i("div",{staticClass:"nothingDefault"},[i("img",{attrs:{src:t.nothing}})]):t._e(),t._v(" "),i("div",{staticClass:"loadMoreContainer"},[t.nothing?t._e():i("mt-loadmore",{ref:"loadmoreDiggs",attrs:{"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.bottomAllLoaded,"top-all-loaded":t.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.bottomStatusChange}},[i("div",{staticClass:"commentContent"},[i("div",{class:t.$style.comments},t._l(t.formated,function(e,o){return i("Row",{key:o,class:t.$style.comment,attrs:{gutter:16}},[i("Col",{staticClass:"avatar-parent-col",attrs:{span:"4"}},[i("user-avatar",{attrs:{src:e.avatar,sex:e.sex,size:"small"},nativeOn:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}})],1),t._v(" "),i("Col",{attrs:{span:"13"}},[i("h4",{on:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}},[t._v(t._s(e.name))]),t._v(" "),i("timeago",{staticStyle:{"font-size":"14px",color:"#999"},attrs:{since:e.time,locale:"zh-CN","auto-update":60}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("DiggIcon",{attrs:{height:"21",width:"21",color:"#f4504d"}})],1),t._v(" "),i("Col",{attrs:{span:"5"}},[i("div",{class:t.$style.sourceContent,on:{click:function(i){t.goToSource(e.likeable_id,e.likeable_type)}}},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.cover,expression:"digg.cover"}],attrs:{src:e.cover}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.cover,expression:"!digg.cover"}],class:t.$style.source},[i("div",{class:t.$style.content},[t._v("\n                    "+t._s(e.source_content)+"\n                  ")])])])])],1)}))]),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===t.topStatus}},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[t._v("释放加载更多")])])])])],1)])},staticRenderFns:[]};var _=i("VU/8")(v,w,!1,function(t){this.$style=i("qqk8"),i("LXLL")},"data-v-eafc3af0",null);e.default=_.exports},SaLK:function(t,e){t.exports={areaSelect:"_3Q0_9O5-wNcz1pIle2klLQ_0",avatar:"_2SJz0PLdvEr9ofihZcfs-E_0",avatarSelect:"_1yhQ0vpx8JHWSYCntkcxPB_0",cropper:"xzMKHK02PE2MMgjt6sYOK_0",userProfile:"_1HCPpmiXKTXaYq8V7G-TQS_0",userProfileAvatar:"_19ZlRb8aszTxXHr9xrMZ4j_0",rowCenter:"_2_4lR6yShU5PyFs4wt6nF5_0",colCenter:"tr0G_1T6JBqosceK8toBS_0",rightIcon:"_1OwsK5VdY8PEspIplyNm6m_0",userProfileSetting:"HEDHmnCIDwHCX4XXVC23k_0",SexPopup:"_2sogkNQtlo_WqCnQwlq2PO_0",sexOptions:"JxurOVOb9K3xnADbuHbji_0",intro:"_1m5ZfErwmg9TPWNDFsjfFZ_0"}},TPFY:function(t,e){},Twgf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Dd8w"),a=i.n(o),n=(i("7iEP"),i("emCR")),s=i("O3Q9"),r={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{attrs:{d:"M6.8,17.2l2.4-1.4L22.8,2.2C22.9,2.1,23,1.9,23,1.7s-0.1-0.3-0.2-0.5c-0.3-0.3-0.7-0.3-1,0L8.3,14.8L6.8,17.2z"}}),this._v(" "),e("path",{attrs:{d:"M22.3,8.3c-0.4,0-0.7,0.3-0.7,0.7v9.3c0,1.9-1.5,3.4-3.4,3.4H5.7c-1.9,0-3.4-1.5-3.4-3.4V5.7c0-1.9,1.5-3.4,3.4-3.4h9.5\n  c0.4,0,0.7-0.3,0.7-0.7c0-0.4-0.3-0.7-0.7-0.7H5v0.1C3,1.4,1.4,3,1.1,5H1V19h0.1c0.3,2.1,1.9,3.7,4,4V23H19v-0.1\n  c2.1-0.3,3.7-1.9,4-4H23v-10C23,8.6,22.7,8.3,22.3,8.3z"}})])])},staticRenderFns:[]},l=i("VU/8")(r,c,!1,null,null,null).exports,d=i("mKzt"),u={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("path",{attrs:{d:"M17.1,20.7C17,20.7,17,20.7,17.1,20.7c-3.5-0.9-6.8-1-10.2,0l0,0c-0.2,0.1-0.3,0.2-0.3,0.4c0,0.3,0.2,0.5,0.5,0.5\nc0.1,0,0.1,0,0.2,0l0,0c1.4-0.4,3-0.7,4.7-0.7c1.8,0,3.4,0.3,4.8,0.7l0,0c0.1,0,0.2,0.1,0.2,0.1c0.3,0,0.5-0.2,0.5-0.5\nC17.5,21,17.4,20.8,17.1,20.7z"}}),this._v(" "),e("path",{attrs:{d:"M19.7,10.8c-2.9-0.2-5.5-1.4-7.3-3.8c-0.1-0.2-0.4-0.3-0.6-0.3s-0.3,0.1-0.4,0.2C9.5,9.3,7,10.5,4,10.8\n  c-0.5,0-0.8,0.5-0.6,1c1,2.2,2,4.4,3,6.7c0.1,0.2,0.3,0.3,0.5,0.3c0.1,0,0.1,0,0.2,0c0,0,0,0,0.1,0c1.6-0.3,3.1-0.5,4.7-0.5\n  c1.4,0,2.8,0.1,4.3,0.4l0,0c0,0,0,0,0.1,0c0.3,0,0.5-0.2,0.5-0.5c0-0.2-0.1-0.3-0.3-0.4l0,0c0,0,0,0,0,0c-0.1,0-0.1,0-0.2,0\n  c0,0,0,0,0,0c-1.4-0.3-2.8-0.4-4.4-0.4c-1.6,0-3.1,0.2-4.7,0.5l-2.7-6.1c3-0.4,5.5-1.7,7.4-3.9c1.7,2.2,4.3,3.6,7.4,3.9l-1.4,2.9\n  l0,0c0,0,0,0.1,0,0.2c0,0.3,0.2,0.5,0.5,0.5c0.2,0,0.4-0.1,0.4-0.3l0,0c0.4-1,1.1-2.1,1.5-3.1C20.5,11.3,20.3,10.8,19.7,10.8z"}}),this._v(" "),e("path",{attrs:{d:"M21.5,7.3c-0.8,0-1.4,0.7-1.4,1.5s0.7,1.4,1.5,1.5c0,0,0,0,0.1,0c0.7,0,1.3-0.6,1.4-1.3c0,0,0-0.1,0-0.2c0-0.1,0-0.1,0-0.2\n  C22.9,7.8,22.3,7.3,21.5,7.3z M21.6,9.6c-0.4,0-0.8-0.4-0.8-0.8c0-0.2,0.1-0.4,0.2-0.5C21.1,8.1,21.3,8,21.5,8l0,0c0,0,0,0,0.1,0\n  c0.4,0,0.8,0.4,0.8,0.8S22,9.6,21.6,9.6z"}}),this._v(" "),e("path",{attrs:{d:"M11.8,2.4c-0.8,0-1.4,0.8-1.4,1.5c0,0.9,0.7,1.5,1.5,1.5c0,0,0,0,0.1,0c0.8,0,1.3-0.7,1.4-1.4c0,0,0-0.1,0-0.2\n  c0-0.1,0-0.1,0-0.2C13.3,3,12.7,2.4,11.8,2.4z M11.9,4.7c-0.4,0-0.8-0.4-0.8-0.8c0,0,0,0,0-0.1l0,0c0-0.3,0.3-0.7,0.7-0.7\n  c0,0,0,0,0.1,0l0,0c0.4,0,0.8,0.4,0.8,0.8S12.3,4.7,11.9,4.7z"}}),this._v(" "),e("path",{attrs:{d:"M2.4,7.2C1.6,7.2,1,7.9,1,8.7s0.7,1.4,1.5,1.5c0,0,0,0,0.1,0c0.7,0,1.3-0.6,1.4-1.3c0,0,0-0.1,0-0.2c0-0.1,0-0.1,0-0.2\n  C3.8,7.8,3.2,7.2,2.4,7.2z M2.5,9.5c-0.4,0-0.8-0.4-0.8-0.8c0-0.4,0.4-0.8,0.8-0.8s0.8,0.4,0.8,0.8S2.9,9.5,2.5,9.5z"}})])},staticRenderFns:[]},m=i("VU/8")(u,h,!1,null,null,null).exports,p={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("g",[e("path",{attrs:{d:"M15.1,7.6c-0.5-0.5-1.4-0.8-2.6-0.8c-0.8,0-1.7,0.1-2.5,0.2l-0.2,0L10,8.2l0.2,0C11.2,8,11.9,8,12.5,8\n    c0.8,0,1.4,0.1,1.7,0.5c0.2,0.2,0.3,0.6,0.3,1c0,0.5-0.4,0.9-0.8,1.4v0l-0.4,0.4c-0.9,1-1.9,2.1-1.9,4.1v0.2h1.2v-0.2\n    c0-1.6,0.9-2.5,1.7-3.4l0,0c0.7-0.7,1.3-1.4,1.4-2.4C15.7,8.7,15.5,8.1,15.1,7.6z"}})]),this._v(" "),e("circle",{attrs:{cx:"10",cy:"7.7",r:"0.6"}}),this._v(" "),e("circle",{attrs:{cx:"12.1",cy:"15.5",r:"0.6"}}),this._v(" "),e("circle",{attrs:{cx:"12",cy:"17.3",r:"0.6"}}),this._v(" "),e("path",{attrs:{d:"M16.1,1.8c0,0,0.1,0,0.1,0C16.2,1.8,16.2,1.8,16.1,1.8z"}}),this._v(" "),e("path",{attrs:{d:"M15.6,2.8c0.1,0.1,0.2,0.1,0.3,0.1c0.3,0,0.6-0.3,0.6-0.6c0-0.2-0.1-0.3-0.2-0.4L15.6,2.8C15.6,2.8,15.6,2.8,15.6,2.8z"}}),this._v(" "),e("path",{attrs:{d:"M15.4,2.3c0,0.2,0.1,0.3,0.2,0.4c0,0,0,0,0,0l0.7-0.9c0,0-0.1,0-0.1-0.1c0,0-0.1,0-0.1,0c0,0-0.1,0-0.2,0\n  C15.7,1.8,15.4,2,15.4,2.3z"}}),this._v(" "),e("path",{attrs:{d:"M20,21c-0.3-0.2-0.5-0.4-0.4-0.8c0.1-0.3,0.2-0.7,0.5-1c0.8-0.9,1.5-2,2.1-3.3c0.5-1.2,0.8-2.6,0.8-4\n  c0-1.5-0.3-2.9-0.8-4.3C21.8,7,21.4,6.3,21,5.6C21,5.7,21,5.8,21,5.9c0,0.3-0.2,0.6-0.6,0.6c-0.2,0-0.3-0.1-0.4-0.2\n  c0.4,0.6,0.8,1.2,1.1,1.9c0.5,1.2,0.8,2.5,0.7,3.8c0,1.3-0.3,2.5-0.8,3.6c-0.5,1.1-1.1,2.1-1.9,2.9c-0.4,0.5-0.7,1-0.8,1.5\n  c-0.1,0.6,0.1,1.1,0.4,1.5c-0.5,0.1-1,0.1-1.6,0.2c-0.8,0.1-1.5,0.1-2,0.1c-0.3,0-0.6,0-0.9,0c-0.3,0-0.5,0-0.8,0\n  c-0.5,0-0.9,0-1.3-0.1c-0.4,0-0.8-0.1-1.1-0.1c-1.3-0.1-2.5-0.5-3.6-1.1c-1.1-0.6-2.1-1.3-2.9-2.2c-0.8-0.9-1.5-1.9-1.9-3\n  c-0.5-1.1-0.7-2.3-0.7-3.6c0-1.4,0.3-2.6,0.8-3.8c0.5-1.2,1.2-2.2,2.1-3.1C6,4,7,3.3,8.2,2.8c1.2-0.5,2.4-0.7,3.7-0.7h0.1\n  c1.3,0,2.5,0.2,3.6,0.7c-0.1-0.1-0.2-0.3-0.2-0.4c0-0.3,0.3-0.6,0.6-0.6c0.1,0,0.1,0,0.2,0c-1.3-0.5-2.6-0.8-4-0.8H12\n  c-1.5,0-2.8,0.3-4.1,0.8C6.5,2.4,5.3,3.2,4.3,4.1c-1,1-1.8,2.1-2.4,3.4C1.3,8.9,1,10.3,1,11.8c0,1.4,0.2,2.8,0.7,4\n  c0.5,1.3,1.2,2.4,2.1,3.4c0.9,1,2,1.8,3.2,2.4c1.2,0.6,2.5,1,4,1.2c0.4,0.1,0.8,0.1,1.2,0.1c0.4,0,0.9,0.1,1.4,0.1\n  c0.3,0,0.5,0,0.8,0c0.3,0,0.6,0,0.9,0c0.6,0,1.3-0.1,2.1-0.1c1.7-0.2,3-0.4,3.9-0.6c0.8-0.3,1.2-0.4,1-0.4\n  C21.4,21.6,20.6,21.4,20,21z"}}),this._v(" "),e("path",{attrs:{d:"M20.7,5.4c-0.1,0-0.2-0.1-0.3-0.1c-0.3,0-0.6,0.2-0.6,0.6c0,0.2,0.1,0.3,0.2,0.4c0,0,0,0,0,0L20.7,5.4z"}}),this._v(" "),e("path",{attrs:{d:"M20.9,5.5c0,0,0.1,0.1,0.1,0.1C20.9,5.6,20.9,5.5,20.9,5.5z"}}),this._v(" "),e("path",{attrs:{d:"M21,5.9c0-0.1,0-0.2-0.1-0.3c0,0-0.1-0.1-0.1-0.1c0,0-0.1-0.1-0.1-0.1l-0.7,0.9c0,0,0,0,0,0c0.1,0.1,0.2,0.2,0.4,0.2\n  C20.8,6.4,21,6.2,21,5.9z"}})])])},staticRenderFns:[]},g=i("VU/8")(p,f,!1,null,null,null).exports,v={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{attrs:{d:"M12,8.3c-2,0-3.7,1.7-3.7,3.7s1.6,3.7,3.7,3.7c0.2,0,0.4,0,0.7-0.1c0.3-0.1,0.5-0.3,0.4-0.6c-0.1-0.3-0.3-0.5-0.6-0.4\nc-0.2,0-0.3,0-0.5,0c-1.4,0-2.6-1.2-2.6-2.7s1.2-2.7,2.6-2.7c1.4,0,2.6,1.2,2.6,2.7c0,0.1,0,0.3,0,0.5c-0.1,0.3,0.1,0.6,0.4,0.6\nc0.3,0.1,0.6-0.1,0.6-0.4c0-0.2,0.1-0.5,0.1-0.7C15.7,10,14,8.3,12,8.3L12,8.3z M22.8,9.9c0-0.2-0.2-0.4-0.4-0.4\nc-1.1-0.3-2.1-1-2.7-2c-0.6-1-0.7-2.2-0.4-3.4c0.1-0.2,0-0.4-0.2-0.6c-1.1-0.9-2.3-1.6-3.6-2.1c-0.2-0.1-0.4,0-0.6,0.1\nC14.3,2.5,13.2,3,12,3S9.7,2.5,8.9,1.6C8.8,1.5,8.6,1.4,8.4,1.5C7.1,1.9,5.9,2.6,4.8,3.6C4.7,3.7,4.6,3.9,4.7,4.1\nC5,5.3,4.9,6.5,4.3,7.5c-0.6,1-1.5,1.7-2.7,2c-0.2,0-0.4,0.2-0.4,0.4C1.1,10.6,1,11.3,1,12s0.1,1.4,0.2,2.1c0,0.2,0.2,0.4,0.4,0.4\nc1.1,0.3,2.1,1,2.7,2c0.6,1,0.7,2.2,0.4,3.4c-0.1,0.2,0,0.4,0.2,0.6c1.1,0.9,2.3,1.6,3.6,2.1c0.1,0,0.1,0,0.2,0\nc0.1,0,0.3-0.1,0.4-0.2C9.7,21.5,10.8,21,12,21s2.3,0.5,3.1,1.4c0.1,0.2,0.4,0.2,0.6,0.1c1.3-0.5,2.5-1.2,3.6-2.1\nc0.2-0.1,0.2-0.4,0.2-0.6c-0.3-1.1-0.2-2.3,0.4-3.4s1.5-1.7,2.7-2c0.2,0,0.4-0.2,0.4-0.4c0.1-0.7,0.2-1.4,0.2-2.1\nC23,11.3,22.9,10.6,22.8,9.9L22.8,9.9z M21.8,13.6c-1.3,0.4-2.4,1.3-3,2.4c-0.7,1.2-0.9,2.5-0.6,3.9c-0.8,0.7-1.7,1.2-2.7,1.6\nc-1-0.9-2.2-1.4-3.6-1.4c-1.3,0-2.6,0.5-3.6,1.4c-1-0.4-1.9-0.9-2.7-1.6c0.3-1.3,0.1-2.7-0.6-3.9c-0.7-1.2-1.8-2-3-2.4\nC2.1,13,2,12.5,2,12c0-0.5,0-1,0.1-1.6C3.4,10,4.5,9.2,5.2,8C5.9,6.9,6,5.5,5.7,4.2C6.6,3.5,7.5,3,8.4,2.6C9.4,3.5,10.7,4,12,4\nc1.3,0,2.6-0.5,3.6-1.4c1,0.4,1.9,0.9,2.7,1.6C18,5.5,18.1,6.9,18.8,8c0.7,1.2,1.8,2,3,2.4C21.9,11,22,11.5,22,12\nC22,12.5,21.9,13,21.8,13.6L21.8,13.6z"}})])])},staticRenderFns:[]},_=i("VU/8")(v,w,!1,null,null,null).exports,y={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{attrs:{d:"M19.4,20.3c0,0.7-0.6,1.3-1.3,1.3H5.9c-0.7,0-1.3-0.6-1.3-1.3V14c0-0.3-0.2-0.5-0.5-0.5l0,0c-0.3,0-0.5,0.2-0.5,0.5v6.3\n  c0,1.4,1.1,2.5,2.5,2.5h12c1.4,0,2.5-1.1,2.5-2.5V14c0-0.3-0.2-0.5-0.5-0.5l0,0c-0.3,0-0.5,0.2-0.5,0.5L19.4,20.3L19.4,20.3z"}}),this._v(" "),e("path",{attrs:{d:"M13.2,1.7c-0.3-0.3-0.7-0.5-1.2-0.5l0,0c-0.4,0-0.8,0.2-1.2,0.5l-9.7,9.7c-0.2,0.2-0.2,0.6,0,0.8l0,0\n  c0.2,0.2,0.6,0.2,0.8,0l9.4-9.5c0.3-0.3,0.4-0.4,0.6-0.4c0.2,0,0.3,0.2,0.6,0.4l9.4,9.5c0.2,0.2,0.6,0.2,0.8,0l0,0\n  c0.2-0.2,0.2-0.6,0-0.8L13.2,1.7z"}})])])},staticRenderFns:[]},C=i("VU/8")(y,b,!1,null,null,null).exports,x=i("Fh+e"),S={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{attrs:{d:"M19.4,1.5H4.6C2.6,1.5,1,3.1,1,5.1v13.8c0,2,1.6,3.6,3.6,3.6h14.8c2,0,3.6-1.6,3.6-3.6v-0.2\n      c0-0.4-0.3-0.6-0.6-0.6c-0.4,0-0.6,0.3-0.6,0.6v0.2c0,1.3-1,2.3-2.3,2.3H4.6c-1.3,0-2.3-1-2.3-2.3V5.1c0-1.3,1-2.3,2.3-2.3h14.8\n      c1.3,0,2.3,1,2.3,2.3v0.2c0,0.4,0.3,0.6,0.6,0.6c0.4,0,0.6-0.3,0.6-0.6V5.1C23,3.1,21.4,1.5,19.4,1.5z"}}),this._v(" "),e("path",{attrs:{d:"M12.4,11.6c-0.1,1.2,0.3,2.3,1.1,3.1c0.8,0.8,1.9,1.3,3,1.3l6.6,0V7.9l-6.5,0C14.4,7.9,12.5,9.5,12.4,11.6z\n       M21.7,14.8h-5.3c-0.8,0-1.5-0.3-2.1-0.9c-0.5-0.6-0.8-1.4-0.7-2.2c0.1-1.4,1.4-2.5,2.9-2.5h5.2V14.8z"}}),this._v(" "),e("circle",{staticClass:"st0",attrs:{cx:"16.5",cy:"12.1",r:"0.8"}})])])},staticRenderFns:[]};var I=i("VU/8")(S,O,!1,function(t){i("F8Tz")},"data-v-5fc932b4",null).exports,$=i("TEao"),k=i("M4fF"),B=i.n(k),j=i("LOoJ"),L=i("NYxO"),A=i("PM1u"),D=i("bcRl"),N={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{attrs:{d:"M22.6,8.6l-2.5-3.9c-0.2-0.3-0.6-0.4-0.8-0.2c-0.3,0.2-0.4,0.6-0.2,0.8l2.5,3.9c0.3,0.4,0.2,1.1-0.1,1.4\n      l-9,9.6c-0.1,0.1-0.3,0.2-0.5,0.2c-0.2,0-0.4-0.1-0.5-0.2l-9-9.6c-0.3-0.4-0.4-1-0.1-1.4l3.1-4.8C5.8,4,6.5,3.6,7.1,3.6h8.3\n      C15.8,3.6,16,3.3,16,3s-0.3-0.6-0.6-0.6H7.1C6.1,2.3,5,3,4.4,3.8L1.4,8.6c-0.6,0.9-0.4,2.2,0.3,2.9l9,9.5c0.4,0.4,0.9,0.6,1.4,0.6\n      c0.5,0,1-0.2,1.4-0.6l9-9.6C23.1,10.7,23.2,9.4,22.6,8.6z"}}),this._v(" "),e("path",{attrs:{d:"M15.6,9.2L12,13.6L8.4,9.2C8.2,8.9,7.8,8.9,7.5,9.1C7.3,9.3,7.2,9.7,7.4,9.9l4.1,5c0.1,0.1,0.3,0.2,0.5,0.2\n      c0,0,0,0,0,0c0.2,0,0.4-0.1,0.5-0.2l4-5c0.2-0.3,0.2-0.6-0.1-0.9C16.2,8.9,15.8,8.9,15.6,9.2z"}})])])},staticRenderFns:[]},E=i("VU/8")(N,T,!1,null,null,null).exports,M=(Object($.a)(i("LZDu")),{components:{ToolBar:n.a,FeedbackIcon:l,ConnectionIcon:d.a,RankingIcon:m,QuestionIcon:g,SystemSettingIcon:_,SapceIcon:C,RightArrowIcon:x.a,WalletIcon:I,AuthIcon:E},data:function(){return{goldName:window.TS_WEB.goldName,userCertification:{},isWeiXin:TS_WEB.isWeiXin,isShowCertification:!1}},methods:{showAmount:D.a,changeUrl:s.a,changeUrlFans:function(t){this.$store.dispatch(A.j,function(t){t("fans")}),Object(s.a)(t)},showCertificationPopup:function(){this.isShowCertification=!0},hideCertificationPopup:function(){this.isShowCertification=!1},handleCertification:function(){var t=this.userCertification;B.a.isEmpty(t)||!B.a.isEmpty(t)&&2==t.status?this.showCertificationPopup():this.changeUrl("/users/certification/show")},selectCertification:function(t){var e=this.userCertification,i=B.a.isEmpty(e)||2!=e.status?0:1;this.changeUrl("/users/certification?type="+t+"&state="+i)}},computed:a()({},Object(L.c)({messageCount:function(t){return t.messageCount.messageCount},mine:function(t){return t.users.mine}}),{following:function(){var t=this.mine.extra,e=void 0===t?{}:t;return e?e.followings_count:0},followed:function(){var t=this.mine.extra,e=void 0===t?{}:t;return e?e.followers_count:0},balance:function(){var t=this.mine.wallet,e=(t=void 0===t?{}:t).balance,i=void 0===e?0:e;return i}}),created:function(){var t=this;Object(j.c)().then(function(e){t.userCertification=e})}}),P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[t.isWeiXin?t._e():i("div",{staticClass:"views-header"},[i("h3",{staticClass:"views-header-title"},[t._v("我")])]),t._v(" "),i("div",{staticClass:"views-content pb",class:{pt:!t.isWeiXin}},[i("div",{staticClass:"simpleInfo",on:{click:function(e){t.changeUrl("/users/setting")}}},[i("Row",{staticClass:"rowCenter",attrs:{gutter:24}},[i("Col",{staticClass:"colCenter",attrs:{span:"6"}},[i("user-avatar",{attrs:{src:t.mine.avatar,sex:t.mine.sex}})],1),t._v(" "),i("Col",{staticClass:"mine-info",attrs:{span:"15"}},[i("h4",[t._v(t._s(t.mine.name))]),t._v(" "),i("p",[t._v(t._s(t.mine.intro||"还没有简介呢"))])]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"3"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"follows"},[i("Row",{attrs:{gutter:24}},[i("div",{staticClass:"followsContent"},[i("Col",{staticStyle:{"border-right":"1px #ededed solid"},attrs:{span:"12"},nativeOn:{click:function(e){t.changeUrlFans("/users/relationship/"+t.mine.id+"/followers")}}},[t.messageCount.fans?i("p",{staticClass:"contentCenterHalf followsNum"},[t._v(t._s(t.followed))]):i("p",{staticClass:"contentCenter followsNum"},[t._v(t._s(t.followed))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.messageCount.fans,expression:"messageCount.fans"}],staticClass:"newFollowsHalf"},[t._v(t._s(t.messageCount.fans))]),t._v(" "),i("p",{staticClass:"contentCenter"},[t._v("粉丝")])]),t._v(" "),i("Col",{attrs:{span:"12"},nativeOn:{click:function(e){t.changeUrl("/users/relationship/"+t.mine.id+"/followings")}}},[i("p",{staticClass:"contentCenter followsNum"},[t._v(t._s(t.following))]),t._v(" "),i("p",{staticClass:"contentCenter"},[t._v("关注")])])],1)])],1),t._v(" "),i("div",{staticClass:"entry"},[i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/users/feeds/"+t.mine.id)}}},[i("Col",{attrs:{span:"3"}},[i("SapceIcon",{attrs:{height:21,width:21,color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"16"}},[t._v("个人主页")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/balance")}}},[i("Col",{attrs:{span:"3"}},[i("WalletIcon",{attrs:{height:21,width:21,color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"5"}},[t._v("钱包")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"16"}},[i("span",{staticClass:"balance"},[t._v(t._s(t.showAmount(t.balance))+" "+t._s(t.goldName))]),t._v(" "),i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/users/collections")}}},[i("Col",{attrs:{span:"3"}},[i("ConnectionIcon",{attrs:{height:21,width:21,color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"16"}},[t._v("收藏")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/users/question-answer")}}},[i("Col",{attrs:{span:"3"}},[i("QuestionIcon",{attrs:{height:21,width:21,color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"16"}},[t._v("我的问答")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"entry"},[i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/users/feedback")}}},[i("Col",{attrs:{span:"3"}},[i("FeedbackIcon",{attrs:{height:21,width:21,color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"16"}},[t._v("意见反馈")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.handleCertification(e)}}},[i("Col",{attrs:{span:"3"}},[i("AuthIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"10"}},[t._v("认证")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"11"}},[t.userCertification&&1==t.userCertification.status?i("span",[t._v("已认证")]):t.userCertification&&0==t.userCertification.status?i("span",[t._v("待审核")]):i("span",[t._v("未认证")]),t._v(" "),i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24},nativeOn:{click:function(e){t.changeUrl("/users/systemSetting")}}},[i("Col",{attrs:{span:"3"}},[i("SystemSettingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"}})],1),t._v(" "),i("Col",{staticClass:"menuText",attrs:{span:"16"}},[t._v("设置")]),t._v(" "),i("Col",{staticClass:"rightIcon",attrs:{span:"5"}},[i("RightArrowIcon",{attrs:{height:"18",width:"18",color:"#999"}})],1)],1)],1)]),t._v(" "),i("ToolBar"),t._v(" "),i("mt-popup",{staticClass:"CertificationPopup",staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.isShowCertification,callback:function(e){t.isShowCertification=e},expression:"isShowCertification"}},[i("Button",{staticClass:"CertificationOptions",attrs:{size:"large",type:"text",long:!0},on:{click:function(e){t.selectCertification("user")}}},[t._v("个人认证")]),t._v(" "),i("Button",{staticClass:"CertificationOptions",attrs:{size:"large",type:"text",long:!0},on:{click:function(e){t.selectCertification("org")}}},[t._v("企业认证")]),t._v(" "),i("Button",{staticClass:"CertificationOptions",attrs:{size:"large",type:"text",long:!0},on:{click:t.hideCertificationPopup}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var F=i("VU/8")(M,P,!1,function(t){i("HSuf"),i("zwfI")},null,null);e.default=F.exports},"Yh7+":function(t,e,i){"use strict";var o=function(){},a=window.AMap;e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.success,i=void 0===e?o:e,n=t.error,s=void 0===n?o:n;if(a){var r=new a.Map("iCenter");r.plugin("AMap.Geolocation",function(){var t=new a.Geolocation({enableHighAccuracy:!0,timeout:2e4,GeoLocationFirst:!0,convert:!0});r.addControl(t),t.getCurrentPosition(),a.event.addListener(t,"complete",i),a.event.addListener(t,"error",function(t){s(function(t){switch(t.code){case t.TIMEOUT:return"获取定位信息超时，请手动选择城市";case t.POSITION_UNAVAILABLE:return"定位失败，当前位置信息不可用，请稍后重试";case t.PERMISSION_DENIED:return"定位失败，系统拒绝了定位请求，请打开GPS定位功能";case t.UNKNOWN_ERROR:return"定位失败，出现未知错误";default:return t}}(t))})})}else s("你的浏览器不支持定位")}},b75W:function(t,e,i){"use strict";var o=i("Gu7T"),a=i.n(o),n=i("lHA8"),s=i.n(n),r=i("c/Tr"),c=i.n(r),l=i("POJD"),d=i("Yga2"),u=i("vLgD"),h={name:"searchPop",props:{lockScroll:{type:Boolean,default:!1},value:{type:Boolean,default:!1},position:{type:String,default:"left"},searchUrl:String,searchList:Object,searchfor:{type:String,required:!0}},components:{Search:l.a,CloseIcon:d.a},data:function(){return{isopen:this.value,keyword:"",dataList:[],topAllLoaded:!1,bottomAllLoaded:!1}},computed:{keywordCount:function(){return this.keyword.length>0}},watch:{value:function(t){this.isopen=t},isopen:function(t){this.$emit("input",t)}},methods:{loadTop:function(){var t=this;this.doSearch(),setTimeout(function(){t.$refs.loadMore.onTopLoaded()},700)},loadBottom:function(){var t=this;this.doSearch(!0),setTimeout(function(){t.$refs.loadMore.onBottomLoaded()},700)},doSearch:function(t){var e=this;if(this.searchUrl&&this.keywordCount){var i={limit:10,offset:t?this.dataList.length:0};this.$storeLocal.set("search_"+this.searchfor,this.keyword),u.e.get(Object(u.b)(this.searchUrl+this.keyword),{params:i}).then(function(o){var n=o.data,r=void 0===n?[]:n;e.bottomAllLoaded=r.length<i.limit,e.dataList=t?c()(new s.a([].concat(a()(e.dataList),a()(r)))):[].concat(a()(r))}).catch(function(t){console.log(t)})}},cleanKeyword:function(){this.keyword="",this.dataList=[]},closeSearch:function(){this.isopen=!1,this.cleanKeyword(),this.$storeLocal.remove("search_"+this.searchfor)}},created:function(){this.keyword=this.$storeLocal.get("search_"+this.searchfor)||"",this.keyword&&this.doSearch()}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mt-popup",{class:t.$style.searchPop,attrs:{position:t.position,modal:!1,lockScroll:t.lockScroll},model:{value:t.isopen,callback:function(e){t.isopen=e},expression:"isopen"}},[t._t("header",[i("header",{class:t.$style.searchHeader},[i("Row",{attrs:{gutter:12}},[i("Col",{staticStyle:{positoin:"relative"},attrs:{span:"20"}},[i("Input",{class:t.$style.plr20,attrs:{placeholder:"搜索",autofocus:!0},on:{"on-enter":function(e){t.doSearch()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),i("Search",{staticStyle:{position:"absolute",top:"50%",left:"15px","margin-top":"-10px"},attrs:{height:"20",width:"20",color:"#999"}}),t._v(" "),t.keywordCount?i("CloseIcon",{staticStyle:{position:"absolute",top:"13px",right:"15px"},attrs:{height:"20",width:"20",color:"#999"},nativeOn:{click:function(e){t.cleanKeyword()}}}):t._e()],1),t._v(" "),i("Col",{staticStyle:{color:"#59b6d7","text-align":"center"},attrs:{span:"4"},nativeOn:{click:function(e){t.closeSearch(e)}}},[t._v("取消")])],1)],1)]),t._v(" "),i("div",{class:t.$style.searchContent},[t._t("default",[i("mt-loadmore",{ref:"loadMore",attrs:{bottomDistance:70,"top-method":t.loadTop,"bottom-method":t.loadBottom,"top-all-loaded":t.topAllLoaded,"bottom-all-loaded":t.bottomAllLoaded,autoFill:!1,bottomPullText:"上拉加载更多",bottomDropText:"释放加载更多"}},[i(t.searchList,{tag:"component",attrs:{datas:t.dataList,keyword:t.keyword},on:{closeSearch:t.closeSearch}})],1)],{keyword:t.keyword,datas:t.dataList})],2)],2)},staticRenderFns:[]};var p=i("VU/8")(h,m,!1,function(t){this.$style=i("uhbi")},null,null);e.a=p.exports},bAn9:function(t,e){t.exports={rankingContent:"_1DY7hX1F2_ossu2CF-wNEY_0",ranking:"_26cW8-SBlRBj0XDPPQ0ftQ_0",rankRow:"_2c8ei_Kxg5NE-CmZqzY97o_0",rankAvatar:"_2n-c7Eaf0ZLt6eDTVpYxLs_0",name:"_5imYi6WTQjaqmSFbSmiPM_0",intro:"eUpPMrpuDSjJyFw-IzC8e_0",gray:"_1EHkI4zteSoZ6oli48P1Fi_0",diggCount:"XK4k6CramXrPRJjvU84Ep_0"}},cKhj:function(t,e){t.exports={tool:"xEiv5fknPX9OO_nXkNrTt_0",toolItem:"_2eHVl03r3Bo-0fgMkHcAgK_0",count:"_2bR_23fVtlmQ-HfafaNGWz_0",comment:"_3IL-K5DnweP1jTZ-eXVh0l_0",commentOperations:"_1SA_V9kh_BCjU27iMkPW7V_0",commentOperation:"_2Y79HDsUzePveQO7MHzndl_0",userName:"_2tdzLdCh5KOHEQ5HbTdYuo_0",commentContent:"_1orbqDrRk43hT50JnlJWQa_0"}},dJyA:function(t,e){t.exports={navBar:"_2hl__yhiYPxDXyPmiHYgmC_0",userCover:"f8aueUOZJXbHRg_zPBgcE_0",coverImg:"_1hsxnjexftsYh-FTclPHBw_0",nothingDefault:"_2GQJkGK7B4W-0BtaZepNzR_0",userProfile:"_1QkrzQz3ZrjQrZPxSU6F_B_0",avatar:"kILl7qseXbk-wczgXTew7_0",name:"_3E65CpjIP3B0yauY9JpGBZ_0",intro:"_1SNJr6QUkXFI4RpXt1-PCW_0",follows:"_12gKXOh2IhrG9cov_8O6_h_0",followed:"_1RP3etuY4TQlLmccq8Yurp_0",following:"_3xn2zdHKUKQO0VSTEZCALA_0",counts:"_3V_EZa3KgdruN_oEJfApRD_0",followStatus:"_14XINdN1JphMwvw1yiMUXR_0",avatarSelect:"_3k0-FfJQGYX037am7Hn_Aa_0",cropper:"_16zz__JoxzwrVtLTD6nv8u_0"}},iStK:function(t,e){},iTqn:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var o=i("Dd8w"),a=(i.n(o),i("//Fk"));i.n(a),i("vLgD"),i("PM1u"),i("lI34");function n(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],o=new window.ArrayBuffer(e.length),a=new window.Uint8Array(o),n=0;n<e.length;n++)a[n]=e.charCodeAt(n);return new window.Blob([o],{type:i})}},jE7p:function(t,e){t.exports={FeedImages:"_1Z8JkeSoN1c26eYzdnizfM_1",imagesRow:"_2EedTpkWAQn3CV2QNr7lVg_1",imgParent:"_3mEM5fD8H08107RObqkYka_1",showImgBox:"_3GotfkTXWkpH9DP54Nk-cz_1",perFeedImg:"_2GLYLNx0Y-I3Hq6-_qQ_2Q_1"}},jiR2:function(t,e){},"lY/U":function(t,e){t.exports={diggAvatar:"_1E1OaTnVkLkap-Hjv4R9ma_1"}},mCIm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),a=i.n(o),n=i("Dd8w"),s=i.n(n),r=i("PM1u"),c=i("vLgD"),l=(i("7iEP"),i("O3Q9")),d=i("pWbq"),u=i("J7Ch"),h=i("M4fF"),m=i.n(h),p=(i("LOoJ"),i("TEao")),f=i("DQCr"),g=i.n(f),v=Object(p.a)(i("C+N6")),w=(Object(p.a)(i("LZDu")),{components:{BackIcon:u.a},data:function(){return{max_id:0,comments:[],ids:[],bottomAllLoaded:!0,topAllLoaded:!1,bottomStatus:"",topStatus:"",isWeiXin:TS_WEB.isWeiXin,formated:[],openId:-1,commentsContent:"",placeholder:"",commentLoading:!1,limit:20}},methods:{sendComment:function(){var t=this;if(this.commentCount&&!this.loading){this.loading=!0;var e=this.comments[this.openId],i="feeds/"+e.commentable_id+"/comments";"news"===e.commentable_type?i="news/"+e.commentable_id+"/comment":"questions"===e.commentable_type?i="questions/"+e.commentable_id+"/comments":"question-answers"===e.commentable_type&&(i="question-answers/"+e.commentable_id+"/comments");var o={body:this.commentsContent};e.user_id&&(o.reply_user=e.user_id),Object(c.a)().post(Object(c.b)(""+i),o,{validateStatus:function(t){return 201===t}}).then(function(){t.commentsContent="",t.loading=!1,t.closeCommentBox(),t.$Message.success("评论成功")}).catch(function(e){var i=e.response,o=(i=void 0===i?{}:i).data;t.$Message.error(t.$MessageBundle(o).getMessage())})}},openCommentBox:function(t,e,i,o){this.openId=t,this.placeholder="回复: "+o},closeCommentBox:function(){this.openId=-1,this.commentsContent="",this.placeholder=""},changeUrl:l.a,goTo:l.b,loadTop:function(){var t=this,e=this.limit;Object(c.a)().get(Object(c.b)("user/comments"),{params:{limit:e}},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?[]:i,a=o,n=[],s=o.map(function(t){return[t.user_id,t.target_user,t.reply_user]});t.$store.dispatch("GET_USER_BY_ID",s),a.forEach(function(e){-1==t.ids.findIndex(function(t,i,o){return t==e.id})&&n.push(e)}),t._loadTopFormatedComments(n),setTimeout(function(){t.$refs.loadmoreComments&&t.$refs.loadmoreComments.onTopLoaded()},500)})},bottomStatusChange:function(t){this.bottomStatus=t},loadBottom:function(){var t=this,e=this.limit,i=this.bottomAllLoaded,o=this.max_id;i?this.$refs.loadmoreComments.onBottomLoaded():o&&Object(c.a)().get(Object(c.b)("user/comments"),{params:{limit:e,after:o}},{validateStatus:function(t){return 200===t}}).then(function(i){var o=i.data,a=void 0===o?[]:o,n=a,s=a.map(function(t){return[t.user_id,t.target_user,t.reply_user]});t.$store.dispatch("GET_USER_BY_ID",s);var r=n.length;t.bottomAllLoaded=r!==e,t.max_id=n[r-1].id,t.$refs.loadmoreComments&&t.$refs.loadmoreComments.onBottomLoaded(),t._loadTopFormatedComments(n,!1)})},getFile:function(t){if(!t)return 0;var e=t.match(/@!\[.*?]\((\d+)\)/);return e?g()(Object(c.b)("files/"+e[1]),{w:100,h:100}):0},_initFormatedComments:function(){var t=this,e={};this.comments.forEach(function(i){if(i.commentable){var o=t.$store.getters.getUserById(i.user_id)[0],n=i.commentable,r=(n=void 0===n?{}:n).images,l=void 0===r?[]:r,u=n.body,h=void 0===u?"":u,p=n.subject,f=void 0===p?"":p,v=n.feed_content,w=void 0===v?"":v,_=n.content,y=void 0===_?"":_;if(i.reply_user){var b=t.$store.getters.getUserById(i.reply_user)[0];e.replyUser=s()({},b)}var C=o.name,x=void 0===C?"":C;if("questions"==i.commentable_type||"question-answers"==i.commentable_type){var S=t.getFile(h);console.log(S),S?e.cover=S:e.source_content="questions"==i.commentable_type?f:"回答回答"}else l.length>0?e.cover=g()(Object(c.b)("files/"+l[0].id),{w:100,h:100}):(y||w)&&(e.source_content=y||w);e.user_id=i.user_id,e.commentable_id=i.commentable_id,e.body=i.body,e.id=i.id,e.name=x,e.avatar=i.avatar,e.commentable=i.commentable_type,e.time=Object(d.a)(i.created_at,8,!1),t.formated=m.a.uniq([].concat(a()(t.formated),[e]),"id"),e={}}})},_loadTopFormatedComments:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o={};e.forEach(function(e){if(e.commentable&&-1===m.a.findIndex(t.formated,{id:e.id})){var n=e.commentable,r=(n=void 0===n?{}:n).images,l=void 0===r?[]:r,u=n.body,h=void 0===u?"":u,p=n.subject,f=void 0===p?"":p,v=n.feed_content,w=void 0===v?"":v,_=n.content,y=void 0===_?"":_,b=t.$store.getters.getUserById(e.user_id)[0];if(e.reply_user){var C=t.$store.getters.getUserById(e.reply_user)[0];o.replyUser=s()({},C)}var x=b.name,S=void 0===x?"":x;if("questions"==e.commentable_type||"question-answers"==e.commentable_type){var O=t.getFile(h);O?o.cover=O:o.source_content="questions"==e.commentable_type?f:"回答回答"}else l.length>0?o.cover=g()(Object(c.b)("files/"+l[0].id),{w:100,h:100}):(y||w)&&(o.source_content=y||w);o.user_id=e.user_id,o.commentable_id=e.commentable_id,o.body=e.body,o.name=S,o.commentable=e.commentable_type,o.avatar=e.avatar,o.time=Object(d.a)(e.created_at,8,!1),t.formated=i?[o].concat(a()(t.formated)):[].concat(a()(t.formated),[o]),o={}}})}},computed:{nothing:function(){return this.comments.length>0?0:v},commentCount:function(){return this.commentsContent.length>0}},created:function(){var t=this,e=this.limit;this.$store.dispatch(r.j,function(t){t("comments")}),Object(c.a)().get(Object(c.b)("user/comments"),{params:{limit:e}},{validateStatus:function(t){return 200===t}}).then(function(i){var o=i.data,a=void 0===o?[]:o;t.comments=a;var n=a.length,s=a.map(function(t){return m.a.compact([t.user_id,t.target_user,t.reply_user])});t.$store.dispatch("GET_USER_BY_ID",m.a.uniq(m.a.flatten(s,!0))),window.TS_WEB.dataBase.transaction("rw?",window.TS_WEB.dataBase.commentslist,function(){t.comments.forEach(function(e){t.ids.push(e.id),window.TS_WEB.dataBase.commentslist.where("[user_id+uid]").equals([window.TS_WEB.currentUserId,e.user_id]).delete().then(function(){window.TS_WEB.dataBase.commentslist.put({user_id:window.TS_WEB.currentUserId,uid:e.user_id})}).catch(function(t){console.log(t)})})}),t.bottomAllLoaded=n!==e,n&&(t.max_id=t.comments[n-1].id),t._initFormatedComments()})}}),_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comments"},[t.isWeiXin?t._e():i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{attrs:{span:"5"}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.goTo(-1)}}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        评论\n      ")])],1)],1),t._v(" "),t.nothing?i("div",{staticClass:"nothingDefault"},[i("img",{attrs:{src:t.nothing}})]):t._e(),t._v(" "),i("div",{staticClass:"loadMoreContainer"},[t.nothing?t._e():i("mt-loadmore",{ref:"loadmoreComments",attrs:{"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.bottomAllLoaded,"top-all-loaded":t.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.bottomStatusChange}},[i("section",{staticClass:"commentContent"},[i("ul",{class:t.$style.comments},t._l(t.formated,function(e,o){return i("li",{key:o,class:t.$style.comment},[i("div",{class:t.$style.commentContent},[i("div",{staticClass:"avatar-parent-col",staticStyle:{width:"16vw"}},[i("user-avatar",{attrs:{src:e.avatar,sex:e.sex,size:"small"},nativeOn:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}})],1),t._v(" "),i("div",{staticStyle:{width:"68vw",padding:"0 12px"},attrs:{span:"16"}},[i("h4",{on:{click:function(i){t.changeUrl("/users/feeds/"+e.user_id)}}},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"gray-color"},[e.replyUser?i("span",[t._v("回复")]):t._e(),t._v(" "),e.replyUser?i("span",{staticClass:"primary-color",staticStyle:{padding:"0 4px"},on:{click:function(i){t.changeUrl("/users/feeds/"+e.replyUser.user_id)}}},[t._v(t._s(e.replyUser.name)+": ")]):t._e(),t._v("\n                  "+t._s(e.body)+"\n                ")]),t._v(" "),i("timeago",{staticStyle:{"font-size":"14px",color:"#999"},attrs:{since:e.time,locale:"zh-CN","auto-update":60}})],1),t._v(" "),i("div",{staticStyle:{width:"16vw"}},[i("div",{class:t.$style.sourceContent},[e.cover?i("img",{attrs:{src:e.cover},on:{click:function(i){t.openCommentBox(o,e.commentable,e.commentable_id,e.name)}}}):t._e(),t._v(" "),e.cover?t._e():i("div",{class:t.$style.source,on:{click:function(i){t.openCommentBox(o,e.commentable,e.commentable_id,e.name)}}},[i("div",{class:t.$style.content},[t._v("\n                      "+t._s(e.source_content)+"\n                    ")])])])])]),t._v(" "),t.openId===o?i("section",{ref:"commentInput",refInFor:!0,class:t.$style.commentBox,staticStyle:{width:"100%"}},[i("li",[i("Input",{directives:[{name:"childfocus",rawName:"v-childfocus"}],ref:"commentInput",refInFor:!0,staticClass:"commentInput",attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},minlength:1,maxlength:255,autofocus:!0,placeholder:t.placeholder},model:{value:t.commentsContent,callback:function(e){t.commentsContent=e},expression:"commentsContent"}})],1),t._v(" "),i("li",{class:t.$style.commentOperations},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.commentCount>100,expression:"commentCount > 100"}],class:t.$style.commentOperation},[i("span",{class:{inputFull:t.commentCount>100}},[t._v(t._s(t.commentCount))]),t._v("/255\n                ")]),t._v(" "),i("Button",{staticClass:"sendButton",class:t.$style.commentOperation,attrs:{type:"text",size:"small"},nativeOn:{click:function(e){t.closeCommentBox()}}},[t._v("取消")]),t._v(" "),i("Button",{staticClass:"sendButton",class:t.$style.commentOperation,attrs:{type:"primary",disabled:!t.commentCount,size:"small"},nativeOn:{click:function(e){t.sendComment()}}},[t._v("\n                  发送\n                ")])],1)]):t._e()])}))]),t._v(" "),i("section",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===t.topStatus}},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'loading' && !bottomAllLoaded"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[t._v("释放加载更多")])])])])],1)])},staticRenderFns:[]};var y=i("VU/8")(w,_,!1,function(t){this.$style=i("FN6l"),i("iStK")},"data-v-6eb7dfb9",null);e.default=y.exports},nQbl:function(t,e){},qqk8:function(t,e){t.exports={comments:"_3xLrmhmeimMJ49HZn7I8J1_0",comment:"_1pHbV5EgQaOPcDTyZW4Xlf_0",sourceContent:"PVXXdv2GljyLeAJwhSjQm_0",source:"_1K9SeMkRVYvuq5E4VwBJ-o_0",content:"_2zIJup8d9Xx29HD7tHrF4n_0"}},rxk0:function(t,e){t.exports={detail:"_2jrPJwrBUY92ncyXdHCNlx_0",userFeed:"_2uQml0AuIuiqH5LSI37hX-_0",toolTop:"mP3egpUBZfS5Pcvl4k4Z-_0",usernameLine:"_3PitW4r5U1qXvjkp0c11ZL_0",username:"YKumQ-BYNh0-ljOYLxvQM_0",content:"_5rvSliyTVcgksXFSob01z_0",timer:"_2j9KUz34aLv1M1HkGziRpa_0"}},sLRm:function(t,e){},sOR5:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},sRoY:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(i("7+uW")),a=n(i("4RJ8"));function n(t){return t&&t.__esModule?t:{default:t}}i("5Qkr");var s=o.default.extend({render:function(t){return t("div",{style:this.containerStyle},[t("img",{ref:"img",attrs:{src:this.src,alt:this.alt||"image",style:"max-width: 100%"},style:this.imgStyle})])},props:{containerStyle:Object,src:{type:String,default:""},alt:String,imgStyle:Object,viewMode:Number,dragMode:String,aspectRatio:Number,data:Object,preview:String,responsive:{type:Boolean,default:!0},restore:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},guides:{type:Boolean,default:!0},center:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},background:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!0},autoCropArea:Number,movable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},zoomable:{type:Boolean,default:!0},zoomOnTouch:{type:Boolean,default:!0},zoomOnWheel:{type:Boolean,default:!0},wheelZoomRatio:Number,cropBoxMovable:{type:Boolean,default:!0},cropBoxResizable:{type:Boolean,default:!0},toggleDragModeOnDblclick:{type:Boolean,default:!0},minCanvasWidth:Number,minCanvasHeight:Number,minCropBoxWidth:Number,minCropBoxHeight:Number,minContainerWidth:Number,minContainerHeight:Number,ready:Function,cropstart:Function,cropmove:Function,cropend:Function,crop:Function,zoom:Function},mounted:function(){var t=this.$options.props,e=(t.containerStyle,t.src,t.alt,t.imgStyle,function(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i}(t,["containerStyle","src","alt","imgStyle"])),i={};for(var o in e)void 0!==this[o]&&(i[o]=this[o]);this.cropper=new a.default(this.$refs.img,i)},methods:{reset:function(){return this.cropper.reset()},clear:function(){return this.cropper.clear()},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.cropper.replace(t,e)},enable:function(){return this.cropper.enable()},disable:function(){return this.cropper.disable()},destroy:function(){return this.cropper.destroy()},move:function(t,e){return this.cropper.move(t,e)},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.cropper.moveTo(t,e)},relativeZoom:function(t,e){return this.cropper.zoom(t,e)},zoomTo:function(t,e){return this.cropper.zoomTo(t,e)},rotate:function(t){return this.cropper.rotate(t)},rotateTo:function(t){return this.cropper.rotateTo(t)},scaleX:function(t){return this.cropper.scaleX(t)},scaleY:function(t){return this.cropper.scaleY(t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.cropper.scale(t,e)},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cropper.getData(t)},setData:function(t){return this.cropper.setData(t)},getContainerData:function(){return this.cropper.getContainerData()},getImageData:function(){return this.cropper.getImageData()},getCanvasData:function(){return this.cropper.getCanvasData()},setCanvasData:function(t){return this.cropper.setCanvasData(t)},getCropBoxData:function(){return this.cropper.getCropBoxData()},setCropBoxData:function(t){return this.cropper.setCropBoxData(t)},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cropper.getCroppedCanvas(t)},setAspectRatio:function(t){return this.cropper.setAspectRatio(t)},setDragMode:function(t){return this.cropper.setDragMode(t)}}}),r=o.default.component("vue-cropper",s);e.default=r},tXhK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Gu7T"),a=i.n(o),n=i("PM1u"),s=i("vLgD"),r=i("J7Ch"),c=i("ja0y"),l=i("UeNn"),d=i("gvlw"),u=i("O3Q9"),h=i("3TlD"),m=i("7iEP"),p=i("M4fF"),f=i.n(p),g=i("TEao"),v=i("LOoJ"),w=Object(g.a)(i("LZDu")),_=Object(g.a)(i("K80U")),y={components:{BackIcon:r.a,FollowingIcon:c.a,UnFollowingIcon:l.a,EachFollowingIcon:d.a},data:function(){return{type:"",user_id:0,followings:[],followers:[],dataList:[],currentUser:0,bottomAllLoaded:!1,topAllLoaded:!1,bottomStatus:"",isShowComfirm:!1,topStatus:"",max_id:0,loading:!1}},methods:{goTo:u.b,changeUrl:u.a,followersBottomStatusChange:function(t){this.bottomStatus=t},followingsBottomStatusChange:function(t){this.bottomStatus=t},loadBottom:function(){var t=this;if(!this.loading){this.loading=!0;var e="";this.bottomAllLoaded=!0,"followers"==this.type?(e="users/"+this.user_id+"/followings?limit=15&after="+this.max_id,"followeds"):(e="users/"+this.user_id+"/followers?limit=15&after="+this.max_id,"follows"),Object(s.a)().get(Object(s.b)(e),{},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?[]:i;!o.length>0?t.$refs["loadmore"+t.type]&&setTimeout(function(){t.$refs["loadmore"+t.type].onBottomLoaded()},800):(t[t.type]=f.a.uniqBy([].concat(a()(t[t.type]),a()(o)),"id"),t.max_id=o[o.length-1].id,t.$refs["loadmore"+t.type]&&setTimeout(function(){t.$refs["loadmore"+t.type].onBottomLoaded(),t.loading=!1},800))})}},loadTop:function(){var t=this,e="";"followers"==this.type?e="users/"+this.user_id+"\followers":e="users/"+this.user_id+"/followings",Object(s.a)().get(Object(s.b)(e+"?limit=15"),{},{validateStatus:function(t){return 200===t}}).then(function(e){var i=e.data,o=void 0===i?[]:i;t[t.type]=f.a.uniqBy([].concat(a()(t[t.type]),a()(o)),"id")}),this.$refs["loadmore"+this.type]&&setTimeout(function(){t.$refs["loadmore"+t.type].onTopLoaded()},900)},doFollowing:function(t,e,i){var o=this;Object(v.a)(t).then(function(t){if(t){var a=o[i],s="followers"===i?o.followings:o.followers,r=o.followers[e];a[e].follower=!0,r.following=!0,r.follower=!0,s.unshift(r),o[i]=f.a.cloneDeep(a)}else o.$store.dispatch(n.N,function(e){e({text:t.message,time:1500,status:!0})})})},doUnFollowing:function(t,e,i){var o=this;Object(v.f)(t).then(function(e){if(e){var a=o[i],n="followers"===i?o.followings:o.followers;if("followings"==i){var s=a.findIndex(function(e){return e.id==t});a.splice(s,1)}else{"followers"===i?a[r].following=!1:a[r].follower=!1;var r=n.findIndex(function(e){return e.id==t});-1!==r&&("followers"===i?n[r].following=!1:n[r].follower=!1)}o[i]=f.a.cloneDeep(a)}}).catch(function(t){console.log(t)})},getData:function(t){var e=this;this.loading=!0;var i="";this.max_id=0,this.bottomAllLoaded=!0,this.bottomStatus="pull",i="followers"==(t=t||this.type)?"users/"+this.user_id+"/followers":"users/"+this.user_id+"/followings",Object(s.a)().get(Object(s.b)(i),{},{validateStatus:function(t){return 200===t}}).then(function(i){var o=i.data,n=void 0===o?[]:o;!n.length>0?setTimeout(function(){e.loading=!1},800):(!n.length<15&&(e.bottomAllLoaded=!0),e[t]=[],e[t]=[].concat(a()(n)),e.max_id=n[n.length-1].id,setTimeout(function(){e.loading=!1},800))})}},computed:{nothing:function(){return f.a.keys(this.formateList).length>0?0:_},formateList:function(){return this[this.type].map(function(t){return t.bio=t.bio||"还没有简介",t.avatar=t.avatar||w,t})}},created:function(){var t=this.$route.params.status,e=this.$route.params.user_id;e&&Object(h.a)(["followers","followings"],t)||(this.$store.dispatch(n.N,function(t){t({show:!0,status:!1,text:"参数错误",time:1500})}),setTimeout(function(){Object(u.b)(-1)},1500)),this.type=t,this.user_id=e;var i=m.a.getLocalItem("UserLoginInfo");this.currentUser=i.user_id,this.getData(t)}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relationship"},[i("BackIcon",{staticStyle:{"z-index":"4",position:"fixed",left:"12px",top:"12px"},attrs:{width:"21",height:"21",color:"#999"},nativeOn:{click:function(e){t.goTo(-1)}}}),t._v(" "),i("Tabs",{on:{"on-click":t.getData},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[i("Tab-pane",{attrs:{label:"粉丝",name:"followers"}},[t.nothing||"followers"!==t.type?t._e():i("mt-loadmore",{ref:"loadmorefollowers",staticClass:"followers",attrs:{"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.bottomAllLoaded,"top-all-loaded":t.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.followersBottomStatusChange}},[t._l(t.formateList,function(e,o){return i("Row",{key:o,attrs:{gutter:24,"class-name":"list"}},[i("Col",{attrs:{span:"4"},nativeOn:{click:function(i){t.changeUrl("/users/feeds/"+e.id)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"user.avatar"}],class:t.$style.diggAvatar,attrs:{alt:e.name,title:e.name}})]),t._v(" "),i("Col",{attrs:{span:"16"}},[i("h4",{on:{click:function(i){t.changeUrl("/users/feeds/"+e.id)}}},[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v(t._s(e.bio))])]),t._v(" "),t.currentUser==t.user_id?i("Col",{staticClass:"header-end-col",attrs:{span:"4"}},[e.follower||t.currentUser==e.id?t._e():i("UnFollowingIcon",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(i){t.doFollowing(e.id,o,"followers")}}}),t._v(" "),!e.following&&e.follower&&t.currentUser!=e.id?i("FollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"},nativeOn:{click:function(i){t.doUnFollowing(e.id,o,"followers")}}}):t._e(),t._v(" "),e.following&&e.follower&&t.currentUser!=e.id?i("EachFollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"},nativeOn:{click:function(i){t.doUnFollowing(e.id,o,"followers")}}}):t._e()],1):t._e()],1)}),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===t.topStatus}},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[t._v("释放加载更多")])])])],2),t._v(" "),i("div",{staticClass:"nothingDefault"},[t.nothing?i("img",{attrs:{src:t.nothing}}):t._e()])],1),t._v(" "),i("Tab-pane",{attrs:{label:"关注",name:"followings"}},[t.nothing||"followings"!==t.type?t._e():i("mt-loadmore",{ref:"loadmorefollowings",staticClass:"followings",attrs:{"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.bottomAllLoaded,"top-all-loaded":t.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":t.followingsBottomStatusChange}},[t._l(t.formateList,function(e,o){return i("Row",{key:o,attrs:{gutter:24,"class-name":"list"}},[i("Col",{attrs:{span:"4"},nativeOn:{click:function(i){t.changeUrl("/users/feeds/"+e.id)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"user.avatar"}],class:t.$style.diggAvatar,attrs:{alt:e.name,title:e.name}})]),t._v(" "),i("Col",{attrs:{span:"16"}},[i("h4",{on:{click:function(i){t.changeUrl("/users/feeds/"+e.id)}}},[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v(t._s(e.bio))])]),t._v(" "),t.currentUser==t.user_id?i("Col",{staticClass:"header-end-col",attrs:{span:"4"}},[e.follower||t.currentUser==e.id?t._e():i("UnFollowingIcon",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(i){t.doFollowing(e.id,o,"followings")}}}),t._v(" "),!e.following&&e.follower&&t.currentUser!=e.id?i("FollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"},nativeOn:{click:function(i){t.doUnFollowing(e.id,o,"followings")}}}):t._e(),t._v(" "),e.following&&e.follower&&t.currentUser!=e.id?i("EachFollowingIcon",{attrs:{height:"21",width:"21",color:"#59b6d7"},nativeOn:{click:function(i){t.doUnFollowing(e.id,o,"followings")}}}):t._e()],1):t._e()],1)}),t._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[t.bottomAllLoaded?i("span",[t._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===t.topStatus}},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'loading' && !bottomAllLoaded"}]},[t._v("加载中...")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.bottomStatus&&!t.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[t._v("释放加载更多")])])])],2),t._v(" "),i("div",{staticClass:"nothingDefault"},[t.nothing?i("img",{attrs:{src:t.nothing}}):t._e()])],1)],1)],1)},staticRenderFns:[]};var C=i("VU/8")(y,b,!1,function(t){i("jiR2"),this.$style=i("lY/U")},null,null);e.default=C.exports},tpiV:function(t,e){},uWHh:function(t,e,i){"use strict";var o=i("Gu7T"),a=i.n(o),n=i("d7EF"),s=i.n(n),r={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width}},[e("g",[e("path",{staticClass:"st8",attrs:{d:"M13.6,23L23,1L1,10.4l10.7,1.9L13.6,23z M13.6,23"}})]),this._v(" "),e("g",[e("path",{staticClass:"st9",attrs:{d:"M12,12L23,1L1,10.4l10.7,1.9L12,12z"}})])])},staticRenderFns:[]};var l=i("VU/8")(r,c,!1,function(t){i("NIE6")},"data-v-339885b8",null).exports,d=i("v0mh"),u=i("Yh7+"),h=i("PM1u"),m=i("vLgD"),p=i("TEao"),f=Object(p.a)(i("zpr1")),g={name:"SearchCity",props:{keyword:String,datas:Array},components:{Location2:l,LoadingBlack:d.a},data:function(){return{locationing:!0,location:{city:"",lat:null,lng:null},hotCityList:[],nothingImg:f}},computed:{showHotList:function(){return!(this.keyword.length>0||this.datas.length>0)},formatList:function(){return this.datas.map(function(t,e){var i="";for(t=t.tree;t;)i=t.name+","+i,t=t.parent;return i.substr(0,i.length-1)})}},methods:{getLocation:function(){this.locationing=!0,this.$storeLocal.remove("LocationObj");Object(u.a)({success:this.locationSuccess,error:this.locationError})},locationSuccess:function(t){this.locationing=!1;var e=t.addressComponent,i=(e=void 0===e?{}:e).city,o=void 0===i?"":i,a=e.street,n=void 0===a?"":a,s=e.streetNumber,r=void 0===s?"":s,c=t.position,l=(c=void 0===c?{}:c).lat,d=void 0===l?"":l,u=c.lng,h=void 0===u?"":u;this.location={lat:d,lng:h,city:n?n+r:o},this.$storeLocal.set("LocationObj",this.location)},locationError:function(t){this.locationing=!1,this.$store.dispatch(h.N,function(e){e({show:!0,time:2e3,status:!1,text:t})})},selectCity:function(t){var e=this;t!==this.city&&m.e.get(Object(m.b)("around-amap/geo?address="+t.replace(/[\s\uFEFF\xA0]+/g,""))).then(function(i){var o=i.data,a=(o=void 0===o?{}:o).geocodes;a=void 0===a?[]:a;var n=s()(a,1)[0],r=(n=void 0===n?{}:n).location,c=(void 0===r?"0,0":r).split(","),l=s()(c,2),d=l[0],u=l[1];e.location={city:t.split(",").reverse()[0],lng:d,lat:u},e.$storeLocal.set("LocationObj",{city:t.replace(/[\s\uFEFF\xA0]+/g,",").split(",").reverse()[0],lng:d,lat:u}),e.$emit("input",e.location.city),e.$emit("closeSearch"),e.$bus.emit("UpdateLocation")}).catch(function(t){console.log(t)})}},created:function(){var t=this,e=this.$storeLocal.get("LocationObj")||{},i=e.lat,o=e.lng,n=e.city;isNaN(i+o)||"string"!=typeof n?setTimeout(function(){t.getLocation()},500):(this.location={lat:i,lng:o,city:n},this.locationing=!1),this.showHotList&&m.e.get(Object(m.b)("locations/hots")).then(function(e){var i=e.data,o=void 0===i?[]:i;t.hotCityList=[].concat(a()(o))})}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SearchCity"},[t.showHotList?i("div",{staticClass:"hotCity"},[i("Row",{staticClass:"curLocation",attrs:{gutter:12}},[i("Col",{staticStyle:{"padding-left":"0"},attrs:{span:5}},[i("label",[t._v("当前定位")])]),t._v(" "),i("Col",{attrs:{span:15}},[i("span",{class:{c_b2b2b2:"未定位"===t.location.city}},[t._v(t._s(t.location.city||"未定位"))])]),t._v(" "),i("Col",{staticStyle:{display:"flex","text-align":"center","align-items":"center","justify-content":"center"},attrs:{span:4}},[t.locationing?i("LoadingBlack",{attrs:{height:"21",width:"21",color:"#999"}}):i("Location2",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.getLocation()}}})],1)],1),t._v(" "),i("p",{staticClass:"labelForHot"},[t._v("热门城市")]),t._v(" "),i("Row",{staticClass:"hotCityList",attrs:{gutter:12}},[i("ul",t._l(t.hotCityList,function(e,o){return i("li",{key:o,on:{click:function(i){t.selectCity(e)}}},[t._v(t._s(e))])}))])],1):[t.formatList.length>0?i("div",{staticClass:"cityList"},[i("ul",t._l(t.formatList,function(e,o){return i("li",{key:o,on:{click:function(i){t.selectCity(e)}}},[t._v(t._s(e))])}))]):i("div",{class:t.$style.nothing},[i("img",{attrs:{src:t.nothingImg,alt:"空空如也"}})])]],2)},staticRenderFns:[]};var w=i("VU/8")(g,v,!1,function(t){this.$style=i("LFX2"),i("6paY")},null,null);e.a=w.exports},uhbi:function(t,e){t.exports={plr20:"BAiHoELeRkrrqcRdW2xWb_0",searchPop:"_3yhwOi9-L_rG9ZoyncCxS6_0",searchHeader:"_2F3-rauY1ifT4tW_CgfK5o_0",searchContent:"_1F3sc2itg_rFwKtFaHlfK8_0"}},ujcs:function(t,e){e.read=function(t,e,i,o,a){var n,s,r=8*a-o-1,c=(1<<r)-1,l=c>>1,d=-7,u=i?a-1:0,h=i?-1:1,m=t[e+u];for(u+=h,n=m&(1<<-d)-1,m>>=-d,d+=r;d>0;n=256*n+t[e+u],u+=h,d-=8);for(s=n&(1<<-d)-1,n>>=-d,d+=o;d>0;s=256*s+t[e+u],u+=h,d-=8);if(0===n)n=1-l;else{if(n===c)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,o),n-=l}return(m?-1:1)*s*Math.pow(2,n-o)},e.write=function(t,e,i,o,a,n){var s,r,c,l=8*n-a-1,d=(1<<l)-1,u=d>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:n-1,p=o?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+u>=1?h/c:h*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=d?(r=0,s=d):s+u>=1?(r=(e*c-1)*Math.pow(2,a),s+=u):(r=e*Math.pow(2,u-1)*Math.pow(2,a),s=0));a>=8;t[i+m]=255&r,m+=p,r/=256,a-=8);for(s=s<<a|r,l+=a;l>0;t[i+m]=255&s,m+=p,s/=256,l-=8);t[i+m-p]|=128*f}},uq6Z:function(t,e,i){"use strict";var o={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[e("g",[e("path",{staticClass:"st0",attrs:{d:"M12,6.1c4.2,0,8,2.3,10.1,5.9c-2,3.6-5.9,5.9-10.1,5.9c-4.2,0-8-2.3-10.1-5.9C4,8.4,7.8,6.1,12,6.1L12,6.1z\n   M12,5.3C7.2,5.3,3,8,1,12c2,4,6.2,6.7,11,6.7S21,16,23,12C21,8,16.8,5.3,12,5.3L12,5.3"}}),this._v(" "),e("path",{staticClass:"st0",attrs:{d:"M12,8.8c1.8,0,3.3,1.4,3.3,3.2s-1.5,3.2-3.3,3.2S8.7,13.8,8.7,12S10.2,8.8,12,8.8L12,8.8z M12,8\n  c-2.3,0-4.1,1.8-4.1,4s1.9,4,4.1,4c2.3,0,4.1-1.8,4.1-4S14.3,8,12,8L12,8"}})])])},staticRenderFns:[]},n=i("VU/8")(o,a,!1,null,null,null);e.a=n.exports},"w1/K":function(t,e,i){"use strict";var o=i("PM1u"),a=i("DQCr"),n=i.n(a),s=i("0IX3"),r=i("TEao"),c=Object(r.a)(i("Pg7H")),l=Object(r.a)(i("05K8")),d={components:{LockIcon:s.a},props:{square:{type:Boolean,default:!1},single:{type:Boolean,default:!1}},computed:{defaultImage:function(){return this.square?c:l}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{locked:!this.single,singleLocked:this.single}},[this.square?e("section",{staticClass:"square"},[e("img",{attrs:{src:this.defaultImage}}),this._v(" "),e("div",[e("LockIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1)]):e("section",{staticClass:"notSquare"},[e("img",{attrs:{src:this.defaultImage,alt:""}}),this._v(" "),e("div",[e("LockIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1)])])},staticRenderFns:[]};var h=i("VU/8")(d,u,!1,function(t){i("sLRm")},"data-v-569a7896",null).exports,m=i("vLgD"),p=i("Y4FN"),f=i.n(p),g=i("bcRl"),v=((f.a.get("UserLoginInfo")||{}).token,{data:function(){return{open:!1,amount:0,token:"",goldName:window.TS_WEB.goldName}},components:{LockedImage:h},props:["storages","feed"],computed:{imageSize:function(){return this.storages.length},imageHeight:function(){if(1===this.storages.length){var t=this.imageObject[0].width/this.imageObject[0].height;return(parseInt(68/t)>80?80:parseInt(68/t))+"vw"}},imageObject:function(){var t=this;return this.storages.map(function(e){return e.paid_node&&!e.paid?{paid:!1,paid_node:e.paid_node,amount:e.amount,url:n()(Object(m.b)("files/"+e.file),{w:250,h:250,token:t.token})}:{paid:!0,paid_node:e.paid_node,amount:e.amount,url:n()(Object(m.b)("files/"+e.file),{w:300,h:300,token:t.token})}})}},methods:{showSwiper:function(t){var e=this,i=[];this.imageObject.forEach(function(t){t.url&&(t.url=t.url.replace(/\?.*/,"")),i.push(t)}),this.$store.dispatch(o.F,function(o){o({list:i,value:t,show:!0,source:e.feed,sourceType:"feed"})})},showPayDialog:function(t,e){var i=this;this.$Modal.confirm({title:"付费支付",content:"<p>需要支付 "+Object(g.a)(t.amount)+this.goldName+" </p>",okText:"确认支付",loading:!0,onOk:function(){Object(m.a)().post(Object(m.b)("purchases/"+t.paid_node),{validateStatus:function(t){return 201===t}}).then(function(){i.$Modal.remove(),i.$Message.success("支付成功"),i.storages[e].paid=!0,setTimeout(function(){i.showSwiper(e)},800),i.$store.getters[o.y][i.feed].images[e].paid=!0}).catch(function(t){var e=t.response;(e=void 0===e?{}:e).data,e.status;i.$Modal.remove(),i.$Message.error("")})}})}},created:function(){var t=(this.$storeLocal.get("UserLoginInfo")||{}).token,e=void 0===t?"":t;this.token=e}}),w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticStyle:{width:"68vw",position:"relative","margin-bottom":"8px",display:"inherit"}},[1==t.imageSize?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],style:"width: 100%; height: "+t.imageHeight+"; object-fit: cover; max-height: 80vw;",on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}}):t._e(),t._v(" "),2==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})])]):t._e(),t._v(" "),3==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})])]):t._e(),t._v(" "),4==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})])]):t._e(),t._v(" "),5==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"66.6666%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{staticStyle:{width:"33.3333%"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"100%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"100% padding-bottom: 2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})])]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[4].url,expression:"imageObject[4].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[4].paid?t.showSwiper(4):t.showPayDialog(t.imageObject[4],4)}}})])]):t._e(),t._v(" "),6==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"66.6666%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{staticStyle:{width:"33.3333%"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"100%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"100% padding-bottom: 2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})])]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[4].url,expression:"imageObject[4].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[4].paid?t.showSwiper(4):t.showPayDialog(t.imageObject[4],4)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[5].url,expression:"imageObject[5].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[5].paid?t.showSwiper(5):t.showPayDialog(t.imageObject[5],5)}}})])]):t._e(),t._v(" "),7==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{staticStyle:{width:"34vw"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})])]),t._v(" "),i("div",{staticStyle:{width:"34vw",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[4].url,expression:"imageObject[4].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[4].paid?t.showSwiper(4):t.showPayDialog(t.imageObject[4],4)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[5].url,expression:"imageObject[5].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[5].paid?t.showSwiper(5):t.showPayDialog(t.imageObject[5],5)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[6].url,expression:"imageObject[6].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[6].paid?t.showSwiper(6):t.showPayDialog(t.imageObject[6],6)}}})])])]):t._e(),t._v(" "),8==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[4].url,expression:"imageObject[4].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[4].paid?t.showSwiper(4):t.showPayDialog(t.imageObject[4],4)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[5].url,expression:"imageObject[5].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[5].paid?t.showSwiper(5):t.showPayDialog(t.imageObject[5],5)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[6].url,expression:"imageObject[6].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[6].paid?t.showSwiper(6):t.showPayDialog(t.imageObject[6],6)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[7].url,expression:"imageObject[7].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[7].paid?t.showSwiper(7):t.showPayDialog(t.imageObject[7],7)}}})])]):t._e(),t._v(" "),9==t.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[0].url,expression:"imageObject[0].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[0].paid?t.showSwiper(0):t.showPayDialog(t.imageObject[0],0)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[1].url,expression:"imageObject[1].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[1].paid?t.showSwiper(1):t.showPayDialog(t.imageObject[1],1)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[2].url,expression:"imageObject[2].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[2].paid?t.showSwiper(2):t.showPayDialog(t.imageObject[2],2)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[3].url,expression:"imageObject[3].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[3].paid?t.showSwiper(3):t.showPayDialog(t.imageObject[3],3)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[4].url,expression:"imageObject[4].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[4].paid?t.showSwiper(4):t.showPayDialog(t.imageObject[4],4)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[5].url,expression:"imageObject[5].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[5].paid?t.showSwiper(5):t.showPayDialog(t.imageObject[5],5)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[6].url,expression:"imageObject[6].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[6].paid?t.showSwiper(6):t.showPayDialog(t.imageObject[6],6)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[7].url,expression:"imageObject[7].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[7].paid?t.showSwiper(7):t.showPayDialog(t.imageObject[7],7)}}})]),t._v(" "),i("div",{class:t.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageObject[8].url,expression:"imageObject[8].url"}],class:t.$style.perFeedImg,on:{click:function(e){e.stopPropagation(),t.imageObject[8].paid?t.showSwiper(8):t.showPayDialog(t.imageObject[8],8)}}})])]):t._e()])},staticRenderFns:[]};var _=i("VU/8")(v,w,!1,function(t){i("yll6"),this.$style=i("jE7p")},"data-v-75691f50",null);e.a=_.exports},xgYI:function(t,e,i){"use strict";var o=i("bOdI"),a=i.n(o),n=i("Dd8w"),s=i.n(n),r=i("LOoJ"),c=i("vLgD"),l=(i("YaEn"),i("ckCO")),d=i("PM1u"),u=i("M4fF"),h=i.n(u),m={props:["feed"],components:{Comfirm:l.a},data:function(){return{more:!1,replyToUserId:0,toFeed:0,sending:!1,deleteData:{}}},methods:{focusInput:function(t){var e=this.$storeLocal.get("user_"+t),i="",o=this.feed,a=t;h.a.keys(e).length?i=e.name:Object(r.d)(t,30).then(function(t){i=(e=t).name}),this.$store.dispatch(d.u,function(t){t({data:{show:!0,reply_to_user_id:a,to_user_name:i,feed:o}})})},showComfirm:function(t,e,i){var o=this;this.$store.dispatch(d.v,function(a){a({show:!0,confirmContent:"删除动态",data:{comment_id:t,feed_id:e,index:i},confirm:o.deleteComment})})},deleteComment:function(t,e){var i=this,o=this.feed;Object(c.a)().delete(Object(c.b)("feeds/"+e.feed_id+"/comment/"+e.comment_id),{},{validateStatus:function(t){return 204===t}}).then(function(t){o.comments.splice(e.index,1),o.tool.feed_comment_count-=1,i.$store.dispatch(d._6,function(t){return t({feed:o})})})},getUserName:function(t){var e=this.users["user_"+t],i=(e=void 0===e?{}:e).name;return void 0===i?"":i}},computed:{hasMore:function(){return this.feed.comments.length>2},users:function(){return this.$store.getters[d._8]},currentUser:function(){return this.$storeLocal.get("UserLoginInfo")},commentsData:function(){return this.feed.comments}},created:function(){var t={};this.feed.comments.forEach(function(e,i){var o;e.reply_to_user_id?t=s()({},t,(o={},a()(o,e.user_id,e.user_id),a()(o,e.reply_to_user_id,e.reply_to_user_id),o)):t=s()({},t,a()({},e.user_id,e.user_id))});var e=h.a.values(t);this.$store.dispatch(d._8,function(t){return Object(r.e)(e).then(function(e){return t(e)})})}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"2wv"}},[i("ul",t._l(t.commentsData,function(e,o){return o<3?i("li",{key:e.id},[i("p",[e.user_id?i("router-link",{class:t.$style.userName,attrs:{to:{path:"/users/feeds/"+e.user_id}}},[t._v("\n          "+t._s(t.getUserName(e.user_id))+"\n        ")]):t._e(),t._v(" "),e.reply_to_user_id?i("span",{class:t.$style.commentContent},[t._v("\n          回复\n        ")]):t._e(),t._v(" "),e.reply_to_user_id?i("router-link",{class:t.$style.userName,attrs:{to:{path:"/users/feeds/"+e.reply_to_user_id}}},[t._v(t._s(t.getUserName(e.reply_to_user_id)))]):t._e(),t._v(" "),e.user_id!=t.currentUser.user_id?i("span",{class:t.$style.commentContent,on:{click:function(i){i.stopPropagation(),t.focusInput(e.user_id)}}},[t._v("\n         : "+t._s(e.body)+"\n        ")]):t._e(),t._v(" "),e.user_id==t.currentUser.user_id?i("span",{class:t.$style.commentContent,on:{click:function(i){i.stopPropagation(),t.showComfirm(e.id,t.feed.feed.feed_id,o)}}},[t._v("\n         : "+t._s(e.body)+"\n        ")]):t._e()],1)]):t._e()})),t._v(" "),t.hasMore?i("router-link",{class:t.$style.userName,attrs:{to:"/feed/"+t.feed.feed.feed_id}},[t._v("查看全部评论")]):t._e()],1)},staticRenderFns:[]};var f=i("VU/8")(m,p,!1,function(t){this.$style=i("zHLR")},null,null);e.a=f.exports},xrTZ:function(t,e,i){(function(o){var a,n,s;n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:this,s=function(o){"use strict";var n,s=o.Base64;if(void 0!==t&&t.exports)try{n=i("EuP9").Buffer}catch(t){}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(t){for(var e={},i=0,o=t.length;i<o;i++)e[t.charAt(i)]=i;return e}(r),l=String.fromCharCode,d=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?l(192|e>>>6)+l(128|63&e):l(224|e>>>12&15)+l(128|e>>>6&63)+l(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return l(240|e>>>18&7)+l(128|e>>>12&63)+l(128|e>>>6&63)+l(128|63&e)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(t){return t.replace(u,d)},m=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[r.charAt(i>>>18),r.charAt(i>>>12&63),e>=2?"=":r.charAt(i>>>6&63),e>=1?"=":r.charAt(63&i)].join("")},p=o.btoa?function(t){return o.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,m)},f=n?n.from&&n.from!==Uint8Array.from?function(t){return(t.constructor===n.constructor?t:n.from(t)).toString("base64")}:function(t){return(t.constructor===n.constructor?t:new n(t)).toString("base64")}:function(t){return p(h(t))},g=function(t,e){return e?f(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):f(String(t))},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),w=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return l(55296+(e>>>10))+l(56320+(1023&e));case 3:return l((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return l((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},_=function(t){return t.replace(v,w)},y=function(t){var e=t.length,i=e%4,o=(e>0?c[t.charAt(0)]<<18:0)|(e>1?c[t.charAt(1)]<<12:0)|(e>2?c[t.charAt(2)]<<6:0)|(e>3?c[t.charAt(3)]:0),a=[l(o>>>16),l(o>>>8&255),l(255&o)];return a.length-=[0,0,2,1][i],a.join("")},b=o.atob?function(t){return o.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,y)},C=n?n.from&&n.from!==Uint8Array.from?function(t){return(t.constructor===n.constructor?t:n.from(t,"base64")).toString()}:function(t){return(t.constructor===n.constructor?t:new n(t,"base64")).toString()}:function(t){return _(b(t))},x=function(t){return C(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(o.Base64={VERSION:"2.4.0",atob:b,btoa:p,fromBase64:x,toBase64:g,utob:h,encode:g,encodeURI:function(t){return g(t,!0)},btou:_,decode:x,noConflict:function(){var t=o.Base64;return o.Base64=s,t}},"function"==typeof Object.defineProperty){var S=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};o.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",S(function(){return x(this)})),Object.defineProperty(String.prototype,"toBase64",S(function(t){return g(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",S(function(){return g(this,!0)}))}}return o.Meteor&&(Base64=o.Base64),void 0!==t&&t.exports?t.exports.Base64=o.Base64:void 0===(a=function(){return o.Base64}.apply(e,[]))||(t.exports=a),{Base64:o.Base64}},t.exports=s(n)}).call(e,i("DuR2"))},yPCn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("d7EF"),a=i.n(o),n=i("Dd8w"),s=i.n(n),r=i("Y4FN"),c=i.n(r),l=i("J7Ch"),d=i("Yga2"),u=i("O3Q9"),h=i("vLgD"),m={components:{BackIcon:l.a,CloseIcon:d.a},data:function(){return{error:"",state:"",nextState:0,isDisabled:!0,certification:{type:"",name:"",desc:"",number:"",phone:"",org_name:"",org_address:"",files:[]},upload:{url:window.TS_WEB.api+"/files",headers:{Authorization:"Bearer "+c.a.get("UserLoginInfo").token},front:null,back:null}}},watch:{nextState:function(){1==this.nextState&&(this.upload.back=null,this.upload.front=null)},"upload.back":function(){var t=this.upload,e=t.front,i=t.back;this.isDisabled=!e||!i},"upload.front":function(){var t=this.certification.type,e=this.upload.front;this.isDisabled="org"!=t||!e}},computed:{showNameImputIcon:function(){return this.certification.name.length>0},showNumberImputIcon:function(){return this.certification.number.length>0},showPhoneImputIcon:function(){return this.certification.phone.length>0},showDescImputIcon:function(){return this.certification.desc.length>0},showOrgNameImputIcon:function(){return this.certification.org_name.length>0},showOrgAddressImputIcon:function(){return this.certification.org_address.length>0},validateBasicInfo:function(){var t=this.certification,e=t.name,i=t.number,o=t.phone,a=t.desc,n=t.org_name,s=t.org_address,r=e.length<=0||i.length<=0||o.length<=0||a.length<=0;return"org"==this.certification.type&&(r=r||n.length<=0||s.length<=0),!r}},methods:{goTo:u.b,changeUrl:u.a,clearInput:function(t){this.certification[t]=""},validateIDCard:function(t){return/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(this.certification.number)},validatePhone:function(t){return/^(\+?0?86\-?)?((13\d|14[57]|15[^4,\D]|17[3678]|18\d)\d{8}|170[059]\d{7})$/.test(this.certification.phone)},handleNext:function(){var t=this.certification,e=(t.name,t.number),i=t.phone;t.desc;return this.validateIDCard(e)?this.validatePhone(i)?void(this.nextState=1):(this.$Message.error("请填写正确的手机号"),!1):(this.$Message.error("请填写正确的身份证号码"),!1)},handleFrontUploadSuccess:function(t,e){this.upload.front=t.id},handleBackUploadSuccess:function(t,e){this.upload.back=t.id},handleOnFormatError:function(t){this.$Message.warning("不支持的图片格式，请上传:jpg，jpeg，png格式的图片")},backPreviousPage:function(){this.nextState=0,this.isDisabled=!0},handleSubmit:function(){var t=this,e=this.certification.type,i=this.upload,o=i.front,n=i.back;this.certification.files="user"==e?[o,n]:[o];var r=parseInt(this.state)?"patch":"post";Object(h.a)()({method:r,url:Object(h.b)("user/certification"),data:s()({},this.certification),validateStatus:function(t){return 201===t}}).then(function(e){var i=e.data.message;i=void 0===i?[]:i;var o=a()(i,1)[0];t.$Message.success(o),setTimeout(function(){t.$router.go(-1)},1500)}).catch(function(e){var i=e.response,o=(i=void 0===i?{}:i).data.message,a=void 0===o?["更新认证失败，请稍后再试试"]:o;t.$Message.warning(a)})}},created:function(){var t=this.$route.query,e=t.type,i=t.state;this.certification.type=e,this.state=i}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0==t.nextState?i("div",{staticClass:"changePassword"},[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.goTo(-1)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        基本信息\n      ")])],1)],1),t._v(" "),i("div",{staticClass:"changePassword-content changePassword-bakcground-color entry"},["user"==t.certification.type?[i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          真实姓名\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.name,expression:"certification.name",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入真实姓名",id:"name",name:"name"},domProps:{value:t.certification.name},on:{input:function(e){e.target.composing||t.$set(t.certification,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showNameImputIcon,expression:"showNameImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("name")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          身份证号\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.number,expression:"certification.number",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入正确身份证号码",id:"number",name:"number"},domProps:{value:t.certification.number},on:{input:function(e){e.target.composing||t.$set(t.certification,"number",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showNumberImputIcon,expression:"showNumberImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("number")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          手机号\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.phone,expression:"certification.phone",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入11位手机号",id:"phone",name:"phone"},domProps:{value:t.certification.phone},on:{input:function(e){e.target.composing||t.$set(t.certification,"phone",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showPhoneImputIcon,expression:"showPhoneImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("phone")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          认证描述\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.desc,expression:"certification.desc",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"请慎重填写",id:"desc",name:"desc"},domProps:{value:t.certification.desc},on:{input:function(e){e.target.composing||t.$set(t.certification,"desc",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showDescImputIcon,expression:"showDescImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("desc")}}})],1)],1)]:[i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          机构名称\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.org_name,expression:"certification.org_name",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入机构名称",id:"org_name",name:"org_name"},domProps:{value:t.certification.org_name},on:{input:function(e){e.target.composing||t.$set(t.certification,"org_name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showOrgNameImputIcon,expression:"showOrgNameImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("org_name")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          机构地址\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.org_address,expression:"certification.org_address",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入机构地址",id:"org_address",name:"org_address"},domProps:{value:t.certification.org_address},on:{input:function(e){e.target.composing||t.$set(t.certification,"org_address",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showOrgAddressImputIcon,expression:"showOrgAddressImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("org_address")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          负责人\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.name,expression:"certification.name",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入真实姓名",id:"name",name:"name"},domProps:{value:t.certification.name},on:{input:function(e){e.target.composing||t.$set(t.certification,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showNameImputIcon,expression:"showNameImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("name")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          身份证号码\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.number,expression:"certification.number",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入正确身份证号码",id:"number",name:"number"},domProps:{value:t.certification.number},on:{input:function(e){e.target.composing||t.$set(t.certification,"number",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showNumberImputIcon,expression:"showNumberImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("number")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          负责人电话\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.phone,expression:"certification.phone",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"输入11位手机号",id:"phone",name:"phone"},domProps:{value:t.certification.phone},on:{input:function(e){e.target.composing||t.$set(t.certification,"phone",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showPhoneImputIcon,expression:"showPhoneImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("phone")}}})],1)],1),t._v(" "),i("Row",{staticClass:"entryMenu",attrs:{gutter:24}},[i("Col",{attrs:{span:"8"}},[t._v("\n          认证描述\n        ")]),t._v(" "),i("Col",{attrs:{span:"13"}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.certification.desc,expression:"certification.desc",modifiers:{trim:!0}}],attrs:{type:"text",size:"large",placeholder:"该描述会影响审核,请慎重填写",id:"desc",name:"desc"},domProps:{value:t.certification.desc},on:{input:function(e){e.target.composing||t.$set(t.certification,"desc",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("Col",{attrs:{span:"3"}},[i("CloseIcon",{directives:[{name:"show",rawName:"v-show",value:t.showDescImputIcon,expression:"showDescImputIcon"}],attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(e){t.clearInput("desc")}}})],1)],1)]],2),t._v(" "),i("div",{staticClass:"next"},[i("Col",{attrs:{span:"20",offset:"2"}},[t.validateBasicInfo?i("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:t.handleNext}},[t._v("下一步")]):i("Button",{attrs:{size:"large",disabled:"",long:""}},[t._v("下一步")])],1)],1)]):i("div",[i("div",{staticClass:"commonHeader"},[i("Row",{attrs:{gutter:24}},[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{span:"5"},nativeOn:{click:function(e){t.backPreviousPage(e)}}},[i("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),i("Col",{staticClass:"title-col",attrs:{span:"14"}},[t._v("\n        上传资料\n      ")]),t._v(" "),i("Col",{staticClass:"header-end-col",attrs:{span:"5"}},[i("Button",{attrs:{type:"text",disabled:t.isDisabled},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1),t._v(" "),i("div",[i("Row",{attrs:{gutter:24}},[i("Col",{staticStyle:{color:"#999"}},[t._v(t._s("org"==t.certification.type?"上传企业机构营业执照":"上传身份证正反面照片"))])],1),t._v(" "),i("Row",{attrs:{gutter:24}},[i("Upload",{staticStyle:{width:"100%",background:"#F7F7F7",height:"100px",padding:"10px"},attrs:{multiple:"",type:"drag",action:t.upload.url,headers:t.upload.headers,format:["jpg","jpeg","png"],"on-format-error":t.handleOnFormatError,"show-upload-list":!1,"on-success":t.handleFrontUploadSuccess}},[t.upload.front?i("div",[i("img",{staticStyle:{width:"100%","max-height":"100px"},attrs:{src:t.upload.url+"/"+t.upload.front}})]):i("div",{staticStyle:{padding:"20px 0"}},[i("Icon",{attrs:{type:"camera",size:"30"}}),t._v(" "),i("p",[t._v("点击上传照片")])],1)])],1),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:t.upload.front&&"user"==t.certification.type,expression:"upload.front && certification.type=='user'"}],attrs:{gutter:24}},[i("Upload",{staticStyle:{width:"100%",background:"#F7F7F7",height:"100px",padding:"10px"},attrs:{multiple:"",type:"drag",action:t.upload.url,headers:t.upload.headers,format:["jpg","jpeg","png"],"on-format-error":t.handleOnFormatError,"show-upload-list":!1,"on-success":t.handleBackUploadSuccess}},[t.upload.back?i("div",[i("img",{staticStyle:{width:"100%","max-height":"100px"},attrs:{src:t.upload.url+"/"+t.upload.back}})]):i("div",{staticStyle:{padding:"20px 0"}},[i("Icon",{attrs:{type:"camera",size:"30"}}),t._v(" "),i("p",[t._v("点击上传照片")])],1)])],1)],1)])},staticRenderFns:[]};var f=i("VU/8")(m,p,!1,function(t){i("tpiV")},"data-v-527b42e7",null);e.default=f.exports},yll6:function(t,e){},zHLR:function(t,e){t.exports={userName:"_3yMUwUj4FQL2q8f5jlVLRK_0",commentContent:"_3XHVf0UVk_7app3G_bCBVH_0"}},zwfI:function(t,e){}});
//# sourceMappingURL=2.9fd3edc2e5d0a4949983.js.map