webpackJsonp([7],{"+4T+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Gu7T"),n=i.n(a),s=i("vLgD"),o=i("O3Q9"),c=i("J7Ch"),l=i("DQCr"),r=i.n(l),d=i("TEao"),m=Object(d.a)(i("zpr1")),u={data:function(){return{myChannel:[],myChannelIds:[],allChannel:[],allChannelIds:[],currentTab:"allChannel"}},computed:{nothingMy:function(){return this.myChannelIds.length?0:m},nothingAll:function(){return this.allChannelIds.length?0:m}},methods:{goTo:o.b,changeUrl:o.a,getImg:function(e){return r()(Object(s.b)("files/"+e),{w:100,h:100})},handleSubscrible:function(e){var t=this,i=this.allChannel[e];Object(s.a)().post(Object(s.c)("channels/"+i.id+"/follow"),{},{validateStatus:function(e){return 201===e}}).then(function(a){t.allChannel[e].follow_count+=1,t.allChannel[e].follow_status=1,t.myChannelIds.push(i.id),t.myChannel.push(i)})},handleUnSubscribleInAll:function(e){var t=this,i=this.allChannel[e];Object(s.a)().delete(Object(s.c)("channels/"+i.id+"/follow"),{},{validateStatus:function(e){return 204===e}}).then(function(a){var n=t.myChannelIds.findIndex(function(e){return e===i.id});t.myChannelIds.splice(n,1);var s=t.myChannel.findIndex(function(e){return e.di===i.id});t.myChannel.splice(s,1),t.allChannel[e].follow_status=0,t.allChannel[e].follow_count-=1})},handleUnSubscrible:function(e){var t=this,i=this.myChannel[e];Object(s.a)().delete(Object(s.c)("channels/"+i.id+"/follow"),{},{validateStatus:function(e){return 204===e}}).then(function(a){t.myChannel.splice(e,1);var n=t.myChannelIds.findIndex(function(e){return e===i.id});t.myChannelIds.splice(n,1);var s=t.allChannel.findIndex(function(e){return e.id===i.id});t.allChannel[s].follow_status=0,t.allChannel[s].follow_count-=1})}},created:function(){var e=this;Object(s.a)().get(Object(s.c)("channels"),{},{validateStatus:function(e){return 200===e}}).then(function(t){var i=t.data.data;e.allChannel=[].concat(n()(i)),i.length&&i.forEach(function(t){e.allChannelIds.push(t.id)})}),Object(s.a)().get(Object(s.c)("channels/my"),{},{validateStatus:function(e){return 200===e}}).then(function(t){var i=t.data.data;e.myChannel=[].concat(n()(i)),i.length&&i.forEach(function(t){e.myChannelIds.push(t.id)})})},components:{BackIcon:c.a}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"channelIndex"},[i("BackIcon",{staticStyle:{"z-index":"4",position:"fixed",left:"12px",top:"12px"},attrs:{width:"21",height:"21",color:"#999"},nativeOn:{click:function(t){e.goTo(-1)}}}),e._v(" "),i("Tabs",{on:{"on-click":e.getChannels},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("Tab-pane",{attrs:{label:"我订阅的",name:"myChannel"}},[i("section",[e.myChannelIds.length?i("ul",{staticClass:"channelCateParent"},e._l(e.myChannel,function(t,a){return i("li",{staticClass:"channelItem",on:{click:function(i){if(i.target!==i.currentTarget)return null;e.changeUrl("/channel/"+t.id)}}},[i("div",{staticClass:"channelCover",on:{click:function(i){e.changeUrl("/channel/"+t.id)}}},[i("img",{attrs:{src:e.getImg(t.cover.id),alt:""}})]),e._v(" "),i("div",{staticClass:"channelIntro",on:{click:function(i){e.changeUrl("/channel/"+t.id)}}},[i("h4",[e._v(e._s(t.title))]),e._v(" "),i("section",[e._v("\n                分享 "),i("i",[e._v(e._s(t.feed_count))]),e._v(" 订阅 "),i("i",[e._v(e._s(t.follow_count))])])]),e._v(" "),i("div",{staticClass:"channelOperation"},[i("Button",{staticStyle:{color:"#999"},attrs:{type:"ghost",icon:"ios-checkmark-empty"},on:{click:function(t){e.handleUnSubscrible(a)}}},[e._v("已订阅")])],1)])})):i("div",{staticClass:"nothingDefault"},[i("img",{attrs:{src:e.nothingMy}})])])]),e._v(" "),i("Tab-pane",{attrs:{label:"全部频道",name:"allChannel"}},[i("section",[e.allChannelIds.length?i("ul",{staticClass:"channelCateParent"},e._l(e.allChannel,function(t,a){return i("li",{staticClass:"channelItem",on:{click:function(i){if(i.target!==i.currentTarget)return null;e.changeUrl("/channel/"+t.id)}}},[i("div",{staticClass:"channelCover",on:{click:function(i){e.changeUrl("/channel/"+t.id)}}},[i("img",{attrs:{src:e.getImg(t.cover.id),alt:""}})]),e._v(" "),i("div",{staticClass:"channelIntro",on:{click:function(i){e.changeUrl("/channel/"+t.id)}}},[i("h4",[e._v(e._s(t.title))]),e._v(" "),i("section",[e._v("\n                分享 "),i("i",[e._v(e._s(t.feed_count))]),e._v(" 订阅 "),i("i",[e._v(e._s(t.follow_count))])])]),e._v(" "),i("div",{staticClass:"channelOperation"},[t.follow_status?i("Button",{staticStyle:{color:"#999"},attrs:{type:"ghost",icon:"ios-checkmark-empty"},on:{click:function(t){e.handleUnSubscribleInAll(a)}}},[e._v("已订阅")]):i("Button",{staticStyle:{color:"#59b6d7"},attrs:{type:"ghost",icon:"ios-plus-empty"},on:{click:function(t){e.handleSubscrible(a)}}},[e._v("订阅")])],1)])})):i("div",{staticClass:"nothingDefault"},[i("img",{attrs:{src:e.nothingMy}})])])])],1)],1)},staticRenderFns:[]};var g=i("VU/8")(u,h,!1,function(e){i("VWCR")},null,null);t.default=g.exports},"/3Xo":function(e,t){},"1OOR":function(e,t){e.exports={detail:"_2Zk8OY-sddJ_A4kmrEQp35_0",detailAvatar:"_2rt1d4PXo2F4_fyJpyGoJc_0",detailContentBefore:"_38zwsetGa9ro_dho1qppzf_0",detailUsername:"_2kYNct0eURdMKre0bhwS2v_0",detailTimer:"_1ba5PCGND8Ehhng_5WZp-t_0",detailFeedContent:"QNIY9-atpXTBa3mnEEn4v_0",detailContent:"_3JvZL2pfP0ZQGX8RW0clbk_0"}},"28F0":function(e,t){},GBHx:function(e,t){},Gidt:function(e,t){},QbXv:function(e,t){},RVtK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Gu7T"),n=i.n(a),s=i("Dd8w"),o=i.n(s),c=i("vLgD"),l=(i("JYNW"),i("LOoJ"),i("w1/K")),r=i("xgYI"),d=i("pWbq"),m=i("YaEn"),u=i("TEao"),h=i("M4fF"),g=i.n(h),p=i("O3Q9"),f=i("NYxO"),v=i("PM1u"),y=(i("Y4FN"),i("bcRl")),w=i("woOf"),_=i.n(w),b=i("Sc1G"),O={name:"feed-view",components:{ViewIcon:i("uq6Z").a},props:{feedID:{required:!0},count:{required:!0},viewFeed:{required:!0}},data:function(){return{}}},j={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"feed-tool-item feed-view",on:{click:function(t){e.viewFeed(e.feedID)}}},[i("ViewIcon",{attrs:{width:"21",height:"21",color:"#999"}}),e._v(" "),i("span",{staticClass:"count feed-view-count"},[e._v(e._s(e.count||0))])],1)},staticRenderFns:[]},I=i("VU/8")(O,j,!1,null,null,null).exports,C=i("JKGc"),x=i("pZXj"),S={name:"feed-like",components:{DiggIcon:C.a,UnDiggIcon:x.a},props:{feedID:{required:!0},count:{required:!0},isDigg:{type:Boolean,required:!0,default:!1},upvote:{type:Function,required:!0}},data:function(){return{count2:0,isDigg2:!1}},beforeMount:function(){this.count2=this.count,this.isDigg2=this.isDigg},methods:{diggFeed:function(){var e=this.count2,t=this.isDigg2;try{this.isDigg2?(this.count2--,this.upvote("unlike")):(this.count2++,this.upvote("like")),this.isDigg2=!this.isDigg2}catch(i){this.count2=e,this.isDigg2=t,this.$Message.error("点赞失败")}}}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"feed-tool-item feed-like",on:{click:this.diggFeed}},[this.isDigg2?t("DiggIcon",{attrs:{width:"21",height:"21",color:"#f4504d"}}):t("UnDiggIcon",{attrs:{width:"21",height:"21",color:"#999"}}),this._v(" "),t("span",{staticClass:"count feed-like-count"},[this._v(this._s(this.count2))])],1)},staticRenderFns:[]},k=i("VU/8")(S,$,!1,null,null,null).exports,F={name:"feed-comment",components:{CommentIcon:i("Rgjh").a},props:{feedID:{required:!0},count:{required:!0},handleCommentInput:{type:Function}},data:function(){return{}}},P={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"feed-tool-item feed-comment"},[i("CommentIcon",{attrs:{width:"21",height:"21",color:"#999"},nativeOn:{click:function(t){e.handleCommentInput(t)}}}),e._v(" "),i("span",{staticClass:"count feed-comment-count"},[e._v(e._s(e.count||0))])],1)},staticRenderFns:[]},z=i("VU/8")(F,P,!1,null,null,null).exports,D=i("lHA8"),B=i.n(D),N=i("c/Tr"),M=i.n(N),L=i("d7EF"),U=i.n(L),T={name:"feed-comments",props:{feedID:{required:!0},comments:{type:Array,required:!0},typing:{type:Boolean,required:!0},handleCommentInput:{type:Function,required:!0},handleComment:{type:Function,required:!0},handleDeleteComment:{type:Function,required:!0}},data:function(){return{comment_content:"",reply_user:null,users:{}}},computed:{placeholder:function(){return this.reply_user?"回复: "+this.getUserName(this.reply_user):"随便说说"},len:function(){return this.comment_content.length},currentUser:function(){return(this.$storeLocal.get("UserLoginInfo")||{}).user_id},formatComment:function(){return g.a.orderBy(this.comments,[]).slice(0,5)}},watch:{typing:function(e){e||(this.reply_user=null,this.comment_content="")}},methods:{getUserName:function(e){var t=this.$store.getters.getUserById(e),i=U()(t,1)[0].name;return void 0===i?"":i},sendComment:function(){var e=this;this.handleComment({content:this.comment_content,reply_user:this.reply_user,success:function(t){e.comments.unshift(t),e.handleCommentInput()},error:function(t){var i=t.response.data,a=void 0===i?{message:"评论失败!"}:i;e.$Message.error(e.$MessageBundle(a).getMessage())}})},replySomeOne:function(e){this.reply_user=e,this.handleCommentInput()}},created:function(){var e=[];this.comments.forEach(function(t){var i=t.user_id,a=t.target_user,s=t.reply_user;e=M()(new B.a([].concat(n()(e),[i,a,s])))}),this.$store.dispatch("GET_USER_BY_ID",e)}},E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"feed-comments"},[e.comments.length>0?i("ul",{staticClass:"feed-comments-list"},e._l(e.formatComment,function(t,a){return i("li",{key:"feed-"+e.feedID+"-comment-"+t.id},[i("p",{staticClass:"feed-comment-row"},[i("router-link",{staticClass:"userName",attrs:{to:{path:"/users/feeds/"+t.user_id}}},[e._v("\n                    "+e._s(e.getUserName(t.user_id))+"\n                ")]),e._v(" "),t.reply_user?i("span",[e._v("\n                    回复\n                    "),i("router-link",{staticClass:"userName",attrs:{to:{path:"/users/feeds/"+t.reply_user}}},[e._v("\n                        "+e._s(e.getUserName(t.reply_user))+"\n                    ")])],1):e._e(),e._v(" "),t.user_id!=e.currentUser?i("span",{staticClass:"comment_content",on:{click:function(i){i.stopPropagation(),e.replySomeOne(t.user_id)}}},[e._v(": "+e._s(t.body)+"\n                    "),t.pinned?i("i",{staticClass:"pinned-icon"},[e._v("置顶")]):e._e()]):i("span",{staticClass:"comment_content",on:{click:function(i){i.stopPropagation(),e.handleDeleteComment(t.id)}}},[e._v(": "+e._s(t.body)+"\n                    "),t.pinned?i("i",{staticClass:"pinned-icon"},[e._v("置顶")]):e._e()])],1)])})):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.typing,expression:"typing"}],staticClass:"feed-comments-input"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment_content,expression:"comment_content"}],attrs:{placeholder:e.placeholder,maxlength:"255"},domProps:{value:e.comment_content},on:{input:function(t){t.target.composing||(e.comment_content=t.target.value)}}}),e._v(" "),i("div",{staticClass:"feed-comments-action"},[e.comment_content.length>200?i("p",{staticClass:"feed-comments-count-tips"},[i("span",[e._v(e._s(e.comment_content.length))]),e._v("/255")]):e._e(),e._v(" "),i("Button",{attrs:{type:"ghost",size:"small"},on:{click:e.handleCommentInput}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary",size:"small",disable:!(e.len>0)},on:{click:function(t){t.stopPropagation(),e.sendComment(t)}}},[e._v("发送")])],1)])])},staticRenderFns:[]};var q=i("VU/8")(T,E,!1,function(e){i("QbXv")},"data-v-71988cc1",null).exports,R=function(){},V={name:"feed-more-action",props:{feedID:{},handleCollection:{type:Function,default:R},deleteFeed:{type:Function,default:R},deleteComment:{type:Function,default:R}},data:function(){return{FUNC:R,show:!1,isOwn:!1,type:"feed",commentID:null,has_collection:!1}},computed:{},methods:{handleShowPop:function(e){var t=e.type,i=e.isOwn,a=e.has_collection,n=e.commentID;this.type=t,"feed"===t?(this.isOwn=i,this.has_collection=a):this.commentID=n,this.show=!0},handleClosePop:function(){this.show=!1}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("mt-popup",{staticClass:"feed-more-action",attrs:{position:"bottom"},on:{click:e.handleClosePop},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},["comment"===e.type?[i("Button",{attrs:{size:"large",type:"text",long:!0}},[e._v("申请评论置顶")]),e._v(" "),i("Button",{attrs:{size:"large",type:"text",long:!0},on:{click:function(t){e.deleteComment(e.commentID)}}},[e._v("删除评论")])]:e._e(),e._v(" "),e.type.indexOf("feed")>-1?[e.has_collection?i("Button",{attrs:{size:"large",type:"text",long:!0},on:{click:function(t){e.handleCollection("uncollection")}}},[e._v("取消收藏")]):i("Button",{attrs:{size:"large",type:"text",long:!0},on:{click:function(t){e.handleCollection("collection")}}},[e._v("收藏")]),e._v(" "),e.isOwn?["feed"===e.type?i("Button",{attrs:{size:"large",type:"text",long:!0}},[e._v("申请动态置顶")]):e._e(),e._v(" "),i("Button",{attrs:{size:"large",type:"text",long:!0},on:{click:e.deleteFeed}},[e._v("删除动态")])]:e._e()]:e._e(),e._v(" "),i("Button",{attrs:{type:"text",long:!0},on:{click:e.handleClosePop}},[e._v("取消")])],2)},staticRenderFns:[]};var G=i("VU/8")(V,A,!1,function(e){i("28F0")},null,null).exports,Y=function(){},Q={name:"feed-tools",components:{FeedLike:k,FeedView:I,MoreIcon:i("pr3M").a,FeedComment:z,FeedComments:q,FeedMoreAction:G},props:{feed:{type:Object},user:{type:Object},isOwn:{type:Boolean},isDigg:{type:Boolean},has_collection:{type:Boolean},upvote:{type:Function,required:!0},handleComment:{type:Function,required:!0},viewFeed:{type:Function,required:!0},deleteFeed:{type:Function,required:!0},deleteComment:{type:Function,required:!0},handleCollection:{type:Function,required:!0},pinnedFeed:{type:Function,default:Y},pinnedComment:{type:Function,default:Y}},data:function(){return{}},methods:{changeUrl:p.a,handleShowPopup:function(e){e=_()({},{feedID:this.feed.id||null,type:"",isOwn:this.isOwn,has_collection:this.has_collection,deleteFeed:this.deleteFeed,deleteComment:this.deleteComment,handleCollection:this.handleCollection,pinnedFeed:this.handelFeedPinned,pinnedComment:this.handelCommentPinned},e)||{},this.$store.dispatch(v.W,function(t){t(o()({show:!0},e))})},handelShowPinnedModal:function(e){this.$store.dispatch(v.V,function(t){t(o()({show:!0},e))})},handelFeedPinned:function(e){this.handelShowPinnedModal({ID:e,pinned:this.pinnedFeed})},handelCommentPinned:function(e){this.handelShowPinnedModal({ID:e,pinned:this.pinnedComment})},handleCommentInput:function(){var e=this;this.typing?this.$store.dispatch(v.m):this.$store.dispatch(v.u,function(t){t(e.feed.id)})},handleDeleteComment:function(e){this.handleShowPopup({type:"comment",commentID:e})},friendnum:function(e){return Object(b.a)(e)}},computed:o()({feedLikeCount:function(){var e=this.feed.diggs||this.feed.like_count||0;return e<1e3?e:this.friendnum(e)},feedCommentCount:function(){var e=this.feed.comments_count||this.feed.feed_comment_count||0;return e<1e3?e:this.friendnum(e)},feedViewCount:function(){var e=this.feed.views||this.feed.feed_view_count||0;return e<1e3?e:this.friendnum(e)}},Object(f.c)({commentFeed:function(e){return e.commentInput.commentFeed}}),{typing:function(){return this.commentFeed===this.feed.id}}),created:function(){}},H={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"feed-tool"},[i("div",{staticClass:"tool"},[i("div",{staticClass:"tool-item"},[i("feed-like",{attrs:{feedID:e.feed.id,isDigg:e.isDigg,count:e.feedLikeCount,upvote:e.upvote}})],1),e._v(" "),i("div",{staticClass:"tool-item"},[i("feed-comment",{attrs:{feedID:e.feed.id,count:e.feedCommentCount,handleCommentInput:e.handleCommentInput}})],1),e._v(" "),i("div",{staticClass:"tool-item"},[i("feed-view",{attrs:{feedID:e.feed.id,viewFeed:e.viewFeed,count:e.feedViewCount}})],1),e._v(" "),i("div",{staticClass:"tool-item"},[i("MoreIcon",{attrs:{width:"21",height:"21",color:"#999"},nativeOn:{click:function(t){e.handleShowPopup()}}})],1)]),e._v(" "),i("feed-comments",{attrs:{typing:e.typing,feedID:e.feed.id,comments:e.feed.comments,handleComment:e.handleComment,handleCommentInput:e.handleCommentInput,handleDeleteComment:e.handleDeleteComment}})],1)},staticRenderFns:[]};var J=i("VU/8")(Q,H,!1,function(e){i("Gidt")},null,null).exports,W=(Object(u.a)(i("LZDu")),{name:"feed",components:{FeedImages:l.a,CommentsTool:r.a,"feed-tools":J},props:["feed"],data:function(){return{goldName:window.TS_WEB.goldName,user:{}}},methods:{changeUrl:p.a,toFeedDetail:function(e){var t=this;!this.feed.paid_node||this.feed.paid_node.paid?this.changeUrl("/feed/"+e):this.$Modal.confirm({title:"付费支付",content:"<p>需要支付"+Object(y.a)(this.feed.paid_node.amount)+this.goldName+"</p>",okText:"确认支付",loading:!0,onOk:function(){Object(c.a)().post(Object(c.b)("purchases/"+t.feed.paid_node.node),{validateStatus:function(e){return 201===e}}).then(function(){t.$Modal.remove(),t.$Message.success("支付成功"),t.$store.getters[v.y][e].paid_node.paid=!0,setTimeout(function(){t.changeUrl("/feed/"+e)},800)}).catch(function(e){var i=e.response,a=(i=void 0===i?{}:i).data;i.status;t.$Modal.remove(),t.$Message.error(t.$MessageBundle(a).getMessage())})}})},timers:d.a,router:function(e){m.a.push(e)},upvote:function(e){var t=this,i="like"===e?"POST":"DELETE",a="POST"===i?"feeds/"+this.feed.id+"/like":"feeds/"+this.feed.id+"/unlike";Object(c.a)()({method:i,url:Object(c.b)(a)}).then().catch(function(e){var i=e.response,a=(i=void 0===i?{}:i).data,n=void 0===a?{message:"点赞失败"}:a;t.$Message.error(t.$MessageBundle(n).getMessage())})},handleComment:function(e){var t=e.content,i=e.reply_user,a=e.success,n=e.error;if(!t)return this.$Message.warning("评论内容不能为空"),!1;var s=(new Date).getTime()+""+this.user.id,l=i?{body:t,reply_user:i,group_post_comment_mark:s}:{body:t,group_post_comment_mark:s};Object(c.a)().post(Object(c.b)("feeds/"+this.feed.id+"/comments"),o()({},l)).then(function(e){var t=e.data.comment;a(t)}).catch(function(e){n(e)})},handleCollection:function(e){var t=this,i="collection"===e?"POST":"DELETE",a="POST"===i?"feeds/"+this.feed.id+"/collections":"feeds/"+this.feed.id+"/uncollect";Object(c.a)()({method:i,url:Object(c.b)(a),validateStatus:function(e){return 201===e||204===e}}).then(function(e){t.feed.has_collection=!t.feed.has_collection,t.$Message.success("POST"===i?"收藏成功":"取消收藏成功")}).catch(function(e){var i=e.response.data,a=void 0===i?{message:"操作失败, 请刷新后重试"}:i;t.$Message.error(t.$MessageBundle(a).getMessage())})},viewFeed:function(e){this.changeUrl("/feed/"+e)},deleteFeed:function(){var e=this,t=Object(c.b)("feeds/"+this.feed.id);Object(c.a)().delete(t).then(function(t){e.updateList()}).catch(function(t){var i=t.response.data,a=void 0===i?{message:"删除动态失败, 请刷新后重试"}:i;e.$Message.error(e.$MessageBundle(a).getMessage())})},deleteComment:function(e){var t=this,i=Object(c.b)("feeds/"+this.feed.id+"/comments/"+e);Object(c.a)().delete(i).then(function(e){console.log(e)}).catch(function(e){var i=e.response.data,a=void 0===i?{message:"删除评论失败, 请刷新后重试"}:i;t.$Message.error(t.$MessageBundle(a).getMessage())})},pinnedComment:function(e){var t=this,i=e.id,a=e.day,n=e.amount,s=e.callback;i&&Object(c.a)().post(Object(c.b)("feeds/"+this.feed.id+"/comments/"+i+"/pinneds"),{day:a,amount:n}).then(function(e){var i=e.data;t.$Message.info(t.$MessageBundle(i).getMessage()),s()}).catch(function(e){var i=e.response,a=(i=void 0===i?{}:i).data,n=void 0===a?{message:"操作失败, 请刷新后重试"}:a;t.$Message.error(t.$MessageBundle(n).getMessage()),s()})},pinnedFeed:function(e){var t=this,i=e.id,a=e.day,n=e.amount,s=e.callback;i&&Object(c.a)().post(Object(c.b)("feeds/"+this.feed.id+"/pinneds"),{day:a,amount:n}).then(function(e){var i=e.data;t.$Message.info(t.$MessageBundle(i).getMessage()),s()}).catch(function(e){var i=e.response,a=(i=void 0===i?{}:i).data,n=void 0===a?{message:"操作失败, 请刷新后重试"}:a;t.$Message.error(t.$MessageBundle(n).getMessage()),s()})}},computed:o()({sex:function(){return this.user.sex},avatar:function(){return this.user.avatar},isOwn:function(){return this.feed.user_id===window.TS_WEB.currentUserId},isDigg:function(){return this.feed.has_like},has_collection:function(){return this.feed.has_collect},timer:function(){return this.timers(this.feed.created_at,8,!1)}},Object(f.c)({commentFeed:function(e){return e.commentInput.commentFeed},showPopup:function(e){return e.commentInput.showPopup}})),created:function(){var e=this;this.$store.dispatch("GET_USER_BY_ID",this.feed.user_id).then(function(t){e.user=t[0]},function(e){console.log(e)})}}),X={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{class:e.$style.detail,attrs:{id:"feed-"+e.feed.id}},[i("section",{staticStyle:{display:"flex","align-items":"flex-start"}},[i("div",{class:e.$style.detailAvatar},[i("user-avatar",{attrs:{sex:e.sex,src:e.avatar,size:"small"},nativeOn:{click:function(t){e.changeUrl("/users/feeds/"+e.user.id)}}})],1),e._v(" "),i("section",{staticStyle:{padding:"0 2vw",width:"86vw"}},[i("section",{class:e.$style.detailContentBefore},[i("router-link",{class:e.$style.detailUsername,attrs:{to:"/users/feeds/"+e.user.id}},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e._v(" "),i("div",[e.feed.pinned>0?i("i",{staticClass:"pinned-icon"},[e._v("置顶")]):e._e(),e._v(" "),i("timeago",{class:e.$style.detailTimer,attrs:{since:e.timer,locale:"zh-CN","auto-update":60}})],1)],1),e._v(" "),i("figure",{class:e.$style.detailFeedContent,on:{click:function(t){t.stopPropagation(),e.toFeedDetail(e.feed.id)}}},[i("p",{class:e.$style.detailContent,domProps:{innerHTML:e._s(e.feed.feed_content?e.feed.feed_content.replace(/\n/g,"<br/>"):e.feed.feed_content)}}),e._v(" "),i("FeedImages",{directives:[{name:"show",rawName:"v-show",value:e.feed.images.length,expression:"feed.images.length"}],attrs:{storages:e.feed.images,feed:e.feed.id}})],1)])]),e._v(" "),i("div",{staticClass:"feed-footer"},[i("feed-tools",{attrs:{user:e.user,feed:e.feed,isOwn:e.isOwn,isDigg:e.isDigg,has_collection:e.has_collection,openInput:e.feed.id==e.commentFeed,upvote:e.upvote,viewFeed:e.viewFeed,handleComment:e.handleComment,handleCollection:e.handleCollection,deleteFeed:e.deleteFeed,deleteComment:e.deleteComment,pinnedComment:e.pinnedComment,pinnedFeed:e.pinnedFeed}})],1)])},staticRenderFns:[]};var Z=i("VU/8")(W,X,!1,function(e){this.$style=i("1OOR"),i("GBHx")},null,null).exports,K=i("J7Ch"),ee=i("5bRs"),te=i("DQCr"),ie=i.n(te),ae=Object(u.a)(i("zpr1")),ne={data:function(){return{channelId:0,channelInfo:{},feedsLists:[],max_id:0,bottomAllLoaded:!1,topAllLoaded:!1,bottomStatus:"",topStatus:"",showSpinner:!0}},created:function(){var e=this,t=this.$route.params.id;this.channelId=t,Object(c.a)().get(Object(c.c)("channel/"+t),{},{validateStatus:function(e){return 200===e}}).then(function(t){e.channelInfo=o()({},t.data.data)}),Object(c.a)().get(Object(c.c)("channels/"+t+"/feeds"),{},{validateStatus:function(e){return 200===e}}).then(function(t){var i=t.data.data;i.length<15&&(e.bottomAllLoaded=!0),i.length&&(e.max_id=i[i.length-1].feed.feed_id),e.feedsLists=[].concat(n()(i)),e.$refs.loadmoreChannelFeeds&&setTimeout(function(){e.$refs.loadmoreChannelFeeds.onTopLoaded()},800)})},methods:{goTo:p.b,showPost:function(){var e=this;this.$store.dispatch(v.X,function(t){t({show:!0,channelId:e.channelId})})},bottomStatusChange:function(e){this.bottomStatus=e},loadTop:function(){var e=this;Object(c.a)().get(Object(c.c)("channels/"+this.channelId+"/feeds"),{},{validateStatus:function(e){return 200===e}}).then(function(t){var i=t.data.data;i.length&&i.reverse().forEach(function(t){-1===e.feedsLists.findIndex(function(e){return e.feed.feed_id==t.feed.feed_id})&&e.feedsLists.unshift(t)}),e.$refs.loadmoreChannelFeeds&&setTimeout(function(){e.$refs.loadmoreChannelFeeds.onTopLoaded()},800)})},loadBottom:function(){var e=this;!this.max_id>1||Object(c.a)().get(Object(c.c)("channels/"+this.channelId+"/feeds?max_id="+this.max_id),{},{validateStatus:function(e){return 200===e}}).then(function(t){var i=t.data.data,a=i.length;a&&(e.feedsLists=[].concat(n()(e.feedsLists),n()(i))),a<15&&(e.bottomAllLoaded=!0),e.max_id=i[a-1].feed.feed_id,e.$refs.loadmoreChannelFeeds&&setTimeout(function(){e.$refs.loadmoreChannelFeeds.onBottomLoaded()})})}},computed:{nothing:function(){return!this.feedsLists.length&&ae},bgImage:function(){var e=this.channelInfo.cover,t=(e=void 0===e?{}:e).id,i=void 0===t?0:t;return i?"background: url("+ie()(Object(c.c)("files/"+i),{w:100,h:100})+");background-size:cover;filter:blur(50px);":""},avatar:function(){var e=this.channelInfo.cover,t=(e=void 0===e?{}:e).id,i=void 0===t?0:t;return i?ie()(Object(c.c)("files/"+i),{w:100,h:100}):""}},components:{BackIcon:K.a,Feed:Z,PlusIcon:ee.a}},se={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"channelfeeds"},[i("section",{staticClass:"channelInfo"},[i("p",{staticClass:"back"},[i("BackIcon",{attrs:{height:"30",width:"30",color:"#fff"},nativeOn:{click:function(t){e.goTo(-1)}}})],1),e._v(" "),i("section",{staticClass:"info"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"avatar"}],staticClass:"cover",attrs:{alt:e.channelInfo.title}}),e._v(" "),i("section",{staticClass:"detailInfo"},[i("section",[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"avatar"}],attrs:{alt:e.channelInfo.title}}),e._v(" "),i("h4",[e._v(e._s(e.channelInfo.title))]),e._v(" "),i("p",[e._v(e._s(e.channelInfo.description))]),e._v(" "),i("section",[e._v("\n            订阅 "),i("i",[e._v(e._s(e.channelInfo.follow_count))]),e._v("\n            分享 "),i("i",[e._v(e._s(e.channelInfo.feed_count))])])])])])]),e._v(" "),i("section",{staticClass:"feedsLists"},[e.nothing?i("div",{staticClass:"nothingDefault"},[i("img",{attrs:{src:e.nothing}})]):i("mt-loadmore",{ref:"loadmoreChannelFeeds",attrs:{"bottom-method":e.loadBottom,"top-method":e.loadTop,"bottom-all-loaded":e.bottomAllLoaded,"top-all-loaded":e.topAllLoaded,bottomDistance:70},on:{"bottom-status-change":e.bottomStatusChange}},[i("ul",{staticClass:"feed-list"},e._l(e.feedsLists,function(e,t){return i("Feed",{key:e.feed.feed_id,attrs:{feed:e}})})),e._v(" "),i("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[e.bottomAllLoaded?i("span",[e._v("没有更多了")]):i("section",[i("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===e.bottomStatus&&!e.bottomAllLoaded,expression:"bottomStatus === 'pull' && !bottomAllLoaded"}],class:{rotate:"drop"===e.topStatus}},[e._v("上拉加载更多")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===e.bottomStatus,expression:"bottomStatus === 'loading'"}]},[e._v("加载中...")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===e.bottomStatus&&!e.bottomAllLoaded,expression:"bottomStatus === 'drop' && !bottomAllLoaded"}]},[e._v("释放加载更多")])])])])],1)])},staticRenderFns:[]};var oe=i("VU/8")(ne,se,!1,function(e){i("/3Xo")},"data-v-65ff31b9",null);t.default=oe.exports},VWCR:function(e,t){},jE7p:function(e,t){e.exports={FeedImages:"_1Z8JkeSoN1c26eYzdnizfM_1",imagesRow:"_2EedTpkWAQn3CV2QNr7lVg_1",imgParent:"_3mEM5fD8H08107RObqkYka_1",showImgBox:"_3GotfkTXWkpH9DP54Nk-cz_1",perFeedImg:"_2GLYLNx0Y-I3Hq6-_qQ_2Q_1"}},sLRm:function(e,t){},uq6Z:function(e,t,i){"use strict";var a={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24},color:{type:String,default:"#000"}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticStyle:{display:"inherit"},attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width,fill:this.color}},[t("g",[t("path",{staticClass:"st0",attrs:{d:"M12,6.1c4.2,0,8,2.3,10.1,5.9c-2,3.6-5.9,5.9-10.1,5.9c-4.2,0-8-2.3-10.1-5.9C4,8.4,7.8,6.1,12,6.1L12,6.1z\n   M12,5.3C7.2,5.3,3,8,1,12c2,4,6.2,6.7,11,6.7S21,16,23,12C21,8,16.8,5.3,12,5.3L12,5.3"}}),this._v(" "),t("path",{staticClass:"st0",attrs:{d:"M12,8.8c1.8,0,3.3,1.4,3.3,3.2s-1.5,3.2-3.3,3.2S8.7,13.8,8.7,12S10.2,8.8,12,8.8L12,8.8z M12,8\n  c-2.3,0-4.1,1.8-4.1,4s1.9,4,4.1,4c2.3,0,4.1-1.8,4.1-4S14.3,8,12,8L12,8"}})])])},staticRenderFns:[]},s=i("VU/8")(a,n,!1,null,null,null);t.a=s.exports},"w1/K":function(e,t,i){"use strict";var a=i("PM1u"),n=i("DQCr"),s=i.n(n),o=i("0IX3"),c=i("TEao"),l=Object(c.a)(i("Pg7H")),r=Object(c.a)(i("05K8")),d={components:{LockIcon:o.a},props:{square:{type:Boolean,default:!1},single:{type:Boolean,default:!1}},computed:{defaultImage:function(){return this.square?l:r}}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:{locked:!this.single,singleLocked:this.single}},[this.square?t("section",{staticClass:"square"},[t("img",{attrs:{src:this.defaultImage}}),this._v(" "),t("div",[t("LockIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1)]):t("section",{staticClass:"notSquare"},[t("img",{attrs:{src:this.defaultImage,alt:""}}),this._v(" "),t("div",[t("LockIcon",{attrs:{height:"24",width:"24",color:"#fff"}})],1)])])},staticRenderFns:[]};var u=i("VU/8")(d,m,!1,function(e){i("sLRm")},"data-v-569a7896",null).exports,h=i("vLgD"),g=i("Y4FN"),p=i.n(g),f=i("bcRl"),v=((p.a.get("UserLoginInfo")||{}).token,{data:function(){return{open:!1,amount:0,token:"",goldName:window.TS_WEB.goldName}},components:{LockedImage:u},props:["storages","feed"],computed:{imageSize:function(){return this.storages.length},imageHeight:function(){if(1===this.storages.length){var e=this.imageObject[0].width/this.imageObject[0].height;return(parseInt(68/e)>80?80:parseInt(68/e))+"vw"}},imageObject:function(){var e=this;return this.storages.map(function(t){return t.paid_node&&!t.paid?{paid:!1,paid_node:t.paid_node,amount:t.amount,url:s()(Object(h.b)("files/"+t.file),{w:250,h:250,token:e.token})}:{paid:!0,paid_node:t.paid_node,amount:t.amount,url:s()(Object(h.b)("files/"+t.file),{w:300,h:300,token:e.token})}})}},methods:{showSwiper:function(e){var t=this,i=[];this.imageObject.forEach(function(e){e.url&&(e.url=e.url.replace(/\?.*/,"")),i.push(e)}),this.$store.dispatch(a.F,function(a){a({list:i,value:e,show:!0,source:t.feed,sourceType:"feed"})})},showPayDialog:function(e,t){var i=this;this.$Modal.confirm({title:"付费支付",content:"<p>需要支付 "+Object(f.a)(e.amount)+this.goldName+" </p>",okText:"确认支付",loading:!0,onOk:function(){Object(h.a)().post(Object(h.b)("purchases/"+e.paid_node),{validateStatus:function(e){return 201===e}}).then(function(){i.$Modal.remove(),i.$Message.success("支付成功"),i.storages[t].paid=!0,setTimeout(function(){i.showSwiper(t)},800),i.$store.getters[a.y][i.feed].images[t].paid=!0}).catch(function(e){var t=e.response;(t=void 0===t?{}:t).data,t.status;i.$Modal.remove(),i.$Message.error("")})}})}},created:function(){var e=(this.$storeLocal.get("UserLoginInfo")||{}).token,t=void 0===e?"":e;this.token=t}}),y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticStyle:{width:"68vw",position:"relative","margin-bottom":"8px",display:"inherit"}},[1==e.imageSize?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],style:"width: 100%; height: "+e.imageHeight+"; object-fit: cover; max-height: 80vw;",on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}}):e._e(),e._v(" "),2==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})])]):e._e(),e._v(" "),3==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})])]):e._e(),e._v(" "),4==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})])]):e._e(),e._v(" "),5==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"66.6666%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{staticStyle:{width:"33.3333%"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"100%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"100% padding-bottom: 2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})])]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"34vw"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[4].url,expression:"imageObject[4].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[4].paid?e.showSwiper(4):e.showPayDialog(e.imageObject[4],4)}}})])]):e._e(),e._v(" "),6==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"66.6666%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{staticStyle:{width:"33.3333%"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"100%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"100% padding-bottom: 2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})])]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[4].url,expression:"imageObject[4].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[4].paid?e.showSwiper(4):e.showPayDialog(e.imageObject[4],4)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[5].url,expression:"imageObject[5].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[5].paid?e.showSwiper(5):e.showPayDialog(e.imageObject[5],5)}}})])]):e._e(),e._v(" "),7==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{staticStyle:{width:"34vw"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})])]),e._v(" "),i("div",{staticStyle:{width:"34vw",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"100%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[4].url,expression:"imageObject[4].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[4].paid?e.showSwiper(4):e.showPayDialog(e.imageObject[4],4)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[5].url,expression:"imageObject[5].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[5].paid?e.showSwiper(5):e.showPayDialog(e.imageObject[5],5)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[6].url,expression:"imageObject[6].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[6].paid?e.showSwiper(6):e.showPayDialog(e.imageObject[6],6)}}})])])]):e._e(),e._v(" "),8==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"50%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[4].url,expression:"imageObject[4].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[4].paid?e.showSwiper(4):e.showPayDialog(e.imageObject[4],4)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[5].url,expression:"imageObject[5].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[5].paid?e.showSwiper(5):e.showPayDialog(e.imageObject[5],5)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[6].url,expression:"imageObject[6].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[6].paid?e.showSwiper(6):e.showPayDialog(e.imageObject[6],6)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[7].url,expression:"imageObject[7].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[7].paid?e.showSwiper(7):e.showPayDialog(e.imageObject[7],7)}}})])]):e._e(),e._v(" "),9==e.imageSize?i("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[0].url,expression:"imageObject[0].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[0].paid?e.showSwiper(0):e.showPayDialog(e.imageObject[0],0)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[1].url,expression:"imageObject[1].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[1].paid?e.showSwiper(1):e.showPayDialog(e.imageObject[1],1)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%","padding-bottom":"2px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[2].url,expression:"imageObject[2].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[2].paid?e.showSwiper(2):e.showPayDialog(e.imageObject[2],2)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[3].url,expression:"imageObject[3].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[3].paid?e.showSwiper(3):e.showPayDialog(e.imageObject[3],3)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[4].url,expression:"imageObject[4].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[4].paid?e.showSwiper(4):e.showPayDialog(e.imageObject[4],4)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[5].url,expression:"imageObject[5].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[5].paid?e.showSwiper(5):e.showPayDialog(e.imageObject[5],5)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[6].url,expression:"imageObject[6].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[6].paid?e.showSwiper(6):e.showPayDialog(e.imageObject[6],6)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[7].url,expression:"imageObject[7].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[7].paid?e.showSwiper(7):e.showPayDialog(e.imageObject[7],7)}}})]),e._v(" "),i("div",{class:e.$style.showImgBox,staticStyle:{width:"33.3333%"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageObject[8].url,expression:"imageObject[8].url"}],class:e.$style.perFeedImg,on:{click:function(t){t.stopPropagation(),e.imageObject[8].paid?e.showSwiper(8):e.showPayDialog(e.imageObject[8],8)}}})])]):e._e()])},staticRenderFns:[]};var w=i("VU/8")(v,y,!1,function(e){i("yll6"),this.$style=i("jE7p")},"data-v-75691f50",null);t.a=w.exports},xgYI:function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),s=i("Dd8w"),o=i.n(s),c=i("LOoJ"),l=i("vLgD"),r=(i("YaEn"),i("ckCO")),d=i("PM1u"),m=i("M4fF"),u=i.n(m),h={props:["feed"],components:{Comfirm:r.a},data:function(){return{more:!1,replyToUserId:0,toFeed:0,sending:!1,deleteData:{}}},methods:{focusInput:function(e){var t=this.$storeLocal.get("user_"+e),i="",a=this.feed,n=e;u.a.keys(t).length?i=t.name:Object(c.d)(e,30).then(function(e){i=(t=e).name}),this.$store.dispatch(d.u,function(e){e({data:{show:!0,reply_to_user_id:n,to_user_name:i,feed:a}})})},showComfirm:function(e,t,i){var a=this;this.$store.dispatch(d.v,function(n){n({show:!0,confirmContent:"删除动态",data:{comment_id:e,feed_id:t,index:i},confirm:a.deleteComment})})},deleteComment:function(e,t){var i=this,a=this.feed;Object(l.a)().delete(Object(l.b)("feeds/"+t.feed_id+"/comment/"+t.comment_id),{},{validateStatus:function(e){return 204===e}}).then(function(e){a.comments.splice(t.index,1),a.tool.feed_comment_count-=1,i.$store.dispatch(d._6,function(e){return e({feed:a})})})},getUserName:function(e){var t=this.users["user_"+e],i=(t=void 0===t?{}:t).name;return void 0===i?"":i}},computed:{hasMore:function(){return this.feed.comments.length>2},users:function(){return this.$store.getters[d._8]},currentUser:function(){return this.$storeLocal.get("UserLoginInfo")},commentsData:function(){return this.feed.comments}},created:function(){var e={};this.feed.comments.forEach(function(t,i){var a;t.reply_to_user_id?e=o()({},e,(a={},n()(a,t.user_id,t.user_id),n()(a,t.reply_to_user_id,t.reply_to_user_id),a)):e=o()({},e,n()({},t.user_id,t.user_id))});var t=u.a.values(e);this.$store.dispatch(d._8,function(e){return Object(c.e)(t).then(function(t){return e(t)})})}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"padding-top":"2wv"}},[i("ul",e._l(e.commentsData,function(t,a){return a<3?i("li",{key:t.id},[i("p",[t.user_id?i("router-link",{class:e.$style.userName,attrs:{to:{path:"/users/feeds/"+t.user_id}}},[e._v("\n          "+e._s(e.getUserName(t.user_id))+"\n        ")]):e._e(),e._v(" "),t.reply_to_user_id?i("span",{class:e.$style.commentContent},[e._v("\n          回复\n        ")]):e._e(),e._v(" "),t.reply_to_user_id?i("router-link",{class:e.$style.userName,attrs:{to:{path:"/users/feeds/"+t.reply_to_user_id}}},[e._v(e._s(e.getUserName(t.reply_to_user_id)))]):e._e(),e._v(" "),t.user_id!=e.currentUser.user_id?i("span",{class:e.$style.commentContent,on:{click:function(i){i.stopPropagation(),e.focusInput(t.user_id)}}},[e._v("\n         : "+e._s(t.body)+"\n        ")]):e._e(),e._v(" "),t.user_id==e.currentUser.user_id?i("span",{class:e.$style.commentContent,on:{click:function(i){i.stopPropagation(),e.showComfirm(t.id,e.feed.feed.feed_id,a)}}},[e._v("\n         : "+e._s(t.body)+"\n        ")]):e._e()],1)]):e._e()})),e._v(" "),e.hasMore?i("router-link",{class:e.$style.userName,attrs:{to:"/feed/"+e.feed.feed.feed_id}},[e._v("查看全部评论")]):e._e()],1)},staticRenderFns:[]};var p=i("VU/8")(h,g,!1,function(e){this.$style=i("zHLR")},null,null);t.a=p.exports},yll6:function(e,t){},zHLR:function(e,t){e.exports={userName:"_3yMUwUj4FQL2q8f5jlVLRK_0",commentContent:"_3XHVf0UVk_7app3G_bCBVH_0"}}});
//# sourceMappingURL=7.622620ba67cc2cacf7da.js.map