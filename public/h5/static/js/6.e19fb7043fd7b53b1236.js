webpackJsonp([6],{"285E":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("Gu7T"),n=e.n(i),a=e("lHA8"),s=e.n(a),l=e("c/Tr"),c=e.n(l),r=e("vLgD"),h=e("y8Z/"),d=e("TEao"),u=Object(d.a)(e("zpr1")),f={name:"FindNear",components:{FindPersonItem:h.a},data:function(){return{list:[],nothingImg:u,showSpinner:!0,topAllLoaded:!1,bottomAllLoaded:!1,LocationObj:{lng:0,lat:0}}},computed:{latitude:function(){return this.LocationObj.lat},longitude:function(){return this.LocationObj.lng}},methods:{loadData:function(t){var o=this;if(this.showSpinner=!0,this.LocationObj=this.$storeLocal.get("LocationObj")||{lng:0,lat:0},this.latitude+this.longitude===0)return this.showSpinner=!1;var e={limit:10,offset:this.list.length,latitude:this.latitude,longitude:this.longitude};Object(r.a)().get(Object(r.b)("around-amap"),{params:e}).then(function(e){var i=e.data,a=void 0===i?[]:i;o.showSpinner=!1,o.list=t?c()(new s.a([].concat(n()(a),[o.list]))):[].concat(n()(a))}).catch(function(t){console.log(t),o.showSpinner=!1})},loadTop:function(){var t=this;this.loadData(),setTimeout(function(){t.$refs.loadMore.onTopLoaded()},700)},loadBottom:function(){var t=this;this.loadData(!0),setTimeout(function(){t.$refs.loadMore.onBottomLoaded()},700)}},created:function(){this.$bus.on("UpdateLocation",this.loadData),this.loadData()}},p={render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"$style.FindNear"},[this.showSpinner?o("div",{attrs:{id:"spinner"}},[this._m(0)]):this._e(),this._v(" "),o("mt-loadmore",{ref:"loadMore",attrs:{autoFill:!1,bottomDistance:50,"top-method":this.loadTop,"bottom-method":this.loadBottom,"top-all-loaded":this.topAllLoaded,"bottom-all-loaded":this.bottomAllLoaded,bottomPullText:"上拉加载更多",bottomDropText:"释放加载更多"}},[this.list.length>0?o("ul",{staticStyle:{"background-color":"#fff"}},this._l(this.list,function(t,e){return o("FindPersonItem",{key:e,attrs:{item:t}})})):o("div",{class:this.$style.nothing},[o("img",{attrs:{src:this.nothingImg,alt:"空空如也"}})])])],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{attrs:{id:"spinner-parent"}},[o("div",{staticClass:"spinner-double-bounce-bounce2"}),this._v(" "),o("div",{staticClass:"spinner-double-bounce-bounce1"})])}]};var v=e("VU/8")(f,p,!1,function(t){this.$style=e("IR8t")},null,null);o.default=v.exports},"5jYE":function(t,o){},"6paY":function(t,o){},IR8t:function(t,o){t.exports={nothing:"_1Jarzp8qXOIypiLay191tp_0",findItem:"_1CZ8Uw_ZN4LrkGhngo9UES_0",itemHeader:"_1Xdiu9zHMOaYwaO3Qa00Fd_0",iteminfo:"_38yINb5zJjEmncd4BGFulN_0",itemName:"_3LdhneVo54RiZoySZZdFk2_0",itemBio:"_3fim3wc7sq6R4iBDE2BOaE_0",itemFollow:"P53C5i7YEaNxsJe5dlA3M_0"}},LFX2:function(t,o){t.exports={nothing:"_89RxC_PHj-yutFdnWOI_d_0"}},NIE6:function(t,o){},RVWT:function(t,o){},Vx8H:function(t,o){t.exports={nothing:"_3_BN8ab01USQDXey0Za20U_0",bottmAll:"_2Di5ddHDziwME49w3YmfyX_0"}},WSFD:function(t,o){t.exports={findItem:"Hr67czNStAW_cl5jhiTv2_0",iteminfo:"_14nH5tMjEIkqL5w1n5jr3h_0",itemName:"Ha8XR_Y8Ivcf-2rif5IF5_0",itemBio:"MBc5hAWe_QvvPRG0n8X-8_0",itemFollow:"_1Vc2qQRBt7MhZwyKgKsmHt_0"}},"Yh7+":function(t,o,e){"use strict";var i=function(){},n=window.AMap;o.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.success,e=void 0===o?i:o,a=t.error,s=void 0===a?i:a;if(n){var l=new n.Map("iCenter");l.plugin("AMap.Geolocation",function(){var t=new n.Geolocation({enableHighAccuracy:!0,timeout:2e4,GeoLocationFirst:!0,convert:!0});l.addControl(t),t.getCurrentPosition(),n.event.addListener(t,"complete",e),n.event.addListener(t,"error",function(t){s(function(t){switch(t.code){case t.TIMEOUT:return"获取定位信息超时，请手动选择城市";case t.POSITION_UNAVAILABLE:return"定位失败，当前位置信息不可用，请稍后重试";case t.PERMISSION_DENIED:return"定位失败，系统拒绝了定位请求，请打开GPS定位功能";case t.UNKNOWN_ERROR:return"定位失败，出现未知错误";default:return t}}(t))})})}else s("你的浏览器不支持定位")}},b75W:function(t,o,e){"use strict";var i=e("Gu7T"),n=e.n(i),a=e("lHA8"),s=e.n(a),l=e("c/Tr"),c=e.n(l),r=e("POJD"),h=e("Yga2"),d=e("vLgD"),u={name:"searchPop",props:{lockScroll:{type:Boolean,default:!1},value:{type:Boolean,default:!1},position:{type:String,default:"left"},searchUrl:String,searchList:Object,searchfor:{type:String,required:!0}},components:{Search:r.a,CloseIcon:h.a},data:function(){return{isopen:this.value,keyword:"",dataList:[],topAllLoaded:!1,bottomAllLoaded:!1}},computed:{keywordCount:function(){return this.keyword.length>0}},watch:{value:function(t){this.isopen=t},isopen:function(t){this.$emit("input",t)}},methods:{loadTop:function(){var t=this;this.doSearch(),setTimeout(function(){t.$refs.loadMore.onTopLoaded()},700)},loadBottom:function(){var t=this;this.doSearch(!0),setTimeout(function(){t.$refs.loadMore.onBottomLoaded()},700)},doSearch:function(t){var o=this;if(this.searchUrl&&this.keywordCount){var e={limit:10,offset:t?this.dataList.length:0};this.$storeLocal.set("search_"+this.searchfor,this.keyword),d.e.get(Object(d.b)(this.searchUrl+this.keyword),{params:e}).then(function(i){var a=i.data,l=void 0===a?[]:a;o.bottomAllLoaded=l.length<e.limit,o.dataList=t?c()(new s.a([].concat(n()(o.dataList),n()(l)))):[].concat(n()(l))}).catch(function(t){console.log(t)})}},cleanKeyword:function(){this.keyword="",this.dataList=[]},closeSearch:function(){this.isopen=!1,this.cleanKeyword(),this.$storeLocal.remove("search_"+this.searchfor)}},created:function(){this.keyword=this.$storeLocal.get("search_"+this.searchfor)||"",this.keyword&&this.doSearch()}},f={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("mt-popup",{class:t.$style.searchPop,attrs:{position:t.position,modal:!1,lockScroll:t.lockScroll},model:{value:t.isopen,callback:function(o){t.isopen=o},expression:"isopen"}},[t._t("header",[e("header",{class:t.$style.searchHeader},[e("Row",{attrs:{gutter:12}},[e("Col",{staticStyle:{positoin:"relative"},attrs:{span:"20"}},[e("Input",{class:t.$style.plr20,attrs:{placeholder:"搜索",autofocus:!0},on:{"on-enter":function(o){t.doSearch()}},model:{value:t.keyword,callback:function(o){t.keyword=o},expression:"keyword"}}),t._v(" "),e("Search",{staticStyle:{position:"absolute",top:"50%",left:"15px","margin-top":"-10px"},attrs:{height:"20",width:"20",color:"#999"}}),t._v(" "),t.keywordCount?e("CloseIcon",{staticStyle:{position:"absolute",top:"13px",right:"15px"},attrs:{height:"20",width:"20",color:"#999"},nativeOn:{click:function(o){t.cleanKeyword()}}}):t._e()],1),t._v(" "),e("Col",{staticStyle:{color:"#59b6d7","text-align":"center"},attrs:{span:"4"},nativeOn:{click:function(o){t.closeSearch(o)}}},[t._v("取消")])],1)],1)]),t._v(" "),e("div",{class:t.$style.searchContent},[t._t("default",[e("mt-loadmore",{ref:"loadMore",attrs:{bottomDistance:70,"top-method":t.loadTop,"bottom-method":t.loadBottom,"top-all-loaded":t.topAllLoaded,"bottom-all-loaded":t.bottomAllLoaded,autoFill:!1,bottomPullText:"上拉加载更多",bottomDropText:"释放加载更多"}},[e(t.searchList,{tag:"component",attrs:{datas:t.dataList,keyword:t.keyword},on:{closeSearch:t.closeSearch}})],1)],{keyword:t.keyword,datas:t.dataList})],2)],2)},staticRenderFns:[]};var p=e("VU/8")(u,f,!1,function(t){this.$style=e("uhbi")},null,null);o.a=p.exports},oOLY:function(t,o){},uWHh:function(t,o,e){"use strict";var i=e("Gu7T"),n=e.n(i),a=e("d7EF"),s=e.n(a),l={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24}}},c={render:function(){var t=this.$createElement,o=this._self._c||t;return o("svg",{attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width}},[o("g",[o("path",{staticClass:"st8",attrs:{d:"M13.6,23L23,1L1,10.4l10.7,1.9L13.6,23z M13.6,23"}})]),this._v(" "),o("g",[o("path",{staticClass:"st9",attrs:{d:"M12,12L23,1L1,10.4l10.7,1.9L12,12z"}})])])},staticRenderFns:[]};var r=e("VU/8")(l,c,!1,function(t){e("NIE6")},"data-v-339885b8",null).exports,h=e("v0mh"),d=e("Yh7+"),u=e("PM1u"),f=e("vLgD"),p=e("TEao"),v=Object(p.a)(e("zpr1")),m={name:"SearchCity",props:{keyword:String,datas:Array},components:{Location2:r,LoadingBlack:h.a},data:function(){return{locationing:!0,location:{city:"",lat:null,lng:null},hotCityList:[],nothingImg:v}},computed:{showHotList:function(){return!(this.keyword.length>0||this.datas.length>0)},formatList:function(){return this.datas.map(function(t,o){var e="";for(t=t.tree;t;)e=t.name+","+e,t=t.parent;return e.substr(0,e.length-1)})}},methods:{getLocation:function(){this.locationing=!0,this.$storeLocal.remove("LocationObj");Object(d.a)({success:this.locationSuccess,error:this.locationError})},locationSuccess:function(t){this.locationing=!1;var o=t.addressComponent,e=(o=void 0===o?{}:o).city,i=void 0===e?"":e,n=o.street,a=void 0===n?"":n,s=o.streetNumber,l=void 0===s?"":s,c=t.position,r=(c=void 0===c?{}:c).lat,h=void 0===r?"":r,d=c.lng,u=void 0===d?"":d;this.location={lat:h,lng:u,city:a?a+l:i},this.$storeLocal.set("LocationObj",this.location)},locationError:function(t){this.locationing=!1,this.$store.dispatch(u.N,function(o){o({show:!0,time:2e3,status:!1,text:t})})},selectCity:function(t){var o=this;t!==this.city&&f.e.get(Object(f.b)("around-amap/geo?address="+t.replace(/[\s\uFEFF\xA0]+/g,""))).then(function(e){var i=e.data,n=(i=void 0===i?{}:i).geocodes;n=void 0===n?[]:n;var a=s()(n,1)[0],l=(a=void 0===a?{}:a).location,c=(void 0===l?"0,0":l).split(","),r=s()(c,2),h=r[0],d=r[1];o.location={city:t.split(",").reverse()[0],lng:h,lat:d},o.$storeLocal.set("LocationObj",{city:t.replace(/[\s\uFEFF\xA0]+/g,",").split(",").reverse()[0],lng:h,lat:d}),o.$emit("input",o.location.city),o.$emit("closeSearch"),o.$bus.emit("UpdateLocation")}).catch(function(t){console.log(t)})}},created:function(){var t=this,o=this.$storeLocal.get("LocationObj")||{},e=o.lat,i=o.lng,a=o.city;isNaN(e+i)||"string"!=typeof a?setTimeout(function(){t.getLocation()},500):(this.location={lat:e,lng:i,city:a},this.locationing=!1),this.showHotList&&f.e.get(Object(f.b)("locations/hots")).then(function(o){var e=o.data,i=void 0===e?[]:e;t.hotCityList=[].concat(n()(i))})}},g={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"SearchCity"},[t.showHotList?e("div",{staticClass:"hotCity"},[e("Row",{staticClass:"curLocation",attrs:{gutter:12}},[e("Col",{staticStyle:{"padding-left":"0"},attrs:{span:5}},[e("label",[t._v("当前定位")])]),t._v(" "),e("Col",{attrs:{span:15}},[e("span",{class:{c_b2b2b2:"未定位"===t.location.city}},[t._v(t._s(t.location.city||"未定位"))])]),t._v(" "),e("Col",{staticStyle:{display:"flex","text-align":"center","align-items":"center","justify-content":"center"},attrs:{span:4}},[t.locationing?e("LoadingBlack",{attrs:{height:"21",width:"21",color:"#999"}}):e("Location2",{attrs:{height:"21",width:"21",color:"#999"},nativeOn:{click:function(o){t.getLocation()}}})],1)],1),t._v(" "),e("p",{staticClass:"labelForHot"},[t._v("热门城市")]),t._v(" "),e("Row",{staticClass:"hotCityList",attrs:{gutter:12}},[e("ul",t._l(t.hotCityList,function(o,i){return e("li",{key:i,on:{click:function(e){t.selectCity(o)}}},[t._v(t._s(o))])}))])],1):[t.formatList.length>0?e("div",{staticClass:"cityList"},[e("ul",t._l(t.formatList,function(o,i){return e("li",{key:i,on:{click:function(e){t.selectCity(o)}}},[t._v(t._s(o))])}))]):e("div",{class:t.$style.nothing},[e("img",{attrs:{src:t.nothingImg,alt:"空空如也"}})])]],2)},staticRenderFns:[]};var w=e("VU/8")(m,g,!1,function(t){this.$style=e("LFX2"),e("6paY")},null,null);o.a=w.exports},uhbi:function(t,o){t.exports={plr20:"BAiHoELeRkrrqcRdW2xWb_0",searchPop:"_3yhwOi9-L_rG9ZoyncCxS6_0",searchHeader:"_2F3-rauY1ifT4tW_CgfK5o_0",searchContent:"_1F3sc2itg_rFwKtFaHlfK8_0"}},vEns:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("Gu7T"),n=e.n(i),a=e("lHA8"),s=e.n(a),l=e("c/Tr"),c=e.n(l),r=e("vLgD"),h=e("y8Z/");"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)});var d={name:"LoadMore",props:["nothingImg","URL","offsetTop"],data:function(){return{formateURL:"",dataList:[],showSpinner:!1,bottomStatus:"",topAllLoaded:!1,bottomAllLoaded:!1}},components:{FindPersonItem:h.a},methods:{loadData:function(t){var o=this,e={limit:10,offset:t?this.dataList.length:0};this.formateURL?r.e.get(Object(r.b)(this.formateURL),{params:e}).then(function(i){var a=i.data,l=void 0===a?[]:a;o.showSpinner=!1,o.bottomAllLoaded=l.length<e.limit,o.dataList=t?c()(new s.a([].concat(n()(o.dataList),n()(l)))):[].concat(n()(l))}).catch(function(t){o.dataList=[],o.showSpinner=!1,o.bottomAllLoaded=!0}):(this.dataList=[],this.showSpinner=!1,this.bottomAllLoaded=!0)},loadTop:function(){var t=this;this.loadData(),setTimeout(function(){t.$refs.loadMore.onTopLoaded()},700)},loadBottom:function(){var t=this;this.loadData(!0),setTimeout(function(){t.$refs.loadMore.onBottomLoaded()},700)}},computed:{nothing:function(){return!this.dataList.length}},watch:{URL:function(t){this.formateURL=t.endsWith("name=")?"locations/hots":t,this.showSpinner=!0,this.loadData()}},created:function(){this.URL&&(this.formateURL=this.URL.endsWith("name=")?"locations/hots":this.URL,this.dataList=[],this.offset=0,this.showSpinner=!0,this.loadData())}},u={render:function(){var t=this.$createElement,o=this._self._c||t;return this.URL?o("div",{staticStyle:{height:"100%"}},[this.showSpinner?o("div",{attrs:{id:"spinner"}},[this._m(0)]):o("mt-loadmore",{ref:"loadMore",attrs:{autoFill:!1,bottomDistance:70,"top-method":this.loadTop,"bottom-method":this.loadBottom,"top-all-loaded":this.topAllLoaded,"bottom-all-loaded":this.bottomAllLoaded,bottomPullText:"上拉加载更多",bottomDropText:"释放加载更多"}},[this.nothing&&!this.showSpinner?o("div",{class:this.$style.nothing,style:{"margin-top":this.offsetTop||0}},[o("img",{attrs:{src:this.nothingImg,alt:"空空如也"}})]):o("ul",{staticStyle:{"background-color":"#fff"}},this._l(this.dataList,function(t,e){return o("FindPersonItem",{key:e,attrs:{item:t}})})),this._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:this.bottomAllLoaded&&!this.nothing,expression:"bottomAllLoaded && !nothing"}],class:this.$style.bottmAll},[this._v("没有更多了")])])],1):this._e()},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{attrs:{id:"spinner-parent"}},[o("div",{staticClass:"spinner-double-bounce-bounce2"}),this._v(" "),o("div",{staticClass:"spinner-double-bounce-bounce1"})])}]};var f=e("VU/8")(d,u,!1,function(t){this.$style=e("Vx8H")},null,null).exports,p=e("TEao"),v=Object(p.a)(e("K80U")),m={name:"FindContent",components:{LoadMore:f},data:function(){return{datas:[{id:123}],nothingImg:v,LoadMoreURL:""}},watch:{$route:function(){this.LoadMoreURL="user/"+this.$route.params.type}},created:function(){this.LoadMoreURL="user/"+this.$route.params.type}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("LoadMore",{attrs:{nothingImg:this.nothingImg,URL:this.LoadMoreURL,offsetTop:"-91px"}})},staticRenderFns:[]},w=e("VU/8")(m,g,!1,null,null,null);o.default=w.exports},vcz1:function(t,o){t.exports={findItem:"_1bPOTz4qkZCjeDIQ4cVAn9_0",iteminfo:"_2s1oeyYo3WKDF_1ZhSjFAP_0",itemName:"PcaaRO8aDzKF04OA4hRfa_0",itemBio:"Vx516Hm0Ckv_3zMLs9ieU_0",itemFollow:"_3acvgmOMhZ14xTZZ-e-SRf_0"}},xOn0:function(t,o){t.exports={input:"_6NDA4sH1cqpJcFw72lwni_0"}},xfak:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("O3Q9"),n=e("TEao"),a=e("POJD"),s=e("J7Ch"),l={name:"ContactsIcon",props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24}}},c={render:function(){var t=this.$createElement,o=this._self._c||t;return o("svg",{attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width}},[o("g",[o("g",[o("path",{staticClass:"st5",attrs:{d:"M4.4,7L1.6,7C1.4,7,1.3,7.1,1.3,7.3v0.3c0,0.2,0.1,0.3,0.3,0.3l2.9,0h0c0.2,0,0.3-0.1,0.3-0.3V7.3\n        C4.7,7.1,4.6,7,4.4,7z"}}),this._v(" "),o("path",{staticClass:"st5",attrs:{d:"M4.4,11.7l-2.9,0c-0.2,0-0.3,0.1-0.3,0.3v0.3c0,0.2,0.1,0.3,0.3,0.3l2.9,0h0c0.2,0,0.3-0.1,0.3-0.3V12\n        C4.7,11.8,4.6,11.7,4.4,11.7z"}}),this._v(" "),o("path",{staticClass:"st5",attrs:{d:"M4.4,16.3l-2.9,0c-0.2,0-0.3,0.1-0.3,0.3v0.3c0,0.2,0.1,0.3,0.3,0.3l2.9,0h0c0.2,0,0.3-0.1,0.3-0.3v-0.3\n        C4.7,16.5,4.6,16.3,4.4,16.3z"}})]),this._v(" "),o("g",[o("path",{staticClass:"st5",attrs:{d:"M7.3,18c-0.1,0.1-0.1,0.2,0,0.3c0,0.1,0.1,0.2,0.2,0.3c0,0,0.1,0,0.2,0c0.2,0,0.3-0.1,0.4-0.3\n        c0.8-2,2.6-3.2,4.6-3.2c1.9,0,3.7,1.2,4.6,3.1c0,0.1,0.1,0.2,0.2,0.2c0.1,0,0.2,0,0.3,0c0.2-0.1,0.3-0.3,0.2-0.5\n        c-0.7-1.5-2-2.7-3.4-3.2c0.4-0.2,0.7-0.5,1.1-0.8c0.8-0.8,1.3-1.9,1.3-3.1c0-1.2-0.5-2.3-1.3-3.1c-0.8-0.8-1.9-1.3-3.1-1.3\n        c-1.2,0-2.3,0.4-3.1,1.3c-0.8,0.8-1.3,1.9-1.3,3.1c0,1.7,1,3.2,2.4,3.9c-0.4,0.2-0.8,0.4-1.2,0.6C8.5,15.9,7.8,16.9,7.3,18z\n         M12.6,7.2c0.9,0,1.8,0.4,2.5,1c0.7,0.7,1.1,1.5,1.1,2.5c0,0.9-0.4,1.8-1,2.5c-0.7,0.7-1.6,1-2.5,1c-1,0-1.9-0.4-2.5-1\n        c-0.7-0.7-1-1.5-1-2.5C9.1,8.8,10.7,7.2,12.6,7.2z"}}),this._v(" "),o("path",{staticClass:"st5",attrs:{d:"M22.4,1.6C22.2,1.2,21.8,1,21.3,1H5.5C5,1,4.3,1.2,3.8,1.6C3.2,2,2.9,2.5,2.9,3v2.4c0,0.3,0.2,0.4,0.4,0.4\n        c0.2,0,0.4-0.2,0.4-0.4V3c0-0.6,1-1.2,1.7-1.2h15.8c0.2,0,0.3,0,0.4,0.1c0.2,0.2,0.2,0.5,0.2,0.9c0,0,0,0.1,0,0.1v18\n        c0,0,0,0.1,0,0.1c0,0.4,0,0.7-0.2,0.9c-0.1,0.1-0.2,0.1-0.4,0.1H5.4c-0.6,0-1.7-0.5-1.7-1.1v-2.1c0-0.3-0.2-0.4-0.4-0.4\n        s-0.4,0.2-0.4,0.4v2.1c0,0.5,0.3,1,0.9,1.4C4.3,22.8,4.9,23,5.5,23h15.8c1,0,1.5-0.6,1.5-1.9V3C22.7,2.4,22.6,1.9,22.4,1.6z"}})])])])},staticRenderFns:[]};var r=e("VU/8")(l,c,!1,function(t){e("5jYE")},"data-v-1f5fda7f",null).exports,h=e("b75W"),d=e("uWHh"),u=e("ja0y"),f=e("UeNn"),p=e("gvlw"),v=e("LOoJ"),m=(Object(n.a)(e("LZDu")),{name:"find-person-list",components:{FollowingIcon:u.a,UnFollowingIcon:f.a,EachFollowingIcon:p.a},props:{datas:{type:Array,required:!0}},data:function(){return{}},computed:{formatDatas:function(){var t=this;return this.datas.filter(function(t){return t.id}).map(function(o){var e=o||{},i=e.id,n=e.bio,a=e.name,s=e.avatar,l=e.follower,c=void 0!==l&&l,r=e.following,h=void 0!==r&&r,d={status:!1,text:"关注"};return n=n||"这家伙很懒，什么也没有留下",t.following&&t.follower&&(d={status:!0,text:"相互关注"}),t.follower||(d={status:!1,text:"关注"}),!t.following&&t.follower&&(d={status:!0,text:"已关注"}),{id:i,bio:n,name:a,avatar:s,follower:c,following:h,followAction:d}})}},methods:{changeUrl:i.a,handleFollowingStatus:function(t,o){t?this.handleUnfollowing(o):this.handleFollowing(o)},handleUnfollowing:function(t){var o=this;Object(v.f)(t).then(function(t){t?o.follower=!1:o.$store.dispatch(NOTICE,function(t){t({text:"取关失败,可能是还没关注",time:1500,status:!0})})})},handleFollowing:function(t){var o=this;Object(v.a)(t).then(function(t){t?o.follower=!0:o.$store.dispatch(NOTICE,function(t){t({text:"关注失败,可能是已经关注了",time:1500,status:!0})})})}}}),g={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("ul",{staticStyle:{"background-color":"#fff"}},t._l(t.formatDatas,function(o){return e("li",{key:o.id,class:t.$style.findItem,on:{click:function(e){t.changeUrl("/users/feeds/"+o.id)}}},[e("user-avatar",{attrs:{sex:o.sex,src:o.avatar||null}}),t._v(" "),e("div",{class:t.$style.iteminfo},[e("p",{class:t.$style.itemName},[t._v(t._s(o.name))]),t._v(" "),e("p",{class:t.$style.itemBio},[t._v(t._s(o.bio))])]),t._v(" "),e("div",{class:t.$style.itemFollow},[e("div",{staticClass:"actionButton",on:{click:function(e){e.stopPropagation(),t.handleFollowingStatus(o.followAction.status,o.id)}}},["已关注"==o.followAction.text?e("FollowingIcon",{attrs:{height:"24",width:"24",color:"#59b6d7"}}):t._e(),t._v(" "),"关注"==o.followAction.text?e("UnFollowingIcon",{attrs:{height:"24",width:"24",color:"#333"}}):t._e(),t._v(" "),"相互关注"==o.followAction.text?e("EachFollowingIcon",{attrs:{height:"24",width:"24",color:"#59b6d7"}}):t._e()],1)])],1)}))},staticRenderFns:[]};var w=e("VU/8")(m,g,!1,function(t){this.$style=e("WSFD")},null,null).exports,_={props:{height:{type:[String,Number],default:24},width:{type:[String,Number],default:24}}},L={render:function(){var t=this.$createElement,o=this._self._c||t;return o("svg",{attrs:{viewBox:"0 0 24 24",height:this.height,width:this.width}},[o("path",{staticClass:"st5",attrs:{d:"M12,1C7.5,1,3.8,5.1,5,9.7C6.3,15,12,20.8,12,20.8s5.7-5.8,7-11.1C20.2,5.1,16.5,1,12,1L12,1z M18.1,9.5\nc-1.2,4.6-6.1,9.9-6.1,9.9S7,14,5.9,9.4C4.9,5.4,8.1,2,12,2C15.8,2,19.1,5.4,18.1,9.5L18.1,9.5z M18.1,9.5"}}),this._v(" "),o("path",{staticClass:"st5",attrs:{d:"M12,4.7c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4s4-1.8,4-4C16,6.5,14.2,4.7,12,4.7L12,4.7z M12,11.8\nc-1.7,0-3.1-1.4-3.1-3.1c0-1.7,1.4-3.1,3.1-3.1c1.7,0,3.1,1.4,3.1,3.1C15.1,10.4,13.7,11.8,12,11.8L12,11.8z M12,11.8"}}),this._v(" "),o("path",{staticClass:"st5",attrs:{d:"M15.4,18.5c1.7,0.3,2.8,0.9,2.8,1.6c0,1-2.8,1.9-6.2,1.9c-3.4,0-6.2-0.8-6.2-1.9c0-0.7,1.1-1.2,2.8-1.6\nl-0.2-0.9c-2.1,0.5-3.5,1.4-3.5,2.5c0,1.6,3.2,2.8,7.1,2.8c3.9,0,7.1-1.3,7.1-2.8c0-1-1.4-2-3.5-2.5L15.4,18.5z M15.4,18.5"}})])},staticRenderFns:[]};var y=e("VU/8")(_,L,!1,function(t){e("oOLY")},"data-v-852e59a0",null).exports,b=e("v0mh"),C=e("Yh7+"),x=e("PM1u"),S=(Object(n.a)(e("zpr1")),{name:"FindSomeOne",components:{BackIcon:s.a,Contacts:r,LoadingBlack:b.a,Location:y,Search:a.a,SearchPop:h.a},data:function(){return{isShowModel:!1,locationing:!0,location:{lat:"",lng:"",city:"选择城市"},search:{open:!1,keyword:"",searchUrl:"",searchType:"",list:d.a}}},computed:{open:function(){return this.search.open}},watch:{open:function(t){!1===t&&(this.updateLocation(),this.$storeLocal.remove("FindModelPop_type"))}},methods:{goTo:i.b,changeUrl:i.a,getCurLocation:C.a,showPop:function(t){if(this.search.open=!0,t)switch(this.$storeLocal.set("FindModelPop_type",t),t){case 1:return this.search.searchType="USER",this.search.list=w,void(this.search.searchUrl="user/search?keyword=");case 2:return this.search.searchType="CITY",this.search.list=d.a,void(this.search.searchUrl="locations/search?name=");default:return!1}},updateLocation:function(){this.location=this.$storeLocal.get("LocationObj")||this.location},locationSuccess:function(t){this.locationing=!1;var o=t.addressComponent,e=(o=void 0===o?{}:o).city,i=void 0===e?"":e,n=o.street,a=void 0===n?"":n,s=o.streetNumber,l=void 0===s?"":s,c=t.position,r=(c=void 0===c?{}:c).lat,h=void 0===r?"":r,d=c.lng,u=void 0===d?"":d;this.location={lat:h,lng:u,city:a?a+l:i},this.$storeLocal.set("LocationObj",this.location)},locationError:function(t){this.locationing=!1,this.$store.dispatch(x.N,function(o){o({show:!0,time:2e3,status:!1,text:t})})}},created:function(){var t=this,o=this.$storeLocal.get("FindModelPop_type"),e=this.$storeLocal.get("LocationObj")||{},i=e.lat,n=e.lng,a=e.city;isNaN(i+n)||"string"!=typeof a?setTimeout(function(){t.getCurLocation({success:t.locationSuccess,error:t.locationError})},2e3):(this.location={lat:i,lng:n,city:a},this.locationing=!1),isNaN(o)||this.showPop(o)},destroyed:function(){this.$storeLocal.remove("LocationObj")}}),F={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"findSomeOne",class:{noScroll:t.search.open}},[e("header",{staticClass:"commonHeader",staticStyle:{position:"fixed",top:"0",width:"100%"}},[e("Row",{attrs:{gutter:24}},[e("Col",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"},attrs:{span:"4"},nativeOn:{click:function(o){t.changeUrl("/discover")}}},[e("BackIcon",{attrs:{height:"21",width:"21",color:"#999"}})],1),t._v(" "),e("Col",{staticStyle:{"padding-left":"0"},attrs:{span:"14"}},[e("div",{class:t.$style.input,on:{click:function(o){t.showPop(1)}}},[e("Search",{staticStyle:{position:"absolute",top:"50%",left:"5px","margin-top":"-8px"},attrs:{height:"16",width:"16",color:"#999"}}),t._v(" 搜索\n            ")],1)]),t._v(" "),e("Col",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","padding-left":"0"},attrs:{span:"6"},nativeOn:{click:function(o){t.showPop(2)}}},[t.locationing?e("LoadingBlack",{staticStyle:{"flex-grow":"0","flex-shrink":"0","margin-right":"5px"},attrs:{height:"21",width:"24",color:"#999"}}):e("Location",{staticStyle:{"flex-grow":"0","flex-shrink":"0","margin-right":"5px"},attrs:{height:"24",width:"24",color:"#999"}}),t._v(" "),e("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.location.city))])],1)],1)],1),t._v(" "),e("nav",{staticClass:"findNavBar"},[e("Row",{staticClass:"NavRow",attrs:{gutter:0}},[e("Col",{staticClass:"NavCol",attrs:{span:5}},[e("router-link",{staticClass:"navLink",attrs:{to:"/findsomeone/list/populars"}},[t._v("热门")])],1),t._v(" "),e("Col",{staticClass:"NavCol",attrs:{span:5}},[e("router-link",{staticClass:"navLink",attrs:{to:"/findsomeone/list/latests"}},[t._v("最新")])],1),t._v(" "),e("Col",{staticClass:"NavCol",attrs:{span:5}},[e("router-link",{staticClass:"navLink",attrs:{to:"/findsomeone/list/find-by-tags"}},[t._v("推荐")])],1),t._v(" "),e("Col",{staticClass:"NavCol",attrs:{span:5}},[e("router-link",{staticClass:"navLink",attrs:{to:{name:"near",params:{longitude:t.location.lng||"",latitude:t.location.lat||""}}}},[t._v("附近")])],1)],1)],1),t._v(" "),e("div",{staticClass:"findContent"},[e("router-view")],1),t._v(" "),e("search-pop",{attrs:{searchUrl:t.search.searchUrl,searchfor:t.search.searchType,searchList:t.search.list},model:{value:t.search.open,callback:function(o){t.$set(t.search,"open",o)},expression:"search.open"}})],1)},staticRenderFns:[]};var $=e("VU/8")(S,F,!1,function(t){this.$style=e("xOn0"),e("RVWT")},null,null);o.default=$.exports},"y8Z/":function(t,o,e){"use strict";var i=e("ja0y"),n=e("UeNn"),a=e("gvlw"),s=e("LOoJ"),l=e("O3Q9"),c={name:"FindPersonItem",components:{FollowingIcon:i.a,UnFollowingIcon:n.a,EachFollowingIcon:a.a},props:["item"],data:function(){return{sex:0,id:null,bio:null,name:null,avatar:null,follower:!1,following:!1,noData:!1}},methods:{changeUrl:l.a,handleFollowingStatus:function(t){t?this.handleUnfollowing():this.handleFollowing()},handleUnfollowing:function(){var t=this;Object(s.f)(this.id).then(function(o){o?t.follower=!1:t.$store.dispatch(NOTICE,function(t){t({text:"取关失败,可能是还没关注",time:1500,status:!0})})})},handleFollowing:function(){var t=this;Object(s.a)(this.id).then(function(o){o?t.follower=!0:t.$store.dispatch(NOTICE,function(t){t({text:"关注失败,可能是已经关注了",time:1500,status:!0})})})}},computed:{followAction:function(){return this.following&&this.follower?{status:!0,text:"相互关注"}:this.follower?!this.following&&this.follower?{status:!0,text:"已关注"}:void 0:{status:!1,text:"关注"}}},created:function(){var t=this,o=this.item||{},e=o.user_id,i=o.id,n=o.bio,a=o.sex,l=o.name,c=o.avatar,r=o.follower,h=o.following;void 0!==e&&void 0===i?Object(s.d)(e).then(function(o){var e=o.id,i=o.bio,n=o.name,s=o.avatar,l=o.follower,c=o.following;t.id=e,t.bio=i||"这家伙很懒，什么也没有留下",t.sex=a,t.name=n,t.avatar=s,t.follower=l,t.following=c}).catch(function(t){console.log(t)}):void 0!==i&&void 0===e?(this.id=i,this.bio=n||"这家伙很懒，什么也没有留下",this.sex=a,this.name=l,this.avatar=c,this.follower=r,this.following=h):this.noData=!0}},r={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return t.noData?t._e():e("li",{class:t.$style.findItem,on:{click:function(o){t.changeUrl("/users/feeds/"+t.id)}}},[e("user-avatar",{attrs:{sex:t.sex,src:t.avatar||null}}),t._v(" "),e("div",{class:t.$style.iteminfo},[e("p",{class:t.$style.itemName},[t._v(t._s(t.name))]),t._v(" "),e("p",{class:t.$style.itemBio},[t._v(t._s(t.bio))])]),t._v(" "),e("div",{class:t.$style.itemFollow},[e("div",{staticClass:"actionButton",on:{click:function(o){o.stopPropagation(),t.handleFollowingStatus(t.followAction.status)}}},["已关注"==t.followAction.text?e("FollowingIcon",{attrs:{height:"24",width:"24",color:"#59b6d7"}}):t._e(),t._v(" "),"关注"==t.followAction.text?e("UnFollowingIcon",{attrs:{height:"24",width:"24",color:"#333"}}):t._e(),t._v(" "),"相互关注"==t.followAction.text?e("EachFollowingIcon",{attrs:{height:"24",width:"24",color:"#59b6d7"}}):t._e()],1)])],1)},staticRenderFns:[]};var h=e("VU/8")(c,r,!1,function(t){this.$style=e("vcz1")},null,null);o.a=h.exports}});
//# sourceMappingURL=6.e19fb7043fd7b53b1236.js.map